-------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\slee039\Box\ECON 398\Final Project\Resources\MNW-guide-datasets\tables_1_and_3.tx
> t
  log type:  text
 opened on:   8 Apr 2024, 14:42:27

. 
. timer clear 1

. timer on 1 

. 
. global CVARS "styear state region year"   

. 
. clear 

. insheet using "min_wage_teen_hours2.csv"
(10 vars, 492,827 obs)

. 
. 
. /*mata matrices for the tables*/
. 
. mata: tabone = J(3,24,.)

. mata: tabthree = J(8,8,.)

. 
. /*counters*/
. 
.         *j for columns
.         *i for rows
.         
.         local j = 1

.         local i = 0

. 
. /*hours*/
. 
.     
. /*one way CV1 and CV3 */
. summclust mw, yvar(hours2) xvar(black female) fevar(educ age year state) ///
>  cluster(styear) rho(0.5) jack


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for mw when clustered by styear.
There are 492827 observations within 765 styear clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.153891   0.045499  -3.3823   0.0008   -0.243208   -0.064574
   CV3 |  -0.153891   0.052227  -2.9466   0.0033   -0.256417   -0.051365
  CV3J |  -0.153891   0.052227  -2.9466   0.0033   -0.256417   -0.051365
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      6.0      0.024033       0.000000  -0.165505    
        q1 |    176.0      0.075384       0.000068  -0.154243    
    median |    480.0      0.095621       0.000318  -0.153886    
      mean |    644.2      0.103268       0.001307  -0.153890    
        q3 |    860.0      0.117904       0.000925  -0.153545    
       max |   3052.0      0.250217       0.068845  -0.130484    
-----------+-----------------------------------------------------
   coefvar |      0.9      0.361555       2.939717   0.012286    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  79.43399
G*(.5) is 37.36978 
G*(1)  is 37.34789 

.  
.         mata:tabone[`j',4] =cvstuff[1,3]

.         mata:tabone[`j',5] =cvstuff[1,4]

.         
.         mata:tabone[`j',7] =cvstuff[2,3]

.         mata:tabone[`j',8] =cvstuff[2,4]

.         
.         mata:tabthree[1,1] = $G

.         mata:tabthree[1,2] = gstarzero

.         mata:tabthree[1,3] = clustsum[4,1]

.         mata:tabthree[1,4] = clustsum[1,1]

.         mata:tabthree[1,5] = clustsum[2,1]

.         mata:tabthree[1,6] = clustsum[3,1]

.         mata:tabthree[1,7] = clustsum[5,1]

.         mata:tabthree[1,8] = clustsum[6,1]

.         
.  
.  summclust mw, yvar(hours2) xvar(black female) fevar(educ age year state) ///
>  cluster(state) rho(0.5) jack


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for mw when clustered by statefip.
There are 492827 observations within 51 statefip clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.153891   0.062314  -2.4696   0.0170   -0.279051   -0.028730
   CV3 |  -0.153891   0.067127  -2.2925   0.0261   -0.288720   -0.019061
  CV3J |  -0.153891   0.067127  -2.2925   0.0261   -0.288720   -0.019062
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |    258.0      1.015250       0.000837  -0.177645    
        q1 |   2495.0      1.136757       0.003932  -0.156898    
    median |   7082.0      1.413468       0.009442  -0.153682    
      mean |   9663.3      1.549020       0.019608  -0.153896    
        q3 |  13481.0      1.759903       0.020038  -0.150470    
       max |  35995.0      3.058464       0.160196  -0.122695    
-----------+-----------------------------------------------------
   coefvar |      0.9      0.331260       1.481140   0.062300    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  16.18657
G*(rho) and G*(1) are not available.
There are fixed effects at the cluster or subcluster level.

.  
.         mata:tabone[`j',9] =cvstuff[1,3]

.         mata:tabone[`j',10] =cvstuff[1,4]

.         
.         mata:tabone[`j',12] =cvstuff[2,3]

.         mata:tabone[`j',13] =cvstuff[2,4]

.         
.         mata:tabthree[2,1] = $G

.         mata:tabthree[2,2] = gstarzero

.         mata:tabthree[2,3] = clustsum[4,1]

.         mata:tabthree[2,4] = clustsum[1,1]

.         mata:tabthree[2,5] = clustsum[2,1]

.         mata:tabthree[2,6] = clustsum[3,1]

.         mata:tabthree[2,7] = clustsum[5,1]

.         mata:tabthree[2,8] = clustsum[6,1]

.  
.  summclust mw, yvar(hours2) xvar(black female) fevar(educ age year state) ///
>  cluster(region) rho(0.5) jack


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for mw when clustered by region.
There are 492827 observations within 9 region clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.153891   0.068462  -2.2478   0.0548   -0.311763    0.003982
   CV3 |  -0.153891   0.075412  -2.0407   0.0756   -0.327790    0.020009
  CV3J |  -0.153891   0.075400  -2.0410   0.0756   -0.327763    0.019982
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |  27849.0      5.647608       0.036495  -0.186557    
        q1 |  37396.0      6.929646       0.082490  -0.175865    
    median |  50489.0      7.937512       0.103036  -0.158136    
      mean |  54758.6      8.777778       0.111111  -0.153421    
        q3 |  65389.0     10.095460       0.122517  -0.139184    
       max |  96337.0     14.079015       0.198312  -0.110469    
-----------+-----------------------------------------------------
   coefvar |      0.4      0.291245       0.467610   0.184297    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  7.535393
G*(rho) and G*(1) are not available.
There are fixed effects at the cluster or subcluster level.

.  
.         mata:tabone[`j',14] =cvstuff[1,3]

.         mata:tabone[`j',15] =cvstuff[1,4]

.         
.         mata:tabone[`j',17] =cvstuff[2,3]

.         mata:tabone[`j',18] =cvstuff[2,4]

.         
.         mata:tabthree[3,1] = $G

.         mata:tabthree[3,2] = gstarzero

.         mata:tabthree[3,3] = clustsum[4,1]

.         mata:tabthree[3,4] = clustsum[1,1]

.         mata:tabthree[3,5] = clustsum[2,1]

.         mata:tabthree[3,6] = clustsum[3,1]

.         mata:tabthree[3,7] = clustsum[5,1]

.         mata:tabthree[3,8] = clustsum[6,1]

.  
.  summclust mw, yvar(hours2) xvar(black female) fevar(educ age year state) ///
>  cluster(year) rho(0.5) jack


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for mw when clustered by year.
There are 492827 observations within 15 year clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.153891   0.043785  -3.5147   0.0034   -0.247801   -0.059981
   CV3 |  -0.153891   0.055163  -2.7898   0.0145   -0.272202   -0.035579
  CV3J |  -0.153891   0.055037  -2.7961   0.0143   -0.271933   -0.035848
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |  28262.0      4.603689       0.007533  -0.170403    
        q1 |  28839.0      4.717479       0.032697  -0.161325    
    median |  30733.0      4.971004       0.043698  -0.156239    
      mean |  32855.1      5.266667       0.066667  -0.152896    
        q3 |  40224.0      6.210056       0.050875  -0.144252    
       max |  40394.0      6.235495       0.316216  -0.109709    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.122246       1.168841   0.099581    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  6.593087
G*(rho) and G*(1) are not available.
There are fixed effects at the cluster or subcluster level.

.  
.         mata:tabthree[4,1] = $G

.         mata:tabthree[4,2] = gstarzero

.         mata:tabthree[4,3] = clustsum[4,1]

.         mata:tabthree[4,4] = clustsum[1,1]

.         mata:tabthree[4,5] = clustsum[2,1]

.         mata:tabthree[4,6] = clustsum[3,1]

.         mata:tabthree[4,7] = clustsum[5,1]

.         mata:tabthree[4,8] = clustsum[6,1]

.  
. 
. 
. /*multiway*/
.         qui reg hours2 mw black female i.educ i.age i.year i.state,  robust

.                 
.                 local beta = _b[mw]

.                 mata:tabone[`j',1] = `beta'

.         
.         test mw = 0

 ( 1)  mw = 0

       F(  1,492748) =   29.67
            Prob > F =    0.0000

.                 local t = sqrt(r(F))

.                 local p = r(p)

.                 mata:tabone[`j',2] = `t'

.                 mata:tabone[`j',3] = `p'

.         
.         boottest mw, cluster(styear) noci reps(99999)
command boottest is unrecognized
r(199);

end of do-file

r(199);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. summclust mw, yvar(hours2) xvar(black female) fevar(educ age year state) ///
>  cluster(styear) rho(0.5) jack


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for mw when clustered by styear.
There are 492827 observations within 765 styear clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.153891   0.045499  -3.3823   0.0008   -0.243208   -0.064574
   CV3 |  -0.153891   0.052227  -2.9466   0.0033   -0.256417   -0.051365
  CV3J |  -0.153891   0.052227  -2.9466   0.0033   -0.256417   -0.051365
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      6.0      0.024033       0.000000  -0.165505    
        q1 |    176.0      0.075384       0.000068  -0.154243    
    median |    480.0      0.095621       0.000318  -0.153886    
      mean |    644.2      0.103268       0.001307  -0.153890    
        q3 |    860.0      0.117904       0.000925  -0.153545    
       max |   3052.0      0.250217       0.068845  -0.130484    
-----------+-----------------------------------------------------
   coefvar |      0.9      0.361555       2.939717   0.012286    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  79.43399
G*(.5) is 37.36978 
G*(1)  is 37.34789 

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. do Scripts/DataWrangle.do
file Scripts/DataWrangle.do not found
r(601);

end of do-file

r(601);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. do Scripts/DataWrangle.do
file Scripts/DataWrangle.do not found
r(601);

end of do-file

r(601);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //clean and load in the data for analysis
. do Scripts/DataWrangle.do

. /*
> Author: Sam Lee
> 03.30.2024
> 
> This script takes in all of our data sets and merges them into one cleaned data set for data analysis
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //Load in suffrage data for each country to create instrument
. import delimited "Data/suffrage.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(14 vars, 21,366 obs)

. sort  countryn year

. 
. //We need to figure out the first year that each country granted women suffrage
. //NOTE: This excludes countries that don't give women suffrage (as of 2019): UAE, Saudi Arabia
. // bysort countryn : egen suffrage = max(female_suffrage)
. // keep if suffrage == 0
. // keep countryn suffrage
. // duplicates drop
. 
. keep if female_suffrage == 1
(10,477 observations deleted)

. //Find the first year where female_suffrage == 1
. bysort countryn : egen suffrage = min(year)

. keep countryn countrycode suffrage

. 
. duplicates drop

Duplicates in terms of all variables

(10,686 observations deleted)

. keep if length(countrycode) >= 1
(7 observations deleted)

. 
. keep countrycode suffrage

. //There are some countries that split due to civil wars and other historic events: i.e. Vietnam into 
> South Vietnam and North Vietnam;
. //Hence, these observations are given the same country code. We will keep the suffrage years of when 
> the 'original' country first gave women suffrage.
. //NOTE: This is actually irrelevant to our study because within the countries identified in the Harva
> rd dataverse data set, each country actually is given a unique country code and hence, we are able to
>  map it uniquely to our final data set.
. collapse (min) suffrage, by(countrycode)

. 
. save Data/suffrage.dta, replace
file Data/suffrage.dta saved

. 
. //Data for CO2 emissions across African and Arab countries over time (EDGAR - Emissions Database for 
> Global Atmospheric Research)
. import delimited "Data/emissions.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-9)
(13 vars, 3,498 obs)

. 
. //Response variable is totalco2cap - Total CO2 emissions per capita
. 
. keep region country countrycode year totalco2

. keep if year >= 1985 //this is the smallest year for which we have covariate data
(990 observations deleted)

. 
. rename totalco2 co2

. sort countrycode year

. 
. save Data/emissions.dta, replace
file Data/emissions.dta saved

. 
. //Data for women participation in national government over time (IPU DATA)
. import delimited "Data/IPU.csv", varnames(1) clear
(encoding automatically selected: UTF-8)
(11 vars, 57,148 obs)

. 
. //Clean the numeric variables
. drop lowerpercwomen

. drop upperpercwomen

. 
. local varlist lowerseats lowerwomen upperseats upperwomen

. 
. foreach var of local varlist {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9.]+$") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(361 missing values generated)
(1,470 missing values generated)
(34,664 missing values generated)
(35,227 missing values generated)

. 
. //There was a data entry error here
. replace lowerwomen = 1 if country == "Saint Vincent & the Grenadines" & ipuupdate == "2002-02-04"
(1 real change made)

. 
. //Clean the date columns
. gen ipuupdate_date = date(ipuupdate, "YMD")

. format ipuupdate_date %td

. drop ipuupdate

. rename ipuupdate_date ipuupdate

. 
. gen upperhousesenate_date = date(upperhousesenate, "MY") if upperhousesenate != "---"
(39,109 missing values generated)

. format upperhousesenate_date %td

. drop upperhousesenate

. rename upperhousesenate_date upperhousesenate

. 
. gen lowerelection_date = date(lowerelection, "DMY")
(50,393 missing values generated)

. gen lowerelection_m_date = date(lowerelection, "MY")
(7,342 missing values generated)

. replace lowerelection_date = lowerelection_m_date if lowerelection_date == .
(49,806 real changes made)

. format lowerelection_date %td

. drop lowerelection_m_date lowerelection

. rename lowerelection_date lowerelection

. 
. //This is the year we will group by
. //We want to know what the what the composition of the legislature is like at a specific year
. gen year = year(ipuupdate)

. keep if countrycode != ""
(1,911 observations deleted)

. 
. /*
> In order to match up with our other data,
> which only keeps track of emission or population data by the year for each country, we need the year 
> and country to uniquely identify the observation. Hence, we will select the earliest time in each set
>  of country, year groups to yield us data for women empowerment--although some countries have electio
> ns throughout the year.
> */
. local election_vars lowerwomen upperwomen lowerseats upperseats

. foreach var of local election_vars {
  2.         bysort country year : egen mean`var' = mean(`var')
  3. }
(384 missing values generated)
(33,108 missing values generated)
(170 missing values generated)
(32,869 missing values generated)

. //Treatment variable: Since some countries have multiple elections throughout the year, we are going 
> to standardize it in the sense that we are going to take the 'average' proportion of women representa
> tion (total number of women in power divided by the total number of seats in national legislature) th
> roughout the year
. gen womenrep = (cond(meanlowerwomen == ., 0, meanlowerwomen) +cond(meanupperwomen == ., 0, meanupperw
> omen))/(cond(meanlowerwomen == ., 0, meanlowerseats)+cond(meanupperwomen == ., 0, meanupperseats))
(315 missing values generated)

. 
. foreach var of local election_vars {
  2.         drop mean`var'
  3. }

. 
. keep countrycode year womenrep

. duplicates drop

Duplicates in terms of all variables

(50,093 observations deleted)

. 
. //Some countries in the IPU data set were recorded 'twice' in the sense whereonce was there tradition
> al election composition (baseline), and the other observation during the same year was a special case
>  where the president or some other organization appointed a group of extra delegates (consisting of w
> omen) that increased the women representation for that year/time period.
. //To account for this and to make it so each observation can be uniquely identified by year and count
> ry (time-subject identification), we will just combine the baseline compositions with the composition
> s where these unique cases occured by taking the mean of the women representation proportion
. 
. collapse (mean) womenrep, by(countrycode year)

. 
. sort countrycode year

. 
. save Data/IPU.dta, replace
file Data/IPU.dta saved

. 
. //Load is disasters data for placebo test
. import excel using "Data/disasters.xlsx", sheet("EM-DAT Data") firstrow clear
(46 vars, 2,405 obs)

. 
. //This includes things like epidemics and viral diseases, which may be influenced by the number of wo
> men in legislature if women enact specific policies that influence vaccines, health outcomes, the lik
> elihood of infections, etc.
. drop if DisasterSubgroup == "Biological"
(732 observations deleted)

. 
. rename StartYear year

. rename ISO countrycode

. 
. keep countrycode year

. 
. gen n_disasters = 1

. //The number of natural disasters that happened in each country during each year
. collapse (sum) n_disasters, by (countrycode year)

. 
. save Data/disasters.dta, replace
file Data/disasters.dta saved

. 
. //Covariate Data from the World Bank
. import delimited "Data/worldbank.csv", varnames(1) rowrange(1:652) clear
(encoding automatically selected: ISO-8859-1)
(42 vars, 651 obs)

. 
. drop seriesname

. 
. //Format the years as rows
. reshape long yr, i(countryname seriescode) j(year)
(j = 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 200
> 4 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              651   ->   24,738      
Number of variables                  41   ->   5           
j variable (38 values)                    ->   year
xij variables:
               yr1985 yr1986 ... yr2022   ->   yr
-----------------------------------------------------------------------------

. 
. //Put the metrics as columns
. rename yr value

. replace seriescode = "gdp" if seriescode == "NY.GDP.MKTP.CD"
(8,246 real changes made)

. replace seriescode = "gdppercapita" if seriescode == "NY.GDP.PCAP.CD"
(8,246 real changes made)

. replace seriescode = "population" if seriescode == "SP.POP.TOTL"
(8,246 real changes made)

. reshape wide value, i(countryname year) j(seriescode) string
(j = gdp gdppercapita population)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations           24,738   ->   8,246       
Number of variables                   5   ->   6           
j variable (3 values)        seriescode   ->   (dropped)
xij variables:
                                  value   ->   valuegdp valuegdppercapita valuepopulation
-----------------------------------------------------------------------------

. 
. rename valuegdp gdp

. rename valuegdppercapita gdppercapita

. rename valuepopulation population

. 
. //Clean numeric data
. local metrics gdp gdppercapita population

. foreach var of local metrics {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9]") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(815 missing values generated)
(811 missing values generated)
(5 missing values generated)

. 
. save Data/worldbank.dta, replace
file Data/worldbank.dta saved

. 
. //Merge the data sets
. 
. //Merge covariates with emissions data
. sort countrycode year

. merge 1:1 countrycode year using Data/emissions.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,738
        from master                     5,738  (_merge==1)
        from using                          0  (_merge==2)

    Matched                             2,508  (_merge==3)
    -----------------------------------------

. //All the country codes in the emissions data set match (which is what we want. The worldbank data al
> so includes data from countries outside of the regions of interest)
. keep if _merge == 3
(5,738 observations deleted)

. drop _merge

. 
. drop country //country name from emissions data set

. rename countryname country

. 
. merge 1:1 year countrycode using Data/IPU.dta
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,267
        from master                       848  (_merge==1)
        from using                      3,419  (_merge==2)

    Matched                             1,660  (_merge==3)
    -----------------------------------------

. 
. keep if _merge == 3 | _merge == 1
(3,419 observations deleted)

. drop _merge

. 
. sort countrycode year

. 
. //Join suffrage data and create instrument
. merge m:1 countrycode using Data/suffrage.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           202
        from master                        76  (_merge==1)
        from using                        126  (_merge==2)

    Matched                             2,432  (_merge==3)
    -----------------------------------------

. //These are countries that are not African or Arab
. drop if _merge == 2
(126 observations deleted)

. drop _merge

. 
. //Instrument: years from when country granted suffrage
. gen z = year - suffrage
(76 missing values generated)

. 
. drop if z == .
(76 observations deleted)

. //This drops Saudi Arabia and UAE:
. //Saudia Arabia only holds local elections (which women were enfranchised in 2015)
. //UAE doesn't grant universal suffrage for women (or anyone), and only recently held national electio
> ns in 2006, allowing a small number of voters to participate.
. 
. //NOTE: The womenrep data for years 1985-1996 will be missing for every country since that data wasn'
> t provided by the IPU. We keep these rows in here anyhow because we might want previous years to veri
> fy the parallel trends assumption and to use lags from other variables.
. save Data/womenrep.dta, replace
file Data/womenrep.dta saved

. export delimited using "Data/womenrep.csv", replace
file Data/womenrep.csv saved

. 
end of do-file

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create lags
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_1

. forvalues i = 1985/1998 {
  2.         drop _Iyear_`i'
  3. }

. // drop _Iyear_2022
. drop if womenrep_lag == .
(897 observations deleted)

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0.5) jack 


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for womenrep_lag when clustered by countryid.
There are 1499 observations within 64 countryid clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.857458   0.645386  -1.3286   0.1888   -2.147159    0.432243
   CV3 |  -0.857458   0.664641  -1.2901   0.2017   -2.185637    0.470721
  CV3J |  -0.857458   0.664641  -1.2901   0.2017   -2.185636    0.470721
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      5.0      1.067851       0.000081  -1.074068    
        q1 |     23.5      1.448575       0.005848  -0.887600    
    median |     25.0      1.466690       0.010637  -0.860535    
      mean |     23.4      1.515625       0.015625  -0.857511    
        q3 |     25.0      1.521499       0.018323  -0.824904    
       max |     25.0      2.651054       0.079960  -0.532398    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.130602       0.950012   0.098423    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  33.89076
G*(.5) is 33.89076 
G*(1)  is 1.038324 

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0.1) jack 


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for womenrep_lag when clustered by countryid.
There are 1499 observations within 64 countryid clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.857458   0.645386  -1.3286   0.1888   -2.147159    0.432243
   CV3 |  -0.857458   0.664641  -1.2901   0.2017   -2.185637    0.470721
  CV3J |  -0.857458   0.664641  -1.2901   0.2017   -2.185636    0.470721
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      5.0      1.067851       0.000081  -1.074068    
        q1 |     23.5      1.448575       0.005848  -0.887600    
    median |     25.0      1.466690       0.010637  -0.860535    
      mean |     23.4      1.515625       0.015625  -0.857511    
        q3 |     25.0      1.521499       0.018323  -0.824904    
       max |     25.0      2.651054       0.079960  -0.532398    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.130602       0.950012   0.098423    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  33.89076
G*(.1) is 33.89076 
G*(1)  is 1.038324 

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0) jack 
The value for rho, 0, is invalid. rho must be between 0 and 1.
r(198);

end of do-file

r(198);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0.9) jack 


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for womenrep_lag when clustered by countryid.
There are 1499 observations within 64 countryid clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.857458   0.645386  -1.3286   0.1888   -2.147159    0.432243
   CV3 |  -0.857458   0.664641  -1.2901   0.2017   -2.185637    0.470721
  CV3J |  -0.857458   0.664641  -1.2901   0.2017   -2.185636    0.470721
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      5.0      1.067851       0.000081  -1.074068    
        q1 |     23.5      1.448575       0.005848  -0.887600    
    median |     25.0      1.466690       0.010637  -0.860535    
      mean |     23.4      1.515625       0.015625  -0.857511    
        q3 |     25.0      1.521499       0.018323  -0.824904    
       max |     25.0      2.651054       0.079960  -0.532398    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.130602       0.950012   0.098423    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  33.89076
G*(.9) is 33.89076 
G*(1)  is 1.038324 

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0.5) jack 


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for womenrep_lag when clustered by countryid.
There are 1499 observations within 64 countryid clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -0.857458   0.645386  -1.3286   0.1888   -2.147159    0.432243
   CV3 |  -0.857458   0.664641  -1.2901   0.2017   -2.185637    0.470721
  CV3J |  -0.857458   0.664641  -1.2901   0.2017   -2.185636    0.470721
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      5.0      1.067851       0.000081  -1.074068    
        q1 |     23.5      1.448575       0.005848  -0.887600    
    median |     25.0      1.466690       0.010637  -0.860535    
      mean |     23.4      1.515625       0.015625  -0.857511    
        q3 |     25.0      1.521499       0.018323  -0.824904    
       max |     25.0      2.651054       0.079960  -0.532398    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.130602       0.950012   0.098423    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  33.89076
G*(.5) is 33.89076 
G*(1)  is 1.038324 

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. drop _Iyear_2022 //(regression results are sensitive to omitted indicators)

. reg womenrep_lag z_lag lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,499
-------------+----------------------------------   F(95, 1403)     =     77.93
       Model |   14.591666        95  .153596484   Prob > F        =    0.0000
    Residual |  2.76526426     1,403  .001970965   R-squared       =    0.8407
-------------+----------------------------------   Adj R-squared   =    0.8299
       Total |  17.3569303     1,498  .011586736   Root MSE        =     .0444

----------------------------------------------------------------------------------
    womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
           z_lag |   .0056196   .0005328    10.55   0.000     .0045744    .0066648
       lgdp2_lag |   .0225212   .0081681     2.76   0.006     .0064982    .0385443
       lgdp3_lag |    -.00714   .0110674    -0.65   0.519    -.0288505    .0145705
       lgdp4_lag |   .0017338   .0108426     0.16   0.873    -.0195356    .0230033
       lgdp5_lag |    .007004   .0075865     0.92   0.356    -.0078781    .0218861
lpopulation2_lag |  -.3420979   .1276795    -2.68   0.007    -.5925611   -.0916346
lpopulation3_lag |   .3886089    .236357     1.64   0.100    -.0750424    .8522602
lpopulation4_lag |    -.08213   .2268873    -0.36   0.717    -.5272049    .3629448
lpopulation5_lag |  -.0227102   .1119356    -0.20   0.839    -.2422894     .196869
     _Iyear_1999 |   -.005555   .0085764    -0.65   0.517    -.0223789    .0112689
     _Iyear_2000 |  -.0083936   .0082188    -1.02   0.307     -.024516    .0077288
     _Iyear_2001 |   -.008101   .0081933    -0.99   0.323    -.0241734    .0079714
     _Iyear_2002 |  -.0090384   .0079124    -1.14   0.254    -.0245597     .006483
     _Iyear_2003 |  -.0093962   .0077783    -1.21   0.227    -.0246545    .0058621
     _Iyear_2004 |   .0002769   .0076762     0.04   0.971    -.0147812     .015335
     _Iyear_2005 |   .0056257    .007523     0.75   0.455    -.0091318    .0203832
     _Iyear_2006 |    .011525   .0073224     1.57   0.116    -.0028389     .025889
     _Iyear_2007 |   .0143268   .0072742     1.97   0.049     .0000573    .0285963
     _Iyear_2008 |   .0124357   .0072448     1.72   0.086    -.0017762    .0266475
     _Iyear_2009 |   .0075189   .0072338     1.04   0.299    -.0066712    .0217091
     _Iyear_2010 |   .0047486   .0073432     0.65   0.518    -.0096563    .0191536
     _Iyear_2011 |   .0048241   .0072395     0.67   0.505    -.0093773    .0190254
     _Iyear_2012 |   .0040567   .0073356     0.55   0.580    -.0103332    .0184466
     _Iyear_2013 |   .0042416   .0073404     0.58   0.563    -.0101577    .0186409
     _Iyear_2014 |   .0083686   .0073544     1.14   0.255    -.0060583    .0227955
     _Iyear_2015 |   .0117647   .0074434     1.58   0.114    -.0028367     .026366
     _Iyear_2016 |   .0080245   .0074969     1.07   0.285    -.0066819     .022731
     _Iyear_2017 |   .0069783   .0074382     0.94   0.348    -.0076128    .0215694
     _Iyear_2018 |   .0024247   .0075296     0.32   0.747    -.0123458    .0171952
     _Iyear_2019 |  -.0008978   .0077363    -0.12   0.908    -.0160737     .014278
     _Iyear_2020 |  -.0032676   .0077873    -0.42   0.675    -.0185437    .0120084
     _Iyear_2021 |  -.0007155   .0079318    -0.09   0.928     -.016275     .014844
   _Icountryco_2 |  -.0224624   .0255753    -0.88   0.380    -.0726324    .0277076
   _Icountryco_3 |  -.2749124   .0244854   -11.23   0.000    -.3229443   -.2268806
   _Icountryco_4 |  -.1968894   .0186843   -10.54   0.000    -.2335417   -.1602372
   _Icountryco_5 |   -.139506   .0494585    -2.82   0.005    -.2365265   -.0424855
   _Icountryco_6 |  -.3054531   .0464778    -6.57   0.000    -.3966266   -.2142796
   _Icountryco_7 |  -.2679149   .0348052    -7.70   0.000    -.3361908    -.199639
   _Icountryco_8 |  -.2469679    .015489   -15.94   0.000    -.2773521   -.2165838
   _Icountryco_9 |  -.1764897   .0159998   -11.03   0.000    -.2078757   -.1451036
  _Icountryco_10 |  -.1202873   .0232837    -5.17   0.000    -.1659618   -.0746128
  _Icountryco_11 |  -.2159371   .0363742    -5.94   0.000    -.2872908   -.1445834
  _Icountryco_12 |  -.3373027   .0606842    -5.56   0.000    -.4563442   -.2182611
  _Icountryco_13 |  -.2182746   .0649237    -3.36   0.001    -.3456326   -.0909166
  _Icountryco_14 |   -.233807   .0545401    -4.29   0.000     -.340796    -.126818
  _Icountryco_15 |  -.2060627   .0138328   -14.90   0.000    -.2331979   -.1789276
  _Icountryco_16 |  -.2488231   .0218374   -11.39   0.000    -.2916606   -.2059855
  _Icountryco_17 |   .0366969   .0302287     1.21   0.225    -.0226014    .0959953
  _Icountryco_18 |  -.0692545   .0256407    -2.70   0.007    -.1195526   -.0189563
  _Icountryco_19 |  -.3192122   .0525472    -6.07   0.000    -.4222917   -.2161328
  _Icountryco_20 |  -.2341014   .0157715   -14.84   0.000    -.2650396   -.2031631
  _Icountryco_21 |  -.1831759   .0242857    -7.54   0.000    -.2308161   -.1355357
  _Icountryco_22 |  -.2915975   .0464755    -6.27   0.000    -.3827664   -.2004286
  _Icountryco_23 |   -.203828   .0459311    -4.44   0.000     -.293929    -.113727
  _Icountryco_24 |  -.2947933   .0574025    -5.14   0.000    -.4073972   -.1821893
  _Icountryco_25 |  -.1705647   .0251595    -6.78   0.000     -.219919   -.1212104
  _Icountryco_26 |  -.1458395   .0141859   -10.28   0.000    -.1736673   -.1180116
  _Icountryco_27 |  -.3287945   .0359524    -9.15   0.000    -.3993208   -.2582682
  _Icountryco_28 |  -.2229382   .0242949    -9.18   0.000    -.2705964     -.17528
  _Icountryco_29 |  -.1668883   .0155716   -10.72   0.000    -.1974345   -.1363422
  _Icountryco_30 |  -.1950497   .0370383    -5.27   0.000    -.2677062   -.1223932
  _Icountryco_31 |  -.4340323   .0374552   -11.59   0.000    -.5075065   -.3605581
  _Icountryco_32 |  -.3440302   .0428608    -8.03   0.000    -.4281084    -.259952
  _Icountryco_33 |  -.3140411   .0327589    -9.59   0.000    -.3783027   -.2497794
  _Icountryco_34 |  -.1742862   .0441788    -3.95   0.000    -.2609498   -.0876226
  _Icountryco_35 |  -.2411119    .013657   -17.65   0.000    -.2679024   -.2143215
  _Icountryco_36 |  -.1847421   .0168981   -10.93   0.000    -.2178903   -.1515939
  _Icountryco_37 |  -.2103067   .0189632   -11.09   0.000    -.2475059   -.1731075
  _Icountryco_38 |   .1281706    .013886     9.23   0.000     .1009311    .1554102
  _Icountryco_39 |  -.2570489   .0393885    -6.53   0.000    -.3343155   -.1797823
  _Icountryco_40 |  -.3000597   .0541977    -5.54   0.000    -.4063768   -.1937425
  _Icountryco_41 |  -.1499613   .0180471    -8.31   0.000    -.1853635    -.114559
  _Icountryco_42 |  -.0023455    .038665    -0.06   0.952     -.078193     .073502
  _Icountryco_43 |  -.2106936   .0189616   -11.11   0.000    -.2478898   -.1734974
  _Icountryco_44 |  -.1272098   .0359151    -3.54   0.000     -.197663   -.0567567
  _Icountryco_45 |  -.1512167   .0340028    -4.45   0.000    -.2179185   -.0845149
  _Icountryco_46 |   -.267057   .0460793    -5.80   0.000    -.3574487   -.1766654
  _Icountryco_47 |   .1157392   .0225637     5.13   0.000     .0714769    .1600015
  _Icountryco_48 |  -.1134068   .0142235    -7.97   0.000    -.1413084   -.0855052
  _Icountryco_49 |  -.0585431   .0206552    -2.83   0.005    -.0990616   -.0180246
  _Icountryco_50 |   -.222827   .0296446    -7.52   0.000    -.2809796   -.1646745
  _Icountryco_51 |  -.1109377   .0268593    -4.13   0.000    -.1636264   -.0582491
  _Icountryco_52 |   -.290922    .082082    -3.54   0.000    -.4519386   -.1299054
  _Icountryco_53 |  -.2659238   .0549867    -4.84   0.000    -.3737887   -.1580589
  _Icountryco_54 |  -.2031972   .0960795    -2.11   0.035    -.3916721   -.0147223
  _Icountryco_55 |  -.2848905   .0185447   -15.36   0.000    -.3212688   -.2485122
  _Icountryco_56 |  -.2438334   .0220486   -11.06   0.000    -.2870851   -.2005817
  _Icountryco_57 |  -.2492283   .0295288    -8.44   0.000    -.3071538   -.1913029
  _Icountryco_58 |  -.1808478   .0229795    -7.87   0.000    -.2259257   -.1357699
  _Icountryco_59 |    .018926   .0172185     1.10   0.272    -.0148507    .0527027
  _Icountryco_60 |   .0015264   .0156578     0.10   0.922    -.0291888    .0322417
  _Icountryco_61 |  -.1409778   .0157567    -8.95   0.000    -.1718871   -.1100686
  _Icountryco_62 |   .2105298    .026294     8.01   0.000     .1589499    .2621096
  _Icountryco_63 |  -.1864125   .0183896   -10.14   0.000    -.2224866   -.1503384
  _Icountryco_64 |  -.0137545   .0145964    -0.94   0.346    -.0423877    .0148787
           _cons |   .4664864   .2653926     1.76   0.079    -.0541227    .9870954
----------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. reg womenrep_lag z_lag //lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,535
-------------+----------------------------------   F(1, 1533)      =     68.38
       Model |  .749255906         1  .749255906   Prob > F        =    0.0000
    Residual |   16.797716     1,533  .010957414   R-squared       =    0.0427
-------------+----------------------------------   Adj R-squared   =    0.0421
       Total |  17.5469719     1,534  .011438704   Root MSE        =    .10468

------------------------------------------------------------------------------
womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       z_lag |   .0015259   .0001845     8.27   0.000      .001164    .0018879
       _cons |   .0887804    .008115    10.94   0.000     .0728627    .1046982
------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. do Scripts/DataWrangle.do

. /*
> Author: Sam Lee
> 03.30.2024
> 
> This script takes in all of our data sets and merges them into one cleaned data set for data analysis
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //Load in suffrage data for each country to create instrument
. import delimited "Data/suffrage.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(14 vars, 21,366 obs)

. sort  countryn year

. 
. //We need to figure out the first year that each country granted women suffrage
. //NOTE: This excludes countries that don't give women suffrage (as of 2019): UAE, Saudi Arabia
. // bysort countryn : egen suffrage = max(female_suffrage)
. // keep if suffrage == 0
. // keep countryn suffrage
. // duplicates drop
. 
. keep if female_suffrage == 1
(10,477 observations deleted)

. //Find the first year where female_suffrage == 1
. bysort countryn : egen suffrage = min(year)

. keep countryn countrycode suffrage

. 
. duplicates drop

Duplicates in terms of all variables

(10,686 observations deleted)

. keep if length(countrycode) >= 1
(7 observations deleted)

. 
. keep countrycode suffrage

. //There are some countries that split due to civil wars and other historic events: i.e. Vietnam into 
> South Vietnam and North Vietnam;
. //Hence, these observations are given the same country code. We will keep the suffrage years of when 
> the 'original' country first gave women suffrage.
. //NOTE: This is actually irrelevant to our study because within the countries identified in the Harva
> rd dataverse data set, each country actually is given a unique country code and hence, we are able to
>  map it uniquely to our final data set.
. collapse (min) suffrage, by(countrycode)

. 
. save Data/suffrage.dta, replace
file Data/suffrage.dta saved

. 
. //Data for CO2 emissions across African and Arab countries over time (EDGAR - Emissions Database for 
> Global Atmospheric Research)
. import delimited "Data/emissions.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-9)
(13 vars, 3,498 obs)

. 
. //Response variable is totalco2cap - Total CO2 emissions per capita
. 
. keep region country countrycode year totalco2

. keep if year >= 1985 //this is the smallest year for which we have covariate data
(990 observations deleted)

. 
. rename totalco2 co2

. sort countrycode year

. 
. save Data/emissions.dta, replace
file Data/emissions.dta saved

. 
. //Data for women participation in national government over time (IPU DATA)
. import delimited "Data/IPU.csv", varnames(1) clear
(encoding automatically selected: UTF-8)
(11 vars, 57,148 obs)

. 
. //Clean the numeric variables
. drop lowerpercwomen

. drop upperpercwomen

. 
. local varlist lowerseats lowerwomen upperseats upperwomen

. 
. foreach var of local varlist {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9.]+$") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(361 missing values generated)
(1,470 missing values generated)
(34,664 missing values generated)
(35,227 missing values generated)

. 
. //There was a data entry error here
. replace lowerwomen = 1 if country == "Saint Vincent & the Grenadines" & ipuupdate == "2002-02-04"
(1 real change made)

. 
. //Clean the date columns
. gen ipuupdate_date = date(ipuupdate, "YMD")

. format ipuupdate_date %td

. drop ipuupdate

. rename ipuupdate_date ipuupdate

. 
. gen upperhousesenate_date = date(upperhousesenate, "MY") if upperhousesenate != "---"
(39,109 missing values generated)

. format upperhousesenate_date %td

. drop upperhousesenate

. rename upperhousesenate_date upperhousesenate

. 
. gen lowerelection_date = date(lowerelection, "DMY")
(50,393 missing values generated)

. gen lowerelection_m_date = date(lowerelection, "MY")
(7,342 missing values generated)

. replace lowerelection_date = lowerelection_m_date if lowerelection_date == .
(49,806 real changes made)

. format lowerelection_date %td

. drop lowerelection_m_date lowerelection

. rename lowerelection_date lowerelection

. 
. //This is the year we will group by
. //We want to know what the what the composition of the legislature is like at a specific year
. gen year = year(ipuupdate)

. keep if countrycode != ""
(1,911 observations deleted)

. 
. /*
> In order to match up with our other data,
> which only keeps track of emission or population data by the year for each country, we need the year 
> and country to uniquely identify the observation. Hence, we will select the earliest time in each set
>  of country, year groups to yield us data for women empowerment--although some countries have electio
> ns throughout the year.
> */
. local election_vars lowerwomen upperwomen lowerseats upperseats

. foreach var of local election_vars {
  2.         bysort country year : egen mean`var' = mean(`var')
  3. }
(384 missing values generated)
(33,108 missing values generated)
(170 missing values generated)
(32,869 missing values generated)

. //Treatment variable: Since some countries have multiple elections throughout the year, we are going 
> to standardize it in the sense that we are going to take the 'average' proportion of women representa
> tion (total number of women in power divided by the total number of seats in national legislature) th
> roughout the year
. gen womenrep = (cond(meanlowerwomen == ., 0, meanlowerwomen) +cond(meanupperwomen == ., 0, meanupperw
> omen))/(cond(meanlowerwomen == ., 0, meanlowerseats)+cond(meanupperwomen == ., 0, meanupperseats))
(315 missing values generated)

. 
. foreach var of local election_vars {
  2.         drop mean`var'
  3. }

. 
. keep countrycode year womenrep

. duplicates drop

Duplicates in terms of all variables

(50,093 observations deleted)

. 
. //Some countries in the IPU data set were recorded 'twice' in the sense whereonce was there tradition
> al election composition (baseline), and the other observation during the same year was a special case
>  where the president or some other organization appointed a group of extra delegates (consisting of w
> omen) that increased the women representation for that year/time period.
. //To account for this and to make it so each observation can be uniquely identified by year and count
> ry (time-subject identification), we will just combine the baseline compositions with the composition
> s where these unique cases occured by taking the mean of the women representation proportion
. 
. collapse (mean) womenrep, by(countrycode year)

. 
. sort countrycode year

. 
. save Data/IPU.dta, replace
file Data/IPU.dta saved

. 
. //Load is disasters data for placebo test
. import excel using "Data/disasters.xlsx", sheet("EM-DAT Data") firstrow clear
(46 vars, 2,405 obs)

. 
. //This includes things like epidemics and viral diseases, which may be influenced by the number of wo
> men in legislature if women enact specific policies that influence vaccines, health outcomes, the lik
> elihood of infections, etc.
. drop if DisasterSubgroup == "Biological"
(732 observations deleted)

. 
. rename StartYear year

. rename ISO countrycode

. 
. keep countrycode year

. 
. gen n_disasters = 1

. //The number of natural disasters that happened in each country during each year
. collapse (sum) n_disasters, by (countrycode year)

. 
. save Data/disasters.dta, replace
file Data/disasters.dta saved

. 
. //Covariate Data from the World Bank
. import delimited "Data/worldbank.csv", varnames(1) rowrange(1:652) clear
(encoding automatically selected: ISO-8859-1)
(42 vars, 651 obs)

. 
. drop seriesname

. 
. //Format the years as rows
. reshape long yr, i(countryname seriescode) j(year)
(j = 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 200
> 4 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              651   ->   24,738      
Number of variables                  41   ->   5           
j variable (38 values)                    ->   year
xij variables:
               yr1985 yr1986 ... yr2022   ->   yr
-----------------------------------------------------------------------------

. 
. //Put the metrics as columns
. rename yr value

. replace seriescode = "gdp" if seriescode == "NY.GDP.MKTP.CD"
(8,246 real changes made)

. replace seriescode = "gdppercapita" if seriescode == "NY.GDP.PCAP.CD"
(8,246 real changes made)

. replace seriescode = "population" if seriescode == "SP.POP.TOTL"
(8,246 real changes made)

. reshape wide value, i(countryname year) j(seriescode) string
(j = gdp gdppercapita population)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations           24,738   ->   8,246       
Number of variables                   5   ->   6           
j variable (3 values)        seriescode   ->   (dropped)
xij variables:
                                  value   ->   valuegdp valuegdppercapita valuepopulation
-----------------------------------------------------------------------------

. 
. rename valuegdp gdp

. rename valuegdppercapita gdppercapita

. rename valuepopulation population

. 
. //Clean numeric data
. local metrics gdp gdppercapita population

. foreach var of local metrics {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9]") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(815 missing values generated)
(811 missing values generated)
(5 missing values generated)

. 
. save Data/worldbank.dta, replace
file Data/worldbank.dta saved

. 
. //Merge the data sets
. 
. //Merge covariates with emissions data
. sort countrycode year

. merge 1:1 countrycode year using Data/emissions.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,738
        from master                     5,738  (_merge==1)
        from using                          0  (_merge==2)

    Matched                             2,508  (_merge==3)
    -----------------------------------------

. //All the country codes in the emissions data set match (which is what we want. The worldbank data al
> so includes data from countries outside of the regions of interest)
. keep if _merge == 3
(5,738 observations deleted)

. drop _merge

. 
. drop country //country name from emissions data set

. rename countryname country

. 
. merge 1:1 year countrycode using Data/IPU.dta
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,267
        from master                       848  (_merge==1)
        from using                      3,419  (_merge==2)

    Matched                             1,660  (_merge==3)
    -----------------------------------------

. 
. keep if _merge == 3 | _merge == 1
(3,419 observations deleted)

. drop _merge

. 
. sort countrycode year

. 
. //Join suffrage data and create instrument
. merge m:1 countrycode using Data/suffrage.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           202
        from master                        76  (_merge==1)
        from using                        126  (_merge==2)

    Matched                             2,432  (_merge==3)
    -----------------------------------------

. //These are countries that are not African or Arab
. drop if _merge == 2
(126 observations deleted)

. drop _merge

. 
. //Instrument: years from when country granted suffrage
. gen z = year - suffrage
(76 missing values generated)

. 
. drop if z == .
(76 observations deleted)

. //This drops Saudi Arabia and UAE:
. //Saudia Arabia only holds local elections (which women were enfranchised in 2015)
. //UAE doesn't grant universal suffrage for women (or anyone), and only recently held national electio
> ns in 2006, allowing a small number of voters to participate.
. 
. //NOTE: The womenrep data for years 1985-1996 will be missing for every country since that data wasn'
> t provided by the IPU. We keep these rows in here anyhow because we might want previous years to veri
> fy the parallel trends assumption and to use lags from other variables.
. save Data/womenrep.dta, replace
file Data/womenrep.dta saved

. export delimited using "Data/womenrep.csv", replace
file Data/womenrep.csv saved

. 
end of do-file

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create lags
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_1

. forvalues i = 1985/1998 {
  2.         drop _Iyear_`i'
  3. }

. // drop _Iyear_2022
. drop if womenrep_lag == .
(897 observations deleted)

. 
. //Two-stage diff-in-diff regression (Main regression to derive delta)
. drop _Iyear_2010 //(regression results are sensitive to omitted indicators)

. reg womenrep_lag z_lag //lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,535
-------------+----------------------------------   F(1, 1533)      =     68.38
       Model |  .749255906         1  .749255906   Prob > F        =    0.0000
    Residual |   16.797716     1,533  .010957414   R-squared       =    0.0427
-------------+----------------------------------   Adj R-squared   =    0.0421
       Total |  17.5469719     1,534  .011438704   Root MSE        =    .10468

------------------------------------------------------------------------------
womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       z_lag |   .0015259   .0001845     8.27   0.000      .001164    .0018879
       _cons |   .0887804    .008115    10.94   0.000     .0728627    .1046982
------------------------------------------------------------------------------

. // ivregress 2sls co2 lgdp* lpopulation* _Iyear* _Icountry* (womenrep_lag=z_lag), cluster(countryid)
. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. reg womenrep_lag z_lag lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,499
-------------+----------------------------------   F(95, 1403)     =     77.93
       Model |   14.591666        95  .153596484   Prob > F        =    0.0000
    Residual |  2.76526426     1,403  .001970965   R-squared       =    0.8407
-------------+----------------------------------   Adj R-squared   =    0.8299
       Total |  17.3569303     1,498  .011586736   Root MSE        =     .0444

----------------------------------------------------------------------------------
    womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
           z_lag |   .0060153   .0008258     7.28   0.000     .0043953    .0076353
       lgdp2_lag |   .0225212   .0081681     2.76   0.006     .0064982    .0385443
       lgdp3_lag |    -.00714   .0110674    -0.65   0.519    -.0288505    .0145705
       lgdp4_lag |   .0017338   .0108426     0.16   0.873    -.0195356    .0230033
       lgdp5_lag |    .007004   .0075865     0.92   0.356    -.0078781    .0218861
lpopulation2_lag |  -.3420979   .1276795    -2.68   0.007    -.5925611   -.0916346
lpopulation3_lag |   .3886089    .236357     1.64   0.100    -.0750424    .8522602
lpopulation4_lag |    -.08213   .2268873    -0.36   0.717    -.5272049    .3629448
lpopulation5_lag |  -.0227102   .1119356    -0.20   0.839    -.2422894     .196869
     _Iyear_1999 |  -.0059508   .0084121    -0.71   0.479    -.0224524    .0105509
     _Iyear_2000 |   -.009185   .0079443    -1.16   0.248     -.024769    .0063989
     _Iyear_2001 |  -.0092882    .007862    -1.18   0.238    -.0247108    .0061344
     _Iyear_2002 |  -.0106213   .0075502    -1.41   0.160    -.0254321    .0041895
     _Iyear_2003 |  -.0113748   .0074681    -1.52   0.128    -.0260245     .003275
     _Iyear_2004 |  -.0020974   .0074114    -0.28   0.777     -.016636    .0124412
     _Iyear_2005 |   .0028557   .0072921     0.39   0.695    -.0114489    .0171603
     _Iyear_2006 |   .0083593   .0071587     1.17   0.243    -.0056836    .0224021
     _Iyear_2007 |   .0107653    .007248     1.49   0.138    -.0034528    .0249835
     _Iyear_2008 |   .0084785   .0074325     1.14   0.254    -.0061015    .0230584
     _Iyear_2009 |    .003166   .0076496     0.41   0.679    -.0118399    .0181719
     _Iyear_2011 |  -.0003203   .0084794    -0.04   0.970     -.016954    .0163134
     _Iyear_2012 |  -.0014834   .0088588    -0.17   0.867    -.0188614    .0158946
     _Iyear_2013 |  -.0016942   .0093151    -0.18   0.856    -.0199672    .0165788
     _Iyear_2014 |    .002037   .0097718     0.21   0.835    -.0171319     .021206
     _Iyear_2015 |   .0050374   .0103443     0.49   0.626    -.0152546    .0253294
     _Iyear_2016 |   .0009016   .0109259     0.08   0.934    -.0205313    .0223345
     _Iyear_2017 |  -.0005404    .011638    -0.05   0.963    -.0233701    .0222893
     _Iyear_2018 |  -.0054897   .0122243    -0.45   0.653    -.0294695      .01849
     _Iyear_2019 |   -.009208   .0127954    -0.72   0.472    -.0343083    .0158923
     _Iyear_2020 |  -.0119735   .0132572    -0.90   0.367    -.0379796    .0140326
     _Iyear_2021 |  -.0098171   .0138932    -0.71   0.480    -.0370707    .0174365
     _Iyear_2022 |  -.0094973   .0146865    -0.65   0.518    -.0383071    .0193125
   _Icountryco_2 |  -.0276067   .0272441    -1.01   0.311    -.0810503    .0258368
   _Icountryco_3 |  -.2808482    .026276   -10.69   0.000    -.3323927   -.2293038
   _Icountryco_4 |  -.2028252   .0212758    -9.53   0.000    -.2445611   -.1610894
   _Icountryco_5 |  -.1288216   .0533243    -2.42   0.016    -.2334255   -.0242177
   _Icountryco_6 |  -.3090146   .0465896    -6.63   0.000    -.4004074   -.2176218
   _Icountryco_7 |  -.2738507   .0361621    -7.57   0.000    -.3447883   -.2029131
   _Icountryco_8 |  -.2529037   .0182136   -13.89   0.000    -.2886325    -.217175
   _Icountryco_9 |  -.1824255   .0187426    -9.73   0.000    -.2191921   -.1456588
  _Icountryco_10 |  -.1234531   .0242222    -5.10   0.000    -.1709688   -.0759374
  _Icountryco_11 |  -.2218729   .0373595    -5.94   0.000    -.2951594   -.1485864
  _Icountryco_12 |  -.3373027   .0606842    -5.56   0.000    -.4563442   -.2182611
  _Icountryco_13 |  -.2182746   .0649237    -3.36   0.001    -.3456326   -.0909166
  _Icountryco_14 |  -.2330156   .0545892    -4.27   0.000    -.3401007   -.1259304
  _Icountryco_15 |  -.2112071   .0160703   -13.14   0.000    -.2427315   -.1796827
  _Icountryco_16 |  -.2563418   .0252829   -10.14   0.000    -.3059381   -.2067455
  _Icountryco_17 |   .0438199   .0322801     1.36   0.175    -.0195026    .1071423
  _Icountryco_18 |  -.0771689   .0294517    -2.62   0.009     -.134943   -.0193948
  _Icountryco_19 |  -.3251481   .0529933    -6.14   0.000    -.4291028   -.2211933
  _Icountryco_20 |  -.2412243   .0197547   -12.21   0.000    -.2799763   -.2024724
  _Icountryco_21 |  -.1899031   .0266287    -7.13   0.000    -.2421396   -.1376667
  _Icountryco_22 |  -.2955547   .0468327    -6.31   0.000    -.3874243   -.2036851
  _Icountryco_23 |  -.2042237   .0459291    -4.45   0.000    -.2943207   -.1141267
  _Icountryco_24 |  -.2975633   .0573618    -5.19   0.000    -.4100874   -.1850392
  _Icountryco_25 |  -.1689818   .0252547    -6.69   0.000    -.2185228   -.1194409
  _Icountryco_26 |  -.1525667   .0176067    -8.67   0.000     -.187105   -.1180284
  _Icountryco_27 |   -.339479   .0387794    -8.75   0.000    -.4155508   -.2634072
  _Icountryco_28 |  -.2233339   .0242781    -9.20   0.000    -.2709592   -.1757087
  _Icountryco_29 |   -.171637   .0176673    -9.71   0.000    -.2062941   -.1369798
  _Icountryco_30 |  -.1827823   .0433015    -4.22   0.000     -.267725   -.0978396
  _Icountryco_31 |  -.4431339   .0396065   -11.19   0.000    -.5208282   -.3654395
  _Icountryco_32 |  -.3551104   .0464545    -7.64   0.000    -.4462381   -.2639826
  _Icountryco_33 |  -.3187897   .0332886    -9.58   0.000    -.3840905   -.2534889
  _Icountryco_34 |  -.1778477   .0444707    -4.00   0.000    -.2650839   -.0906114
  _Icountryco_35 |  -.2462563   .0159808   -15.41   0.000    -.2776052   -.2149074
  _Icountryco_36 |  -.1906779   .0198961    -9.58   0.000    -.2297073   -.1516485
  _Icountryco_37 |  -.2162425   .0214841   -10.07   0.000     -.258387   -.1740981
  _Icountryco_38 |   .1281706    .013886     9.23   0.000     .1009311    .1554102
  _Icountryco_39 |  -.2629848   .0403465    -6.52   0.000    -.3421307   -.1838389
  _Icountryco_40 |  -.3028297   .0541851    -5.59   0.000    -.4091223   -.1965371
  _Icountryco_41 |  -.1543142   .0196203    -7.87   0.000    -.1928025   -.1158258
  _Icountryco_42 |   .0035903   .0402108     0.09   0.929    -.0752895    .0824701
  _Icountryco_43 |  -.2166294   .0216102   -10.02   0.000    -.2590212   -.1742377
  _Icountryco_44 |  -.1264184   .0358878    -3.52   0.000    -.1968179   -.0560188
  _Icountryco_45 |  -.1401365   .0394072    -3.56   0.000    -.2174399   -.0628332
  _Icountryco_46 |  -.2559769   .0507087    -5.05   0.000    -.3554499   -.1565038
  _Icountryco_47 |   .1105949   .0242087     4.57   0.000     .0631057    .1580841
  _Icountryco_48 |  -.1177597   .0161063    -7.31   0.000    -.1493547   -.0861648
  _Icountryco_49 |  -.0644789   .0227691    -2.83   0.005     -.109144   -.0198138
  _Icountryco_50 |  -.2283671   .0310749    -7.35   0.000    -.2893254   -.1674089
  _Icountryco_51 |  -.1152907   .0277987    -4.15   0.000    -.1698222   -.0607591
  _Icountryco_52 |   -.290922    .082082    -3.54   0.000    -.4519386   -.1299054
  _Icountryco_53 |  -.2686938   .0550189    -4.88   0.000     -.376622   -.1607657
  _Icountryco_54 |  -.2028015   .0961091    -2.11   0.035    -.3913345   -.0142685
  _Icountryco_55 |  -.2935964   .0230781   -12.72   0.000    -.3388676   -.2483252
  _Icountryco_56 |  -.2497692   .0241853   -10.33   0.000    -.2972124    -.202326
  _Icountryco_57 |  -.2551641   .0310595    -8.22   0.000    -.3160921   -.1942361
  _Icountryco_58 |  -.1871794   .0248374    -7.54   0.000    -.2359018   -.1384569
  _Icountryco_59 |   .0141773   .0192614     0.74   0.462    -.0236069    .0519616
  _Icountryco_60 |  -.0036179   .0181841    -0.20   0.842    -.0392888     .032053
  _Icountryco_61 |   -.135042   .0179435    -7.53   0.000    -.1702411   -.0998429
  _Icountryco_62 |   .2180485   .0289521     7.53   0.000     .1612544    .2748425
  _Icountryco_63 |  -.1907654   .0197423    -9.66   0.000     -.229493   -.1520379
  _Icountryco_64 |  -.0121717   .0147466    -0.83   0.409    -.0410995    .0167562
           _cons |   .4577805   .2660976     1.72   0.086    -.0642115    .9797725
----------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. do Scripts/DataWrangle.do

. /*
> Author: Sam Lee
> 03.30.2024
> 
> This script takes in all of our data sets and merges them into one cleaned data set for data analysis
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //Load in suffrage data for each country to create instrument
. import delimited "Data/suffrage.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(14 vars, 21,366 obs)

. sort  countryn year

. 
. //We need to figure out the first year that each country granted women suffrage
. //NOTE: This excludes countries that don't give women suffrage (as of 2019): UAE, Saudi Arabia
. // bysort countryn : egen suffrage = max(female_suffrage)
. // keep if suffrage == 0
. // keep countryn suffrage
. // duplicates drop
. 
. keep if female_suffrage == 1
(10,477 observations deleted)

. //Find the first year where female_suffrage == 1
. bysort countryn : egen suffrage = min(year)

. keep countryn countrycode suffrage

. 
. duplicates drop

Duplicates in terms of all variables

(10,686 observations deleted)

. keep if length(countrycode) >= 1
(7 observations deleted)

. 
. keep countrycode suffrage

. //There are some countries that split due to civil wars and other historic events: i.e. Vietnam into 
> South Vietnam and North Vietnam;
. //Hence, these observations are given the same country code. We will keep the suffrage years of when 
> the 'original' country first gave women suffrage.
. //NOTE: This is actually irrelevant to our study because within the countries identified in the Harva
> rd dataverse data set, each country actually is given a unique country code and hence, we are able to
>  map it uniquely to our final data set.
. collapse (min) suffrage, by(countrycode)

. 
. save Data/suffrage.dta, replace
file Data/suffrage.dta saved

. 
. //Data for CO2 emissions across African and Arab countries over time (EDGAR - Emissions Database for 
> Global Atmospheric Research)
. import delimited "Data/emissions.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-9)
(13 vars, 3,498 obs)

. 
. //Response variable is totalco2cap - Total CO2 emissions per capita
. 
. keep region country countrycode year totalco2

. keep if year >= 1985 //this is the smallest year for which we have covariate data
(990 observations deleted)

. 
. rename totalco2 co2

. sort countrycode year

. 
. save Data/emissions.dta, replace
file Data/emissions.dta saved

. 
. //Data for women participation in national government over time (IPU DATA)
. import delimited "Data/IPU.csv", varnames(1) clear
(encoding automatically selected: UTF-8)
(11 vars, 57,148 obs)

. 
. //Clean the numeric variables
. drop lowerpercwomen

. drop upperpercwomen

. 
. local varlist lowerseats lowerwomen upperseats upperwomen

. 
. foreach var of local varlist {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9.]+$") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(361 missing values generated)
(1,470 missing values generated)
(34,664 missing values generated)
(35,227 missing values generated)

. 
. //There was a data entry error here
. replace lowerwomen = 1 if country == "Saint Vincent & the Grenadines" & ipuupdate == "2002-02-04"
(1 real change made)

. 
. //Clean the date columns
. gen ipuupdate_date = date(ipuupdate, "YMD")

. format ipuupdate_date %td

. drop ipuupdate

. rename ipuupdate_date ipuupdate

. 
. gen upperhousesenate_date = date(upperhousesenate, "MY") if upperhousesenate != "---"
(39,109 missing values generated)

. format upperhousesenate_date %td

. drop upperhousesenate

. rename upperhousesenate_date upperhousesenate

. 
. gen lowerelection_date = date(lowerelection, "DMY")
(50,393 missing values generated)

. gen lowerelection_m_date = date(lowerelection, "MY")
(7,342 missing values generated)

. replace lowerelection_date = lowerelection_m_date if lowerelection_date == .
(49,806 real changes made)

. format lowerelection_date %td

. drop lowerelection_m_date lowerelection

. rename lowerelection_date lowerelection

. 
. //This is the year we will group by
. //We want to know what the what the composition of the legislature is like at a specific year
. gen year = year(ipuupdate)

. keep if countrycode != ""
(1,911 observations deleted)

. 
. /*
> In order to match up with our other data,
> which only keeps track of emission or population data by the year for each country, we need the year 
> and country to uniquely identify the observation. Hence, we will select the earliest time in each set
>  of country, year groups to yield us data for women empowerment--although some countries have electio
> ns throughout the year.
> */
. local election_vars lowerwomen upperwomen lowerseats upperseats

. foreach var of local election_vars {
  2.         bysort country year : egen mean`var' = mean(`var')
  3. }
(384 missing values generated)
(33,108 missing values generated)
(170 missing values generated)
(32,869 missing values generated)

. //Treatment variable: Since some countries have multiple elections throughout the year, we are going 
> to standardize it in the sense that we are going to take the 'average' proportion of women representa
> tion (total number of women in power divided by the total number of seats in national legislature) th
> roughout the year
. gen womenrep = (cond(meanlowerwomen == ., 0, meanlowerwomen) +cond(meanupperwomen == ., 0, meanupperw
> omen))/(cond(meanlowerwomen == ., 0, meanlowerseats)+cond(meanupperwomen == ., 0, meanupperseats))
(315 missing values generated)

. 
. foreach var of local election_vars {
  2.         drop mean`var'
  3. }

. 
. keep countrycode year womenrep

. duplicates drop

Duplicates in terms of all variables

(50,093 observations deleted)

. 
. //Some countries in the IPU data set were recorded 'twice' in the sense whereonce was there tradition
> al election composition (baseline), and the other observation during the same year was a special case
>  where the president or some other organization appointed a group of extra delegates (consisting of w
> omen) that increased the women representation for that year/time period.
. //To account for this and to make it so each observation can be uniquely identified by year and count
> ry (time-subject identification), we will just combine the baseline compositions with the composition
> s where these unique cases occured by taking the mean of the women representation proportion
. 
. collapse (mean) womenrep, by(countrycode year)

. 
. sort countrycode year

. 
. save Data/IPU.dta, replace
file Data/IPU.dta saved

. 
. //Load is disasters data for placebo test
. import excel using "Data/disasters.xlsx", sheet("EM-DAT Data") firstrow clear
(46 vars, 2,405 obs)

. 
. //This includes things like epidemics and viral diseases, which may be influenced by the number of wo
> men in legislature if women enact specific policies that influence vaccines, health outcomes, the lik
> elihood of infections, etc.
. drop if DisasterSubgroup == "Biological"
(732 observations deleted)

. 
. rename StartYear year

. rename ISO countrycode

. 
. keep countrycode year

. 
. gen n_disasters = 1

. //The number of natural disasters that happened in each country during each year
. collapse (sum) n_disasters, by (countrycode year)

. 
. save Data/disasters.dta, replace
file Data/disasters.dta saved

. 
. //Covariate Data from the World Bank
. import delimited "Data/worldbank.csv", varnames(1) rowrange(1:652) clear
(encoding automatically selected: ISO-8859-1)
(42 vars, 651 obs)

. 
. drop seriesname

. 
. //Format the years as rows
. reshape long yr, i(countryname seriescode) j(year)
(j = 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 200
> 4 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              651   ->   24,738      
Number of variables                  41   ->   5           
j variable (38 values)                    ->   year
xij variables:
               yr1985 yr1986 ... yr2022   ->   yr
-----------------------------------------------------------------------------

. 
. //Put the metrics as columns
. rename yr value

. replace seriescode = "gdp" if seriescode == "NY.GDP.MKTP.CD"
(8,246 real changes made)

. replace seriescode = "gdppercapita" if seriescode == "NY.GDP.PCAP.CD"
(8,246 real changes made)

. replace seriescode = "population" if seriescode == "SP.POP.TOTL"
(8,246 real changes made)

. reshape wide value, i(countryname year) j(seriescode) string
(j = gdp gdppercapita population)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations           24,738   ->   8,246       
Number of variables                   5   ->   6           
j variable (3 values)        seriescode   ->   (dropped)
xij variables:
                                  value   ->   valuegdp valuegdppercapita valuepopulation
-----------------------------------------------------------------------------

. 
. rename valuegdp gdp

. rename valuegdppercapita gdppercapita

. rename valuepopulation population

. 
. //Clean numeric data
. local metrics gdp gdppercapita population

. foreach var of local metrics {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9]") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(815 missing values generated)
(811 missing values generated)
(5 missing values generated)

. 
. save Data/worldbank.dta, replace
file Data/worldbank.dta saved

. 
. //Merge the data sets
. 
. //Merge covariates with emissions data
. sort countrycode year

. merge 1:1 countrycode year using Data/emissions.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,738
        from master                     5,738  (_merge==1)
        from using                          0  (_merge==2)

    Matched                             2,508  (_merge==3)
    -----------------------------------------

. //All the country codes in the emissions data set match (which is what we want. The worldbank data al
> so includes data from countries outside of the regions of interest)
. keep if _merge == 3
(5,738 observations deleted)

. drop _merge

. 
. drop country //country name from emissions data set

. rename countryname country

. 
. merge 1:1 year countrycode using Data/IPU.dta
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,267
        from master                       848  (_merge==1)
        from using                      3,419  (_merge==2)

    Matched                             1,660  (_merge==3)
    -----------------------------------------

. 
. keep if _merge == 3 | _merge == 1
(3,419 observations deleted)

. drop _merge

. 
. sort countrycode year

. 
. //Join suffrage data and create instrument
. merge m:1 countrycode using Data/suffrage.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           202
        from master                        76  (_merge==1)
        from using                        126  (_merge==2)

    Matched                             2,432  (_merge==3)
    -----------------------------------------

. //These are countries that are not African or Arab
. drop if _merge == 2
(126 observations deleted)

. drop _merge

. 
. //Instrument: years from when country granted suffrage
. gen z = year - suffrage
(76 missing values generated)

. 
. drop if z == .
(76 observations deleted)

. //This drops Saudi Arabia and UAE:
. //Saudia Arabia only holds local elections (which women were enfranchised in 2015)
. //UAE doesn't grant universal suffrage for women (or anyone), and only recently held national electio
> ns in 2006, allowing a small number of voters to participate.
. 
. //NOTE: The womenrep data for years 1985-1996 will be missing for every country since that data wasn'
> t provided by the IPU. We keep these rows in here anyhow because we might want previous years to veri
> fy the parallel trends assumption and to use lags from other variables.
. save Data/womenrep.dta, replace
file Data/womenrep.dta saved

. export delimited using "Data/womenrep.csv", replace
file Data/womenrep.csv saved

. 
end of do-file

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create lags
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_1

. forvalues i = 1985/1998 {
  2.         drop _Iyear_`i'
  3. }

. // drop _Iyear_2022
. drop if womenrep_lag == .
(897 observations deleted)

. 
. //Two-stage diff-in-diff regression (Main regression to derive delta)
. drop _Iyear_2002 //(regression results are sensitive to omitted indicators)

. reg womenrep_lag z_lag lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,499
-------------+----------------------------------   F(95, 1403)     =     77.93
       Model |   14.591666        95  .153596484   Prob > F        =    0.0000
    Residual |  2.76526426     1,403  .001970965   R-squared       =    0.8407
-------------+----------------------------------   Adj R-squared   =    0.8299
       Total |  17.3569303     1,498  .011586736   Root MSE        =     .0444

----------------------------------------------------------------------------------
    womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
           z_lag |     .00336   .0021699     1.55   0.122    -.0008967    .0076167
       lgdp2_lag |   .0225212   .0081681     2.76   0.006     .0064982    .0385443
       lgdp3_lag |    -.00714   .0110674    -0.65   0.519    -.0288505    .0145705
       lgdp4_lag |   .0017338   .0108426     0.16   0.873    -.0195356    .0230033
       lgdp5_lag |    .007004   .0075865     0.92   0.356    -.0078781    .0218861
lpopulation2_lag |  -.3420979   .1276795    -2.68   0.007    -.5925611   -.0916346
lpopulation3_lag |   .3886089    .236357     1.64   0.100    -.0750424    .8522602
lpopulation4_lag |    -.08213   .2268873    -0.36   0.717    -.5272049    .3629448
lpopulation5_lag |  -.0227102   .1119356    -0.20   0.839    -.2422894     .196869
     _Iyear_1999 |  -.0032955   .0078863    -0.42   0.676    -.0187656    .0121747
     _Iyear_2000 |  -.0038744   .0073302    -0.53   0.597    -.0182538     .010505
     _Iyear_2001 |  -.0013222   .0076973    -0.17   0.864    -.0164217    .0137773
     _Iyear_2003 |   .0019018   .0096407     0.20   0.844      -.01701    .0208136
     _Iyear_2004 |   .0138345   .0111064     1.25   0.213    -.0079524    .0356214
     _Iyear_2005 |   .0214429   .0128434     1.67   0.095    -.0037514    .0466372
     _Iyear_2006 |   .0296018   .0146722     2.02   0.044       .00082    .0583836
     _Iyear_2007 |   .0346632    .016612     2.09   0.037     .0020761    .0672502
     _Iyear_2008 |   .0350316   .0185601     1.89   0.059     -.001377    .0714402
     _Iyear_2009 |   .0323745   .0205616     1.57   0.116    -.0079604    .0727093
     _Iyear_2010 |   .0318638   .0226505     1.41   0.160    -.0125686    .0762962
     _Iyear_2011 |   .0341988   .0246807     1.39   0.166    -.0142163    .0826138
     _Iyear_2012 |    .035691   .0265857     1.34   0.180    -.0164609     .087843
     _Iyear_2013 |   .0381355      .0288     1.32   0.186    -.0183602    .0946313
     _Iyear_2014 |   .0445221   .0308451     1.44   0.149    -.0159853    .1050295
     _Iyear_2015 |   .0501778   .0328917     1.53   0.127    -.0143445       .1147
     _Iyear_2016 |   .0486973   .0349825     1.39   0.164    -.0199264    .1173209
     _Iyear_2017 |   .0499106   .0370141     1.35   0.178    -.0226982    .1225195
     _Iyear_2018 |   .0476166   .0389919     1.22   0.222    -.0288721    .1241052
     _Iyear_2019 |   .0465536   .0412066     1.13   0.259    -.0342795    .1273867
     _Iyear_2020 |   .0464434   .0433559     1.07   0.284     -.038606    .1314928
     _Iyear_2021 |   .0512552   .0454617     1.13   0.260     -.037925    .1404353
     _Iyear_2022 |   .0542303   .0474742     1.14   0.254    -.0388978    .1473583
   _Icountryco_2 |   .0069124   .0371748     0.19   0.853    -.0660118    .0798365
   _Icountryco_3 |  -.2410185   .0397627    -6.06   0.000    -.3190193   -.1630177
   _Icountryco_4 |  -.1629955   .0364428    -4.47   0.000    -.2344837   -.0915074
   _Icountryco_5 |  -.2005151   .0752714    -2.66   0.008    -.3481716   -.0528586
   _Icountryco_6 |  -.2851167   .0501634    -5.68   0.000    -.3835201   -.1867134
   _Icountryco_7 |   -.234021   .0466861    -5.01   0.000     -.325603   -.1424389
   _Icountryco_8 |   -.213074   .0351176    -6.07   0.000    -.2819627   -.1441853
   _Icountryco_9 |  -.1425957   .0352965    -4.04   0.000    -.2118354   -.0733561
  _Icountryco_10 |  -.1022105      .0286    -3.57   0.000    -.1583139   -.0461072
  _Icountryco_11 |  -.1820431   .0480443    -3.79   0.000    -.2762896   -.0877967
  _Icountryco_12 |  -.3373027   .0606842    -5.56   0.000    -.4563442   -.2182611
  _Icountryco_13 |  -.2182746   .0649237    -3.36   0.001    -.3456326   -.0909166
  _Icountryco_14 |  -.2383262   .0547312    -4.35   0.000      -.34569   -.1309623
  _Icountryco_15 |   -.176688   .0307841    -5.74   0.000    -.2370758   -.1163002
  _Icountryco_16 |  -.2058908   .0456732    -4.51   0.000    -.2954859   -.1162957
  _Icountryco_17 |  -.0039758   .0487799    -0.08   0.935    -.0996653    .0917137
  _Icountryco_18 |  -.0240626   .0491127    -0.49   0.624    -.1204048    .0722797
  _Icountryco_19 |  -.2853183   .0612704    -4.66   0.000    -.4055097   -.1651269
  _Icountryco_20 |  -.1934287   .0409212    -4.73   0.000     -.273702   -.1131553
  _Icountryco_21 |  -.1447628       .043    -3.37   0.001    -.2291141   -.0604115
  _Icountryco_22 |  -.2690015   .0508256    -5.29   0.000    -.3687039   -.1692992
  _Icountryco_23 |  -.2015684   .0459558    -4.39   0.000    -.2917178    -.111419
  _Icountryco_24 |  -.2789761   .0592406    -4.71   0.000    -.3951857   -.1627665
  _Icountryco_25 |  -.1796031    .026449    -6.79   0.000    -.2314869   -.1277193
  _Icountryco_26 |  -.1074264   .0385966    -2.78   0.005    -.1831397   -.0317131
  _Icountryco_27 |  -.2677855   .0676706    -3.96   0.000    -.4005319    -.135039
  _Icountryco_28 |  -.2206786   .0243814    -9.05   0.000    -.2685065   -.1728508
  _Icountryco_29 |  -.1397732   .0296033    -4.72   0.000    -.1978447   -.0817016
  _Icountryco_30 |  -.2650971   .0747573    -3.55   0.000    -.4117453   -.1184489
  _Icountryco_31 |  -.3820616   .0612396    -6.24   0.000    -.5021927   -.2619305
  _Icountryco_32 |  -.2807615   .0724539    -3.88   0.000    -.4228912   -.1386319
  _Icountryco_33 |  -.2869259   .0414237    -6.93   0.000    -.3681849   -.2056669
  _Icountryco_34 |  -.1539498   .0479178    -3.21   0.001    -.2479481   -.0599516
  _Icountryco_35 |  -.2117372   .0306599    -6.91   0.000    -.2718813   -.1515931
  _Icountryco_36 |  -.1508482   .0355421    -4.24   0.000    -.2205696   -.0811267
  _Icountryco_37 |  -.1764128   .0365952    -4.82   0.000       -.2482   -.1046256
  _Icountryco_38 |   .1281706    .013886     9.23   0.000     .1009311    .1554102
  _Icountryco_39 |   -.223155   .0503019    -4.44   0.000    -.3218301     -.12448
  _Icountryco_40 |  -.2842425   .0561528    -5.06   0.000    -.3943951   -.1740899
  _Icountryco_41 |  -.1251057   .0291217    -4.30   0.000    -.1822326   -.0679789
  _Icountryco_42 |  -.0362394    .049973    -0.73   0.468    -.1342692    .0617903
  _Icountryco_43 |  -.1767997   .0365348    -4.84   0.000    -.2484684    -.105131
  _Icountryco_44 |   -.131729   .0361241    -3.65   0.000    -.2025921    -.060866
  _Icountryco_45 |  -.2144854    .067899    -3.16   0.002    -.3476799   -.0812909
  _Icountryco_46 |  -.3303257   .0745857    -4.43   0.000    -.4766371   -.1840142
  _Icountryco_47 |    .145114   .0352371     4.12   0.000     .0759908    .2142371
  _Icountryco_48 |  -.0885513   .0271777    -3.26   0.001    -.1418645    -.035238
  _Icountryco_49 |  -.0246492   .0375844    -0.66   0.512    -.0983768    .0490785
  _Icountryco_50 |  -.1911927   .0414801    -4.61   0.000    -.2725625    -.109823
  _Icountryco_51 |  -.0860822   .0351635    -2.45   0.014     -.155061   -.0171034
  _Icountryco_52 |   -.290922    .082082    -3.54   0.000    -.4519386   -.1299054
  _Icountryco_53 |  -.2501066   .0568699    -4.40   0.000    -.3616659   -.1385474
  _Icountryco_54 |  -.2054568   .0961072    -2.14   0.033    -.3939861   -.0169275
  _Icountryco_55 |  -.2351794   .0499136    -4.71   0.000    -.3330927   -.1372662
  _Icountryco_56 |  -.2099395   .0382513    -5.49   0.000    -.2849754   -.1349035
  _Icountryco_57 |  -.2153344   .0429686    -5.01   0.000    -.2996241   -.1310447
  _Icountryco_58 |  -.1446943   .0407848    -3.55   0.000    -.2247001   -.0646885
  _Icountryco_59 |   .0460411   .0304542     1.51   0.131    -.0136996    .1057819
  _Icountryco_60 |   .0309012   .0313388     0.99   0.324    -.0305748    .0923771
  _Icountryco_61 |  -.1748717   .0353986    -4.94   0.000    -.2443116   -.1054318
  _Icountryco_62 |   .1675975   .0476016     3.52   0.000     .0742195    .2609754
  _Icountryco_63 |   -.161557   .0294097    -5.49   0.000    -.2192487   -.1038652
  _Icountryco_64 |  -.0227929   .0169438    -1.35   0.179    -.0560308     .010445
           _cons |   .5161975   .2705331     1.91   0.057    -.0144956     1.04689
----------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //clean and load in the data for analysis
. do Scripts/DataWrangle.do

. /*
> Author: Sam Lee
> 03.30.2024
> 
> This script takes in all of our data sets and merges them into one cleaned data set for data analysis
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //Load in suffrage data for each country to create instrument
. import delimited "Data/suffrage.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(14 vars, 21,366 obs)

. sort  countryn year

. 
. //We need to figure out the first year that each country granted women suffrage
. //NOTE: This excludes countries that don't give women suffrage (as of 2019): UAE, Saudi Arabia
. // bysort countryn : egen suffrage = max(female_suffrage)
. // keep if suffrage == 0
. // keep countryn suffrage
. // duplicates drop
. 
. keep if female_suffrage == 1
(10,477 observations deleted)

. //Find the first year where female_suffrage == 1
. bysort countryn : egen suffrage = min(year)

. keep countryn countrycode suffrage

. 
. duplicates drop

Duplicates in terms of all variables

(10,686 observations deleted)

. keep if length(countrycode) >= 1
(7 observations deleted)

. 
. keep countrycode suffrage

. //There are some countries that split due to civil wars and other historic events: i.e. Vietnam into 
> South Vietnam and North Vietnam;
. //Hence, these observations are given the same country code. We will keep the suffrage years of when 
> the 'original' country first gave women suffrage.
. //NOTE: This is actually irrelevant to our study because within the countries identified in the Harva
> rd dataverse data set, each country actually is given a unique country code and hence, we are able to
>  map it uniquely to our final data set.
. collapse (min) suffrage, by(countrycode)

. 
. save Data/suffrage.dta, replace
file Data/suffrage.dta saved

. 
. //Data for CO2 emissions across African and Arab countries over time (EDGAR - Emissions Database for 
> Global Atmospheric Research)
. import delimited "Data/emissions.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-9)
(13 vars, 3,498 obs)

. 
. //Response variable is totalco2cap - Total CO2 emissions per capita
. 
. keep region country countrycode year totalco2

. keep if year >= 1985 //this is the smallest year for which we have covariate data
(990 observations deleted)

. 
. rename totalco2 co2

. sort countrycode year

. 
. save Data/emissions.dta, replace
file Data/emissions.dta saved

. 
. //Data for women participation in national government over time (IPU DATA)
. import delimited "Data/IPU.csv", varnames(1) clear
(encoding automatically selected: UTF-8)
(11 vars, 57,148 obs)

. 
. //Clean the numeric variables
. drop lowerpercwomen

. drop upperpercwomen

. 
. local varlist lowerseats lowerwomen upperseats upperwomen

. 
. foreach var of local varlist {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9.]+$") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(361 missing values generated)
(1,470 missing values generated)
(34,664 missing values generated)
(35,227 missing values generated)

. 
. //There was a data entry error here
. replace lowerwomen = 1 if country == "Saint Vincent & the Grenadines" & ipuupdate == "2002-02-04"
(1 real change made)

. 
. //Clean the date columns
. gen ipuupdate_date = date(ipuupdate, "YMD")

. format ipuupdate_date %td

. drop ipuupdate

. rename ipuupdate_date ipuupdate

. 
. gen upperhousesenate_date = date(upperhousesenate, "MY") if upperhousesenate != "---"
(39,109 missing values generated)

. format upperhousesenate_date %td

. drop upperhousesenate

. rename upperhousesenate_date upperhousesenate

. 
. gen lowerelection_date = date(lowerelection, "DMY")
(50,393 missing values generated)

. gen lowerelection_m_date = date(lowerelection, "MY")
(7,342 missing values generated)

. replace lowerelection_date = lowerelection_m_date if lowerelection_date == .
(49,806 real changes made)

. format lowerelection_date %td

. drop lowerelection_m_date lowerelection

. rename lowerelection_date lowerelection

. 
. //This is the year we will group by
. //We want to know what the what the composition of the legislature is like at a specific year
. gen year = year(ipuupdate)

. keep if countrycode != ""
(1,911 observations deleted)

. 
. /*
> In order to match up with our other data,
> which only keeps track of emission or population data by the year for each country, we need the year 
> and country to uniquely identify the observation. Hence, we will select the earliest time in each set
>  of country, year groups to yield us data for women empowerment--although some countries have electio
> ns throughout the year.
> */
. local election_vars lowerwomen upperwomen lowerseats upperseats

. foreach var of local election_vars {
  2.         bysort country year : egen mean`var' = mean(`var')
  3. }
(384 missing values generated)
(33,108 missing values generated)
(170 missing values generated)
(32,869 missing values generated)

. //Treatment variable: Since some countries have multiple elections throughout the year, we are going 
> to standardize it in the sense that we are going to take the 'average' proportion of women representa
> tion (total number of women in power divided by the total number of seats in national legislature) th
> roughout the year
. gen womenrep = (cond(meanlowerwomen == ., 0, meanlowerwomen) +cond(meanupperwomen == ., 0, meanupperw
> omen))/(cond(meanlowerwomen == ., 0, meanlowerseats)+cond(meanupperwomen == ., 0, meanupperseats))
(315 missing values generated)

. 
. foreach var of local election_vars {
  2.         drop mean`var'
  3. }

. 
. keep countrycode year womenrep

. duplicates drop

Duplicates in terms of all variables

(50,093 observations deleted)

. 
. //Some countries in the IPU data set were recorded 'twice' in the sense whereonce was there tradition
> al election composition (baseline), and the other observation during the same year was a special case
>  where the president or some other organization appointed a group of extra delegates (consisting of w
> omen) that increased the women representation for that year/time period.
. //To account for this and to make it so each observation can be uniquely identified by year and count
> ry (time-subject identification), we will just combine the baseline compositions with the composition
> s where these unique cases occured by taking the mean of the women representation proportion
. 
. collapse (mean) womenrep, by(countrycode year)

. 
. sort countrycode year

. 
. save Data/IPU.dta, replace
file Data/IPU.dta saved

. 
. //Load is disasters data for placebo test
. import excel using "Data/disasters.xlsx", sheet("EM-DAT Data") firstrow clear
(46 vars, 2,405 obs)

. 
. //This includes things like epidemics and viral diseases, which may be influenced by the number of wo
> men in legislature if women enact specific policies that influence vaccines, health outcomes, the lik
> elihood of infections, etc.
. drop if DisasterSubgroup == "Biological"
(732 observations deleted)

. 
. rename StartYear year

. rename ISO countrycode

. 
. keep countrycode year

. 
. gen n_disasters = 1

. //The number of natural disasters that happened in each country during each year
. collapse (sum) n_disasters, by (countrycode year)

. 
. save Data/disasters.dta, replace
file Data/disasters.dta saved

. 
. //Covariate Data from the World Bank
. import delimited "Data/worldbank.csv", varnames(1) rowrange(1:652) clear
(encoding automatically selected: ISO-8859-1)
(42 vars, 651 obs)

. 
. drop seriesname

. 
. //Format the years as rows
. reshape long yr, i(countryname seriescode) j(year)
(j = 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 200
> 4 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              651   ->   24,738      
Number of variables                  41   ->   5           
j variable (38 values)                    ->   year
xij variables:
               yr1985 yr1986 ... yr2022   ->   yr
-----------------------------------------------------------------------------

. 
. //Put the metrics as columns
. rename yr value

. replace seriescode = "gdp" if seriescode == "NY.GDP.MKTP.CD"
(8,246 real changes made)

. replace seriescode = "gdppercapita" if seriescode == "NY.GDP.PCAP.CD"
(8,246 real changes made)

. replace seriescode = "population" if seriescode == "SP.POP.TOTL"
(8,246 real changes made)

. reshape wide value, i(countryname year) j(seriescode) string
(j = gdp gdppercapita population)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations           24,738   ->   8,246       
Number of variables                   5   ->   6           
j variable (3 values)        seriescode   ->   (dropped)
xij variables:
                                  value   ->   valuegdp valuegdppercapita valuepopulation
-----------------------------------------------------------------------------

. 
. rename valuegdp gdp

. rename valuegdppercapita gdppercapita

. rename valuepopulation population

. 
. //Clean numeric data
. local metrics gdp gdppercapita population

. foreach var of local metrics {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9]") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(815 missing values generated)
(811 missing values generated)
(5 missing values generated)

. 
. save Data/worldbank.dta, replace
file Data/worldbank.dta saved

. 
. //Merge the data sets
. 
. //Merge covariates with emissions data
. sort countrycode year

. merge 1:1 countrycode year using Data/emissions.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,738
        from master                     5,738  (_merge==1)
        from using                          0  (_merge==2)

    Matched                             2,508  (_merge==3)
    -----------------------------------------

. //All the country codes in the emissions data set match (which is what we want. The worldbank data al
> so includes data from countries outside of the regions of interest)
. keep if _merge == 3
(5,738 observations deleted)

. drop _merge

. 
. drop country //country name from emissions data set

. rename countryname country

. 
. merge 1:1 year countrycode using Data/IPU.dta
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,267
        from master                       848  (_merge==1)
        from using                      3,419  (_merge==2)

    Matched                             1,660  (_merge==3)
    -----------------------------------------

. 
. keep if _merge == 3 | _merge == 1
(3,419 observations deleted)

. drop _merge

. 
. sort countrycode year

. 
. //Join suffrage data and create instrument
. merge m:1 countrycode using Data/suffrage.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           202
        from master                        76  (_merge==1)
        from using                        126  (_merge==2)

    Matched                             2,432  (_merge==3)
    -----------------------------------------

. //These are countries that are not African or Arab
. drop if _merge == 2
(126 observations deleted)

. drop _merge

. 
. //Instrument: years from when country granted suffrage
. gen z = year - suffrage
(76 missing values generated)

. 
. drop if z == .
(76 observations deleted)

. //This drops Saudi Arabia and UAE:
. //Saudia Arabia only holds local elections (which women were enfranchised in 2015)
. //UAE doesn't grant universal suffrage for women (or anyone), and only recently held national electio
> ns in 2006, allowing a small number of voters to participate.
. 
. //NOTE: The womenrep data for years 1985-1996 will be missing for every country since that data wasn'
> t provided by the IPU. We keep these rows in here anyhow because we might want previous years to veri
> fy the parallel trends assumption and to use lags from other variables.
. save Data/womenrep.dta, replace
file Data/womenrep.dta saved

. export delimited using "Data/womenrep.csv", replace
file Data/womenrep.csv saved

. 
end of do-file

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create lags
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_1

. forvalues i = 1985/1998 {
  2.         drop _Iyear_`i'
  3. }

. // drop _Iyear_2022
. drop if womenrep_lag == .
(897 observations deleted)

. 
. //Two-stage diff-in-diff regression (Main regression to derive delta)
. drop _Iyear_2022 //(regression results are sensitive to omitted indicators)

. reg womenrep_lag z_lag lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,499
-------------+----------------------------------   F(95, 1403)     =     77.93
       Model |   14.591666        95  .153596484   Prob > F        =    0.0000
    Residual |  2.76526426     1,403  .001970965   R-squared       =    0.8407
-------------+----------------------------------   Adj R-squared   =    0.8299
       Total |  17.3569303     1,498  .011586736   Root MSE        =     .0444

----------------------------------------------------------------------------------
    womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
           z_lag |   .0056196   .0005328    10.55   0.000     .0045744    .0066648
       lgdp2_lag |   .0225212   .0081681     2.76   0.006     .0064982    .0385443
       lgdp3_lag |    -.00714   .0110674    -0.65   0.519    -.0288505    .0145705
       lgdp4_lag |   .0017338   .0108426     0.16   0.873    -.0195356    .0230033
       lgdp5_lag |    .007004   .0075865     0.92   0.356    -.0078781    .0218861
lpopulation2_lag |  -.3420979   .1276795    -2.68   0.007    -.5925611   -.0916346
lpopulation3_lag |   .3886089    .236357     1.64   0.100    -.0750424    .8522602
lpopulation4_lag |    -.08213   .2268873    -0.36   0.717    -.5272049    .3629448
lpopulation5_lag |  -.0227102   .1119356    -0.20   0.839    -.2422894     .196869
     _Iyear_1999 |   -.005555   .0085764    -0.65   0.517    -.0223789    .0112689
     _Iyear_2000 |  -.0083936   .0082188    -1.02   0.307     -.024516    .0077288
     _Iyear_2001 |   -.008101   .0081933    -0.99   0.323    -.0241734    .0079714
     _Iyear_2002 |  -.0090384   .0079124    -1.14   0.254    -.0245597     .006483
     _Iyear_2003 |  -.0093962   .0077783    -1.21   0.227    -.0246545    .0058621
     _Iyear_2004 |   .0002769   .0076762     0.04   0.971    -.0147812     .015335
     _Iyear_2005 |   .0056257    .007523     0.75   0.455    -.0091318    .0203832
     _Iyear_2006 |    .011525   .0073224     1.57   0.116    -.0028389     .025889
     _Iyear_2007 |   .0143268   .0072742     1.97   0.049     .0000573    .0285963
     _Iyear_2008 |   .0124357   .0072448     1.72   0.086    -.0017762    .0266475
     _Iyear_2009 |   .0075189   .0072338     1.04   0.299    -.0066712    .0217091
     _Iyear_2010 |   .0047486   .0073432     0.65   0.518    -.0096563    .0191536
     _Iyear_2011 |   .0048241   .0072395     0.67   0.505    -.0093773    .0190254
     _Iyear_2012 |   .0040567   .0073356     0.55   0.580    -.0103332    .0184466
     _Iyear_2013 |   .0042416   .0073404     0.58   0.563    -.0101577    .0186409
     _Iyear_2014 |   .0083686   .0073544     1.14   0.255    -.0060583    .0227955
     _Iyear_2015 |   .0117647   .0074434     1.58   0.114    -.0028367     .026366
     _Iyear_2016 |   .0080245   .0074969     1.07   0.285    -.0066819     .022731
     _Iyear_2017 |   .0069783   .0074382     0.94   0.348    -.0076128    .0215694
     _Iyear_2018 |   .0024247   .0075296     0.32   0.747    -.0123458    .0171952
     _Iyear_2019 |  -.0008978   .0077363    -0.12   0.908    -.0160737     .014278
     _Iyear_2020 |  -.0032676   .0077873    -0.42   0.675    -.0185437    .0120084
     _Iyear_2021 |  -.0007155   .0079318    -0.09   0.928     -.016275     .014844
   _Icountryco_2 |  -.0224624   .0255753    -0.88   0.380    -.0726324    .0277076
   _Icountryco_3 |  -.2749124   .0244854   -11.23   0.000    -.3229443   -.2268806
   _Icountryco_4 |  -.1968894   .0186843   -10.54   0.000    -.2335417   -.1602372
   _Icountryco_5 |   -.139506   .0494585    -2.82   0.005    -.2365265   -.0424855
   _Icountryco_6 |  -.3054531   .0464778    -6.57   0.000    -.3966266   -.2142796
   _Icountryco_7 |  -.2679149   .0348052    -7.70   0.000    -.3361908    -.199639
   _Icountryco_8 |  -.2469679    .015489   -15.94   0.000    -.2773521   -.2165838
   _Icountryco_9 |  -.1764897   .0159998   -11.03   0.000    -.2078757   -.1451036
  _Icountryco_10 |  -.1202873   .0232837    -5.17   0.000    -.1659618   -.0746128
  _Icountryco_11 |  -.2159371   .0363742    -5.94   0.000    -.2872908   -.1445834
  _Icountryco_12 |  -.3373027   .0606842    -5.56   0.000    -.4563442   -.2182611
  _Icountryco_13 |  -.2182746   .0649237    -3.36   0.001    -.3456326   -.0909166
  _Icountryco_14 |   -.233807   .0545401    -4.29   0.000     -.340796    -.126818
  _Icountryco_15 |  -.2060627   .0138328   -14.90   0.000    -.2331979   -.1789276
  _Icountryco_16 |  -.2488231   .0218374   -11.39   0.000    -.2916606   -.2059855
  _Icountryco_17 |   .0366969   .0302287     1.21   0.225    -.0226014    .0959953
  _Icountryco_18 |  -.0692545   .0256407    -2.70   0.007    -.1195526   -.0189563
  _Icountryco_19 |  -.3192122   .0525472    -6.07   0.000    -.4222917   -.2161328
  _Icountryco_20 |  -.2341014   .0157715   -14.84   0.000    -.2650396   -.2031631
  _Icountryco_21 |  -.1831759   .0242857    -7.54   0.000    -.2308161   -.1355357
  _Icountryco_22 |  -.2915975   .0464755    -6.27   0.000    -.3827664   -.2004286
  _Icountryco_23 |   -.203828   .0459311    -4.44   0.000     -.293929    -.113727
  _Icountryco_24 |  -.2947933   .0574025    -5.14   0.000    -.4073972   -.1821893
  _Icountryco_25 |  -.1705647   .0251595    -6.78   0.000     -.219919   -.1212104
  _Icountryco_26 |  -.1458395   .0141859   -10.28   0.000    -.1736673   -.1180116
  _Icountryco_27 |  -.3287945   .0359524    -9.15   0.000    -.3993208   -.2582682
  _Icountryco_28 |  -.2229382   .0242949    -9.18   0.000    -.2705964     -.17528
  _Icountryco_29 |  -.1668883   .0155716   -10.72   0.000    -.1974345   -.1363422
  _Icountryco_30 |  -.1950497   .0370383    -5.27   0.000    -.2677062   -.1223932
  _Icountryco_31 |  -.4340323   .0374552   -11.59   0.000    -.5075065   -.3605581
  _Icountryco_32 |  -.3440302   .0428608    -8.03   0.000    -.4281084    -.259952
  _Icountryco_33 |  -.3140411   .0327589    -9.59   0.000    -.3783027   -.2497794
  _Icountryco_34 |  -.1742862   .0441788    -3.95   0.000    -.2609498   -.0876226
  _Icountryco_35 |  -.2411119    .013657   -17.65   0.000    -.2679024   -.2143215
  _Icountryco_36 |  -.1847421   .0168981   -10.93   0.000    -.2178903   -.1515939
  _Icountryco_37 |  -.2103067   .0189632   -11.09   0.000    -.2475059   -.1731075
  _Icountryco_38 |   .1281706    .013886     9.23   0.000     .1009311    .1554102
  _Icountryco_39 |  -.2570489   .0393885    -6.53   0.000    -.3343155   -.1797823
  _Icountryco_40 |  -.3000597   .0541977    -5.54   0.000    -.4063768   -.1937425
  _Icountryco_41 |  -.1499613   .0180471    -8.31   0.000    -.1853635    -.114559
  _Icountryco_42 |  -.0023455    .038665    -0.06   0.952     -.078193     .073502
  _Icountryco_43 |  -.2106936   .0189616   -11.11   0.000    -.2478898   -.1734974
  _Icountryco_44 |  -.1272098   .0359151    -3.54   0.000     -.197663   -.0567567
  _Icountryco_45 |  -.1512167   .0340028    -4.45   0.000    -.2179185   -.0845149
  _Icountryco_46 |   -.267057   .0460793    -5.80   0.000    -.3574487   -.1766654
  _Icountryco_47 |   .1157392   .0225637     5.13   0.000     .0714769    .1600015
  _Icountryco_48 |  -.1134068   .0142235    -7.97   0.000    -.1413084   -.0855052
  _Icountryco_49 |  -.0585431   .0206552    -2.83   0.005    -.0990616   -.0180246
  _Icountryco_50 |   -.222827   .0296446    -7.52   0.000    -.2809796   -.1646745
  _Icountryco_51 |  -.1109377   .0268593    -4.13   0.000    -.1636264   -.0582491
  _Icountryco_52 |   -.290922    .082082    -3.54   0.000    -.4519386   -.1299054
  _Icountryco_53 |  -.2659238   .0549867    -4.84   0.000    -.3737887   -.1580589
  _Icountryco_54 |  -.2031972   .0960795    -2.11   0.035    -.3916721   -.0147223
  _Icountryco_55 |  -.2848905   .0185447   -15.36   0.000    -.3212688   -.2485122
  _Icountryco_56 |  -.2438334   .0220486   -11.06   0.000    -.2870851   -.2005817
  _Icountryco_57 |  -.2492283   .0295288    -8.44   0.000    -.3071538   -.1913029
  _Icountryco_58 |  -.1808478   .0229795    -7.87   0.000    -.2259257   -.1357699
  _Icountryco_59 |    .018926   .0172185     1.10   0.272    -.0148507    .0527027
  _Icountryco_60 |   .0015264   .0156578     0.10   0.922    -.0291888    .0322417
  _Icountryco_61 |  -.1409778   .0157567    -8.95   0.000    -.1718871   -.1100686
  _Icountryco_62 |   .2105298    .026294     8.01   0.000     .1589499    .2621096
  _Icountryco_63 |  -.1864125   .0183896   -10.14   0.000    -.2224866   -.1503384
  _Icountryco_64 |  -.0137545   .0145964    -0.94   0.346    -.0423877    .0148787
           _cons |   .4664864   .2653926     1.76   0.079    -.0541227    .9870954
----------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1998 _Iyear_1997

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters lgdp* lpopulation* _Iyear* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =   .2360028  
Iteration 2:  GMM criterion Q(b) =  .02004983  
Iteration 3:  GMM criterion Q(b) =  .01343638  
Iteration 4:  GMM criterion Q(b) =  .01206991  
Iteration 5:  GMM criterion Q(b) =  .01140278  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00172684  
Iteration 7:  GMM criterion Q(b) =  .00156577  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00046609  
Iteration 9:  GMM criterion Q(b) =   .0001983  (not concave)
Iteration 10: GMM criterion Q(b) =  .00011594  (not concave)
Iteration 11: GMM criterion Q(b) =  .00009277  
Iteration 12: GMM criterion Q(b) =  4.181e-06  
Iteration 13: GMM criterion Q(b) =  1.319e-07  (not concave)
Iteration 14: GMM criterion Q(b) =  1.139e-07  (not concave)
Iteration 15: GMM criterion Q(b) =  8.456e-08  (not concave)
Iteration 16: GMM criterion Q(b) =  7.945e-08  (not concave)
Iteration 17: GMM criterion Q(b) =  7.809e-08  (not concave)
Iteration 18: GMM criterion Q(b) =  7.794e-08  (not concave)
Iteration 19: GMM criterion Q(b) =  7.789e-08  (not concave)
Iteration 20: GMM criterion Q(b) =  7.784e-08  (not concave)
Iteration 21: GMM criterion Q(b) =  7.748e-08  (not concave)
Iteration 22: GMM criterion Q(b) =  7.733e-08  

Step 2
Iteration 0:  GMM criterion Q(b) =  .03062549  
Iteration 1:  GMM criterion Q(b) =  9.953e-07  (not concave)
Iteration 2:  GMM criterion Q(b) =  3.377e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  3.034e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  2.978e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  2.959e-07  (not concave)
Iteration 6:  GMM criterion Q(b) =  2.944e-07  (not concave)
Iteration 7:  GMM criterion Q(b) =  2.931e-07  (not concave)
Iteration 8:  GMM criterion Q(b) =  2.921e-07  (not concave)
Iteration 9:  GMM criterion Q(b) =  2.910e-07  (not concave)
Iteration 10: GMM criterion Q(b) =  2.901e-07  (not concave)
Iteration 11: GMM criterion Q(b) =  2.892e-07  (not concave)
Iteration 12: GMM criterion Q(b) =  2.884e-07  (not concave)
Iteration 13: GMM criterion Q(b) =  2.876e-07  (not concave)
Iteration 14: GMM criterion Q(b) =  2.875e-07  (not concave)
Iteration 15: GMM criterion Q(b) =  2.770e-07  (not concave)
Iteration 16: GMM criterion Q(b) =    -1.#IND  (backed up)
Hessian is not positive semidefinite
r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters lgdp* lpopulation* _Iyear* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =   .2360028  
Iteration 2:  GMM criterion Q(b) =  .02004983  
Iteration 3:  GMM criterion Q(b) =  .01343638  
Iteration 4:  GMM criterion Q(b) =  .01206991  
Iteration 5:  GMM criterion Q(b) =  .01140278  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00172684  
Iteration 7:  GMM criterion Q(b) =  .00156577  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00046609  
Iteration 9:  GMM criterion Q(b) =   .0001983  (not concave)
Iteration 10: GMM criterion Q(b) =  .00011594  (not concave)
Iteration 11: GMM criterion Q(b) =  .00009277  
Iteration 12: GMM criterion Q(b) =  4.181e-06  
Iteration 13: GMM criterion Q(b) =  1.319e-07  (not concave)
Iteration 14: GMM criterion Q(b) =  1.139e-07  (not concave)
Iteration 15: GMM criterion Q(b) =  8.456e-08  (not concave)
Iteration 16: GMM criterion Q(b) =  7.945e-08  (not concave)
Iteration 17: GMM criterion Q(b) =  7.809e-08  (not concave)
Iteration 18: GMM criterion Q(b) =  7.794e-08  (not concave)
Iteration 19: GMM criterion Q(b) =  7.789e-08  (not concave)
Iteration 20: GMM criterion Q(b) =  7.784e-08  (not concave)
Iteration 21: GMM criterion Q(b) =  7.748e-08  (not concave)
Iteration 22: GMM criterion Q(b) =  7.733e-08  

Step 2
Iteration 0:  GMM criterion Q(b) =  .03062549  
Iteration 1:  GMM criterion Q(b) =  9.953e-07  (not concave)
Iteration 2:  GMM criterion Q(b) =  3.377e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  3.034e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  2.978e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  2.959e-07  (not concave)
Iteration 6:  GMM criterion Q(b) =  2.944e-07  (not concave)
Iteration 7:  GMM criterion Q(b) =  2.931e-07  (not concave)
Iteration 8:  GMM criterion Q(b) =  2.921e-07  (not concave)
Iteration 9:  GMM criterion Q(b) =  2.910e-07  (not concave)
Iteration 10: GMM criterion Q(b) =  2.901e-07  (not concave)
Iteration 11: GMM criterion Q(b) =  2.892e-07  (not concave)
Iteration 12: GMM criterion Q(b) =  2.884e-07  (not concave)
Iteration 13: GMM criterion Q(b) =  2.876e-07  (not concave)
Iteration 14: GMM criterion Q(b) =  2.875e-07  (not concave)
Iteration 15: GMM criterion Q(b) =  2.770e-07  (not concave)
Iteration 16: GMM criterion Q(b) =    -1.#IND  (backed up)
Hessian is not positive semidefinite
r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters _Iyear* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0552212  
Iteration 1:  GMM criterion Q(b) =   .2347827  
Iteration 2:  GMM criterion Q(b) =  .01143261  
Iteration 3:  GMM criterion Q(b) =  .00077112  
Iteration 4:  GMM criterion Q(b) =  .00004648  
Iteration 5:  GMM criterion Q(b) =  2.252e-06  
Iteration 6:  GMM criterion Q(b) =  7.998e-08  (not concave)
Iteration 7:  GMM criterion Q(b) =  1.658e-08  (not concave)
Iteration 8:  GMM criterion Q(b) =  9.211e-09  (not concave)
Iteration 9:  GMM criterion Q(b) =  8.475e-09  (not concave)
Iteration 10: GMM criterion Q(b) =  8.405e-09  (not concave)
Iteration 11: GMM criterion Q(b) =  8.394e-09  (not concave)
Iteration 12: GMM criterion Q(b) =  8.393e-09  (not concave)
Iteration 13: GMM criterion Q(b) =  8.392e-09  (not concave)
Iteration 14: GMM criterion Q(b) =  8.392e-09  (not concave)
Iteration 15: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 16: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 17: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 18: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 19: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 20: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 21: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 22: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 23: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 24: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 25: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 26: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 27: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 28: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 29: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 30: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 31: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 32: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 33: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 34: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 35: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 36: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 37: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 38: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 39: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 40: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 41: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 42: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 43: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 44: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 45: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 46: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 47: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 48: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 49: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 50: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 51: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 52: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 53: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 54: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 55: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 56: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 57: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 58: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 59: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 60: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 61: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 62: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 63: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 64: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 65: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 66: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 67: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 68: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 69: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 70: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 71: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 72: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 73: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 74: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 75: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 76: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 77: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 78: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 79: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 80: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 81: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 82: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 83: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 84: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 85: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 86: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 87: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 88: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 89: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 90: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 91: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 92: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 93: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 94: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 95: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 96: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 97: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 98: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 99: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 100: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 101: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 102: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 103: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 104: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 105: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 106: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 107: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 108: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 109: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 110: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 111: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 112: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 113: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 114: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 115: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 116: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 117: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 118: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 119: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 120: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 121: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 122: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 123: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 124: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 125: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 126: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 127: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 128: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 129: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 130: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 131: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 132: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 133: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 134: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 135: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 136: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 137: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 138: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 139: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 140: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 141: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 142: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 143: GMM criterion Q(b) =  8.391e-09  (not concave)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. //drop _Icountryco_46 _Icountryco_27 _Iyear_1998 _Iyear_1997
. 
. //Poisson Regression
. ivpoisson gmm n_disasters lgdp* lpopulation*  _Iyear* _Icountry* (womenrep_lag=z_lag)
note: _Iyear_1997 omitted because of collinearity.
note: _Iyear_2022 omitted because of collinearity.
note: _Icountryco_64 omitted because of collinearity.
note: instrument z_lag omitted because of collinearity.

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .24290797  
Iteration 2:  GMM criterion Q(b) =   .1017056  
Iteration 3:  GMM criterion Q(b) =  .00552735  (not concave)
Iteration 4:  GMM criterion Q(b) =  .00121955  (not concave)
Iteration 5:  GMM criterion Q(b) =  .00031443  
Iteration 6:  GMM criterion Q(b) =  .00013425  
Iteration 7:  GMM criterion Q(b) =  .00004359  
Iteration 8:  GMM criterion Q(b) =  2.150e-07  
Iteration 9:  GMM criterion Q(b) =  7.374e-09  (not concave)
Iteration 10: GMM criterion Q(b) =  2.007e-09  

Step 2
Iteration 0:  GMM criterion Q(b) =  .15134774  
Iteration 1:  GMM criterion Q(b) =  8.724e-08  
Iteration 2:  GMM criterion Q(b) =  5.919e-10  

Exponential mean model with endogenous regressors

Number of parameters = 100                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

----------------------------------------------------------------------------------
                 |               Robust
     n_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -3.669404   6.729732    -0.55   0.586    -16.85944    9.520628
       lgdp2_lag |  -.1196351   .1838077    -0.65   0.515    -.4798917    .2406214
       lgdp3_lag |   .1714215   .2201709     0.78   0.436    -.2601056    .6029485
       lgdp4_lag |   .2947646   .2465176     1.20   0.232     -.188401    .7779302
       lgdp5_lag |  -.3392405   .1796882    -1.89   0.059    -.6914229     .012942
lpopulation2_lag |  -.0285378   6.032037    -0.00   0.996    -11.85111    11.79404
lpopulation3_lag |   .5288297   7.622523     0.07   0.945    -14.41104     15.4687
lpopulation4_lag |   1.185929   4.603869     0.26   0.797    -7.837487    10.20935
lpopulation5_lag |  -.7580889    2.96698    -0.26   0.798    -6.573263    5.057085
     _Iyear_1997 |          0  (omitted)
     _Iyear_1998 |  -.6017468   .9480453    -0.63   0.526    -2.459881    1.256388
     _Iyear_1999 |  -.3572561   .9400774    -0.38   0.704    -2.199774    1.485262
     _Iyear_2000 |  -.2945456   .8958773    -0.33   0.742    -2.050433    1.461342
     _Iyear_2001 |  -.2252642   .8400586    -0.27   0.789    -1.871749     1.42122
     _Iyear_2002 |  -.1046565   .7769175    -0.13   0.893    -1.627387    1.418074
     _Iyear_2003 |  -.2110852   .7481425    -0.28   0.778    -1.677417    1.255247
     _Iyear_2004 |  -.4999154   .6697168    -0.75   0.455    -1.812536    .8127055
     _Iyear_2005 |  -.2053571   .6368213    -0.32   0.747    -1.453504     1.04279
     _Iyear_2006 |  -.1442395   .5351441    -0.27   0.788    -1.193103    .9046236
     _Iyear_2007 |   .0856552    .473445     0.18   0.856    -.8422798     1.01359
     _Iyear_2008 |  -.0774059   .4440792    -0.17   0.862    -.9477851    .7929734
     _Iyear_2009 |  -.1632949   .4328544    -0.38   0.706    -1.011674    .6850842
     _Iyear_2010 |  -.0668418   .3854402    -0.17   0.862    -.8222907     .688607
     _Iyear_2011 |  -.2097458   .3660023    -0.57   0.567     -.927097    .5076055
     _Iyear_2012 |  -.4418132   .3294075    -1.34   0.180     -1.08744    .2038137
     _Iyear_2013 |  -.5702414   .2968418    -1.92   0.055    -1.152041    .0115579
     _Iyear_2014 |   -.725206   .2654949    -2.73   0.006    -1.245566   -.2048455
     _Iyear_2015 |  -.3383888   .2220223    -1.52   0.127    -.7735446     .096767
     _Iyear_2016 |  -.4635641   .2242018    -2.07   0.039    -.9029916   -.0241366
     _Iyear_2017 |  -.3445663   .1852874    -1.86   0.063    -.7077229    .0185903
     _Iyear_2018 |  -.4594287   .1896666    -2.42   0.015    -.8311684   -.0876889
     _Iyear_2019 |    .187579   .1601522     1.17   0.241    -.1263135    .5014716
     _Iyear_2020 |   .1291165   .1604741     0.80   0.421     -.185407      .44364
     _Iyear_2021 |  -.2864935   .1550012    -1.85   0.065    -.5902903    .0173033
     _Iyear_2022 |          0  (omitted)
   _Icountryco_1 |   .1821463   .3397404     0.54   0.592    -.4837327    .8480253
   _Icountryco_2 |   1.200181    .804382     1.49   0.136    -.3763789    2.776741
   _Icountryco_3 |  -.8045128   .9513296    -0.85   0.398    -2.669085    1.060059
   _Icountryco_4 |  -.6662431   .6450467    -1.03   0.302    -1.930511    .5980252
   _Icountryco_5 |  -18.04802   1.087955   -16.59   0.000    -20.18038   -15.91567
   _Icountryco_6 |   .3815139   1.048121     0.36   0.716    -1.672765    2.435793
   _Icountryco_7 |   .6076045   .6927814     0.88   0.380    -.7502222    1.965431
   _Icountryco_8 |   -1.53012   .9505109    -1.61   0.107    -3.393088    .3328467
   _Icountryco_9 |  -.7176335   .5203371    -1.38   0.168    -1.737475    .3022085
  _Icountryco_10 |  -1.200932   .7848028    -1.53   0.126    -2.739118     .337253
  _Icountryco_11 |   .2796486   .4094181     0.68   0.495    -.5227961    1.082093
  _Icountryco_12 |   1.193365   1.182957     1.01   0.313    -1.125187    3.511917
  _Icountryco_13 |   1.615269   .5496904     2.94   0.003     .5378957    2.692643
  _Icountryco_14 |   1.121033   .6603027     1.70   0.090    -.1731369    2.415202
  _Icountryco_15 |  -.7196149   .9898999    -0.73   0.467    -2.659783    1.220553
  _Icountryco_16 |  -3.153739    1.23451    -2.55   0.011    -5.573334   -.7341442
  _Icountryco_17 |  -.0764358   .5915768    -0.13   0.897    -1.235905    1.083033
  _Icountryco_18 |  -1.006638   .3889063    -2.59   0.010     -1.76888   -.2443957
  _Icountryco_19 |  -.2912701   .9529751    -0.31   0.760    -2.159067    1.576527
  _Icountryco_20 |  -1.134271   .8194361    -1.38   0.166    -2.740336    .4717947
  _Icountryco_21 |  -.4199493   .3511352    -1.20   0.232    -1.108162     .268263
  _Icountryco_22 |   .9460075   .7669918     1.23   0.217    -.5572688    2.449284
  _Icountryco_23 |   .3958793   .5612531     0.71   0.481    -.7041565    1.495915
  _Icountryco_24 |  -17.93932   .8129748   -22.07   0.000    -19.53272   -16.34592
  _Icountryco_25 |  -.7993326   1.535607    -0.52   0.603    -3.809066    2.210401
  _Icountryco_26 |   -20.6765   .4317102   -47.89   0.000    -21.52263   -19.83036
  _Icountryco_27 |  -19.45316   .9020565   -21.57   0.000    -21.22115   -17.68516
  _Icountryco_28 |  -19.99111   .9616167   -20.79   0.000    -21.87584   -18.10638
  _Icountryco_29 |  -.5344743    .706565    -0.76   0.449    -1.919316    .8503676
  _Icountryco_30 |  -19.32973   1.797512   -10.75   0.000    -22.85279   -15.80667
  _Icountryco_31 |  -19.66441   1.532346   -12.83   0.000    -22.66775   -16.66106
  _Icountryco_32 |  -.5330773   .7930508    -0.67   0.501    -2.087428    1.021274
  _Icountryco_33 |  -1.986624   1.378221    -1.44   0.149    -4.687887    .7146391
  _Icountryco_34 |   .8666802   .3637131     2.38   0.017     .1538157    1.579545
  _Icountryco_35 |  -1.224158   1.093892    -1.12   0.263    -3.368148    .9198307
  _Icountryco_36 |   .0490344   .5619799     0.09   0.930    -1.052426    1.150495
  _Icountryco_37 |  -.3691192    .684951    -0.54   0.590    -1.711599    .9733601
  _Icountryco_38 |   .9046408   1.087007     0.83   0.405    -1.225854    3.035136
  _Icountryco_39 |   .8865657   .5360881     1.65   0.098    -.1641477    1.937279
  _Icountryco_40 |   .4663778   1.007986     0.46   0.644    -1.509238    2.441993
  _Icountryco_41 |   .2532417     .39887     0.63   0.525    -.5285291    1.035013
  _Icountryco_42 |   1.676105   .5288938     3.17   0.002     .6394926    2.712718
  _Icountryco_43 |  -.2386768   .6120457    -0.39   0.697    -1.438264    .9609108
  _Icountryco_44 |   -2.16101   1.361595    -1.59   0.112    -4.829687    .5076677
  _Icountryco_45 |  -19.31787   1.431179   -13.50   0.000    -22.12293   -16.51281
  _Icountryco_46 |  -18.92479   1.924117    -9.84   0.000    -22.69599   -15.15359
  _Icountryco_47 |   1.303415   1.504832     0.87   0.386    -1.646001    4.252831
  _Icountryco_48 |   -.641563   .3983357    -1.61   0.107    -1.422287    .1391607
  _Icountryco_49 |   .1666417    .506712     0.33   0.742    -.8264956    1.159779
  _Icountryco_50 |  -.3830835   .5752707    -0.67   0.505    -1.510593    .7444264
  _Icountryco_51 |   .4491652   .3197922     1.40   0.160    -.1776159    1.075946
  _Icountryco_52 |   .6834336   1.138779     0.60   0.548    -1.548532      2.9154
  _Icountryco_53 |   1.191136   .6909476     1.72   0.085    -.1630969    2.545368
  _Icountryco_54 |   2.891104   .9303403     3.11   0.002     1.067671    4.714538
  _Icountryco_55 |  -20.67269   .9207089   -22.45   0.000    -22.47725   -18.86814
  _Icountryco_56 |  -.4391001    .756978    -0.58   0.562     -1.92275     1.04455
  _Icountryco_57 |  -.6424642   .6421927    -1.00   0.317    -1.901139    .6162104
  _Icountryco_58 |  -.7336126   .5059046    -1.45   0.147    -1.725168    .2579423
  _Icountryco_59 |  -.2188449   .6313735    -0.35   0.729    -1.456314    1.018624
  _Icountryco_60 |   .1674654   .6520575     0.26   0.797    -1.110544    1.445475
  _Icountryco_61 |  -21.20867   1.428651   -14.85   0.000    -24.00877   -18.40856
  _Icountryco_62 |   .2609273    .731508     0.36   0.721    -1.172802    1.694657
  _Icountryco_63 |  -.4243532   .5766952    -0.74   0.462    -1.554655    .7059486
  _Icountryco_64 |          0  (omitted)
           _cons |  -14.23738          .        .       .            .           .
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag lpopulation3_lag
            lpopulation4_lag lpopulation5_lag _Iyear_1998 _Iyear_1999 _Iyear_2000 _Iyear_2001
            _Iyear_2002 _Iyear_2003 _Iyear_2004 _Iyear_2005 _Iyear_2006 _Iyear_2007 _Iyear_2008
            _Iyear_2009 _Iyear_2010 _Iyear_2011 _Iyear_2012 _Iyear_2013 _Iyear_2014 _Iyear_2015
            _Iyear_2016 _Iyear_2017 _Iyear_2018 _Iyear_2019 _Iyear_2020 _Iyear_2021 _Icountryco_1
            _Icountryco_2 _Icountryco_3 _Icountryco_4 _Icountryco_5 _Icountryco_6 _Icountryco_7
            _Icountryco_8 _Icountryco_9 _Icountryco_10 _Icountryco_11 _Icountryco_12 _Icountryco_13
            _Icountryco_14 _Icountryco_15 _Icountryco_16 _Icountryco_17 _Icountryco_18 _Icountryco_19
            _Icountryco_20 _Icountryco_21 _Icountryco_22 _Icountryco_23 _Icountryco_24 _Icountryco_25
            _Icountryco_26 _Icountryco_27 _Icountryco_28 _Icountryco_29 _Icountryco_30 _Icountryco_31
            _Icountryco_32 _Icountryco_33 _Icountryco_34 _Icountryco_35 _Icountryco_36 _Icountryco_37
            _Icountryco_38 _Icountryco_39 _Icountryco_40 _Icountryco_41 _Icountryco_42 _Icountryco_43
            _Icountryco_44 _Icountryco_45 _Icountryco_46 _Icountryco_47 _Icountryco_48 _Icountryco_49
            _Icountryco_50 _Icountryco_51 _Icountryco_52 _Icountryco_53 _Icountryco_54 _Icountryco_55
            _Icountryco_56 _Icountryco_57 _Icountryco_58 _Icountryco_59 _Icountryco_60 _Icountryco_61
            _Icountryco_62 _Icountryco_63 z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_64 _Iyear_1998 _Iyear_1997

. 
. //Poisson Regression
. ivpoisson gmm n_disasters lgdp* lpopulation*  _Iyear* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23538799  
Iteration 2:  GMM criterion Q(b) =  .01317277  
Iteration 3:  GMM criterion Q(b) =  .00077468  
Iteration 4:  GMM criterion Q(b) =  .00038737  (not concave)
Iteration 5:  GMM criterion Q(b) =  .00007563  (not concave)
Iteration 6:  GMM criterion Q(b) =   .0000237  (not concave)
Iteration 7:  GMM criterion Q(b) =   .0000158  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00001439  (not concave)
Iteration 9:  GMM criterion Q(b) =  .00001395  (not concave)
Iteration 10: GMM criterion Q(b) =  .00001386  (not concave)
Iteration 11: GMM criterion Q(b) =  .00001378  (not concave)
Iteration 12: GMM criterion Q(b) =  .00001371  (not concave)
Iteration 13: GMM criterion Q(b) =   .0000137  (not concave)
Iteration 14: GMM criterion Q(b) =  .00001361  (not concave)
Iteration 15: GMM criterion Q(b) =  .00001351  (not concave)
Iteration 16: GMM criterion Q(b) =  .00001346  (not concave)
Iteration 17: GMM criterion Q(b) =  .00001337  (not concave)
Iteration 18: GMM criterion Q(b) =  .00001331  (not concave)
Iteration 19: GMM criterion Q(b) =  .00001325  (not concave)
Iteration 20: GMM criterion Q(b) =   .0000132  (not concave)
Iteration 21: GMM criterion Q(b) =  .00001316  (not concave)
Iteration 22: GMM criterion Q(b) =  .00001312  (not concave)
Iteration 23: GMM criterion Q(b) =  .00001309  (not concave)
Iteration 24: GMM criterion Q(b) =  .00001306  (not concave)
Iteration 25: GMM criterion Q(b) =  .00001303  (not concave)
Iteration 26: GMM criterion Q(b) =    .000013  (not concave)
Iteration 27: GMM criterion Q(b) =  .00001297  (not concave)
Iteration 28: GMM criterion Q(b) =  .00001294  (not concave)
Iteration 29: GMM criterion Q(b) =  .00001292  (not concave)
Iteration 30: GMM criterion Q(b) =  .00001289  (not concave)
Iteration 31: GMM criterion Q(b) =  .00001286  (not concave)
Iteration 32: GMM criterion Q(b) =  .00001284  (not concave)
Iteration 33: GMM criterion Q(b) =  .00001281  (not concave)
Iteration 34: GMM criterion Q(b) =  .00001279  (not concave)
Iteration 35: GMM criterion Q(b) =  .00001277  (not concave)
Iteration 36: GMM criterion Q(b) =  .00001275  (not concave)
Iteration 37: GMM criterion Q(b) =  .00001272  (not concave)
Iteration 38: GMM criterion Q(b) =   .0000127  (not concave)
Iteration 39: GMM criterion Q(b) =  .00001268  (not concave)
Iteration 40: GMM criterion Q(b) =  .00001266  (not concave)
Iteration 41: GMM criterion Q(b) =  .00001264  (not concave)
Iteration 42: GMM criterion Q(b) =  .00001263  (not concave)
Iteration 43: GMM criterion Q(b) =  .00001261  (not concave)
Iteration 44: GMM criterion Q(b) =  .00001259  (not concave)
Iteration 45: GMM criterion Q(b) =  .00001257  (not concave)
Iteration 46: GMM criterion Q(b) =  .00001255  (not concave)
Iteration 47: GMM criterion Q(b) =  .00001254  (not concave)
Iteration 48: GMM criterion Q(b) =  .00001252  (not concave)
Iteration 49: GMM criterion Q(b) =  .00001251  (not concave)
Iteration 50: GMM criterion Q(b) =  .00001249  (not concave)
Iteration 51: GMM criterion Q(b) =  .00001248  (not concave)
Iteration 52: GMM criterion Q(b) =  .00001246  (not concave)
Iteration 53: GMM criterion Q(b) =  .00001245  (not concave)
Iteration 54: GMM criterion Q(b) =  .00001243  (not concave)
Iteration 55: GMM criterion Q(b) =  .00001242  (not concave)
Iteration 56: GMM criterion Q(b) =  .00001241  (not concave)
Iteration 57: GMM criterion Q(b) =  .00001239  (not concave)
Iteration 58: GMM criterion Q(b) =  .00001238  (not concave)
Iteration 59: GMM criterion Q(b) =  .00001237  (not concave)
Iteration 60: GMM criterion Q(b) =  .00001236  (not concave)
Iteration 61: GMM criterion Q(b) =  .00001235  (not concave)
Iteration 62: GMM criterion Q(b) =  .00001234  (not concave)
Iteration 63: GMM criterion Q(b) =  .00001232  (not concave)
Iteration 64: GMM criterion Q(b) =  .00001231  (not concave)
Iteration 65: GMM criterion Q(b) =   .0000123  (not concave)
Iteration 66: GMM criterion Q(b) =  .00001229  (not concave)
Iteration 67: GMM criterion Q(b) =  .00001228  (not concave)
Iteration 68: GMM criterion Q(b) =  .00001227  (not concave)
Iteration 69: GMM criterion Q(b) =  .00001226  (not concave)
Iteration 70: GMM criterion Q(b) =  .00001225  (not concave)
Iteration 71: GMM criterion Q(b) =  .00001224  (not concave)
Iteration 72: GMM criterion Q(b) =  .00001224  (not concave)
Iteration 73: GMM criterion Q(b) =  .00001223  (not concave)
Iteration 74: GMM criterion Q(b) =  .00001222  (not concave)
Iteration 75: GMM criterion Q(b) =  .00001221  (not concave)
Iteration 76: GMM criterion Q(b) =   .0000122  (not concave)
Iteration 77: GMM criterion Q(b) =  .00001219  (not concave)
Iteration 78: GMM criterion Q(b) =  .00001218  (not concave)
Iteration 79: GMM criterion Q(b) =  .00001218  (not concave)
Iteration 80: GMM criterion Q(b) =  .00001217  (not concave)
Iteration 81: GMM criterion Q(b) =  .00001216  (not concave)
Iteration 82: GMM criterion Q(b) =  .00001215  (not concave)
Iteration 83: GMM criterion Q(b) =  .00001215  (not concave)
Iteration 84: GMM criterion Q(b) =  .00001214  (not concave)
Iteration 85: GMM criterion Q(b) =  .00001213  (not concave)
Iteration 86: GMM criterion Q(b) =  .00001213  (not concave)
Iteration 87: GMM criterion Q(b) =  .00001212  (not concave)
Iteration 88: GMM criterion Q(b) =  .00001211  (not concave)
Iteration 89: GMM criterion Q(b) =  .00001211  (not concave)
Iteration 90: GMM criterion Q(b) =   .0000121  (not concave)
Iteration 91: GMM criterion Q(b) =  .00001209  (not concave)
Iteration 92: GMM criterion Q(b) =  .00001209  (not concave)
Iteration 93: GMM criterion Q(b) =  .00001208  (not concave)
Iteration 94: GMM criterion Q(b) =  .00001208  (not concave)
Iteration 95: GMM criterion Q(b) =  .00001207  (not concave)
Iteration 96: GMM criterion Q(b) =  .00001207  (not concave)
Iteration 97: GMM criterion Q(b) =  .00001206  (not concave)
Iteration 98: GMM criterion Q(b) =  .00001205  (not concave)
Iteration 99: GMM criterion Q(b) =  .00001205  (not concave)
Iteration 100: GMM criterion Q(b) =  .00001204  (not concave)
Iteration 101: GMM criterion Q(b) =  .00001204  (not concave)
Iteration 102: GMM criterion Q(b) =  .00001203  (not concave)
Iteration 103: GMM criterion Q(b) =  .00001203  (not concave)
Iteration 104: GMM criterion Q(b) =  .00001202  (not concave)
Iteration 105: GMM criterion Q(b) =  .00001202  (not concave)
Iteration 106: GMM criterion Q(b) =  .00001201  (not concave)
Iteration 107: GMM criterion Q(b) =  .00001201  (not concave)
Iteration 108: GMM criterion Q(b) =    .000012  (not concave)
Iteration 109: GMM criterion Q(b) =    .000012  (not concave)
Iteration 110: GMM criterion Q(b) =  .00001199  (not concave)
Iteration 111: GMM criterion Q(b) =  .00001199  (not concave)
Iteration 112: GMM criterion Q(b) =  .00001199  (not concave)
Iteration 113: GMM criterion Q(b) =  .00001198  (not concave)
Iteration 114: GMM criterion Q(b) =  .00001198  (not concave)
Iteration 115: GMM criterion Q(b) =  .00001197  (not concave)
Iteration 116: GMM criterion Q(b) =  .00001197  (not concave)
Iteration 117: GMM criterion Q(b) =  .00001196  (not concave)
Iteration 118: GMM criterion Q(b) =  .00001196  (not concave)
Iteration 119: GMM criterion Q(b) =  .00001196  (not concave)
Iteration 120: GMM criterion Q(b) =  .00001195  (not concave)
Iteration 121: GMM criterion Q(b) =  .00001195  (not concave)
Iteration 122: GMM criterion Q(b) =  .00001194  (not concave)
Iteration 123: GMM criterion Q(b) =  .00001194  (not concave)
Iteration 124: GMM criterion Q(b) =  .00001194  (not concave)
Iteration 125: GMM criterion Q(b) =  .00001193  (not concave)
Iteration 126: GMM criterion Q(b) =  .00001193  (not concave)
Iteration 127: GMM criterion Q(b) =  .00001192  (not concave)
Iteration 128: GMM criterion Q(b) =  .00001192  (not concave)
Iteration 129: GMM criterion Q(b) =  .00001192  (not concave)
Iteration 130: GMM criterion Q(b) =  .00001191  (not concave)
Iteration 131: GMM criterion Q(b) =  .00001191  (not concave)
Iteration 132: GMM criterion Q(b) =  .00001191  (not concave)
Iteration 133: GMM criterion Q(b) =   .0000119  (not concave)
Iteration 134: GMM criterion Q(b) =   .0000119  (not concave)
Iteration 135: GMM criterion Q(b) =   .0000119  (not concave)
Iteration 136: GMM criterion Q(b) =  .00001189  (not concave)
Iteration 137: GMM criterion Q(b) =  .00001189  (not concave)
Iteration 138: GMM criterion Q(b) =  .00001189  (not concave)
Iteration 139: GMM criterion Q(b) =  .00001188  (not concave)
Iteration 140: GMM criterion Q(b) =  .00001188  (not concave)
Iteration 141: GMM criterion Q(b) =  .00001188  (not concave)
Iteration 142: GMM criterion Q(b) =  .00001187  (not concave)
Iteration 143: GMM criterion Q(b) =  .00001187  (not concave)
Iteration 144: GMM criterion Q(b) =  .00001187  (not concave)
Iteration 145: GMM criterion Q(b) =  .00001186  (not concave)
Iteration 146: GMM criterion Q(b) =  .00001186  (not concave)
Iteration 147: GMM criterion Q(b) =  .00001186  (not concave)
Iteration 148: GMM criterion Q(b) =  .00001185  (not concave)
Iteration 149: GMM criterion Q(b) =  .00001185  (not concave)
Iteration 150: GMM criterion Q(b) =  .00001185  (not concave)
Iteration 151: GMM criterion Q(b) =  .00001184  (not concave)
Iteration 152: GMM criterion Q(b) =  .00001184  (not concave)
Iteration 153: GMM criterion Q(b) =  .00001184  (not concave)
Iteration 154: GMM criterion Q(b) =  .00001183  (not concave)
Iteration 155: GMM criterion Q(b) =  .00001183  (not concave)
Iteration 156: GMM criterion Q(b) =  .00001183  (not concave)
Iteration 157: GMM criterion Q(b) =  .00001183  (not concave)
Iteration 158: GMM criterion Q(b) =  .00001182  (not concave)
Iteration 159: GMM criterion Q(b) =  .00001182  (not concave)
Iteration 160: GMM criterion Q(b) =  .00001182  (not concave)
Iteration 161: GMM criterion Q(b) =  .00001181  (not concave)
Iteration 162: GMM criterion Q(b) =  .00001181  (not concave)
Iteration 163: GMM criterion Q(b) =  .00001181  (not concave)
Iteration 164: GMM criterion Q(b) =  .00001181  (not concave)
Iteration 165: GMM criterion Q(b) =   .0000118  (not concave)
Iteration 166: GMM criterion Q(b) =   .0000118  (not concave)
Iteration 167: GMM criterion Q(b) =   .0000118  (not concave)
Iteration 168: GMM criterion Q(b) =  .00001179  (not concave)
Iteration 169: GMM criterion Q(b) =  .00001179  (not concave)
Iteration 170: GMM criterion Q(b) =  .00001179  (not concave)
Iteration 171: GMM criterion Q(b) =  .00001179  (not concave)
Iteration 172: GMM criterion Q(b) =  .00001178  (not concave)
Iteration 173: GMM criterion Q(b) =  .00001178  (not concave)
Iteration 174: GMM criterion Q(b) =  .00001178  (not concave)
Iteration 175: GMM criterion Q(b) =  .00001177  (not concave)
Iteration 176: GMM criterion Q(b) =  .00001177  (not concave)
Iteration 177: GMM criterion Q(b) =  .00001177  (not concave)
Iteration 178: GMM criterion Q(b) =  .00001177  (not concave)
Iteration 179: GMM criterion Q(b) =  .00001176  (not concave)
Iteration 180: GMM criterion Q(b) =  .00001176  (not concave)
Iteration 181: GMM criterion Q(b) =  .00001176  (not concave)
Iteration 182: GMM criterion Q(b) =  .00001176  (not concave)
Iteration 183: GMM criterion Q(b) =  .00001175  (not concave)
Iteration 184: GMM criterion Q(b) =  .00001175  (not concave)
Iteration 185: GMM criterion Q(b) =  .00001175  (not concave)
Iteration 186: GMM criterion Q(b) =  .00001174  (not concave)
Iteration 187: GMM criterion Q(b) =  .00001174  (not concave)
Iteration 188: GMM criterion Q(b) =  .00001174  (not concave)
Iteration 189: GMM criterion Q(b) =  .00001174  (not concave)
Iteration 190: GMM criterion Q(b) =  .00001173  (not concave)
Iteration 191: GMM criterion Q(b) =  .00001173  (not concave)
Iteration 192: GMM criterion Q(b) =  .00001173  (not concave)
Iteration 193: GMM criterion Q(b) =  .00001173  (not concave)
Iteration 194: GMM criterion Q(b) =  .00001172  (not concave)
Iteration 195: GMM criterion Q(b) =  .00001172  (not concave)
Iteration 196: GMM criterion Q(b) =  .00001172  (not concave)
Iteration 197: GMM criterion Q(b) =  .00001172  (not concave)
Iteration 198: GMM criterion Q(b) =  .00001171  (not concave)
Iteration 199: GMM criterion Q(b) =  .00001171  (not concave)
Iteration 200: GMM criterion Q(b) =  .00001171  (not concave)
Iteration 201: GMM criterion Q(b) =  .00001171  (not concave)
Iteration 202: GMM criterion Q(b) =   .0000117  (not concave)
Iteration 203: GMM criterion Q(b) =   .0000117  (not concave)
Iteration 204: GMM criterion Q(b) =   .0000117  (not concave)
Iteration 205: GMM criterion Q(b) =   .0000117  (not concave)
Iteration 206: GMM criterion Q(b) =  .00001169  (not concave)
Iteration 207: GMM criterion Q(b) =  .00001169  (not concave)
Iteration 208: GMM criterion Q(b) =  .00001169  (not concave)
Iteration 209: GMM criterion Q(b) =  .00001169  (not concave)
Iteration 210: GMM criterion Q(b) =  .00001168  (not concave)
Iteration 211: GMM criterion Q(b) =  .00001168  (not concave)
Iteration 212: GMM criterion Q(b) =  .00001168  (not concave)
Iteration 213: GMM criterion Q(b) =  .00001168  (not concave)
Iteration 214: GMM criterion Q(b) =  .00001167  (not concave)
Iteration 215: GMM criterion Q(b) =  .00001167  (not concave)
Iteration 216: GMM criterion Q(b) =  .00001167  (not concave)
Iteration 217: GMM criterion Q(b) =  .00001167  (not concave)
Iteration 218: GMM criterion Q(b) =  .00001166  (not concave)
Iteration 219: GMM criterion Q(b) =  .00001166  (not concave)
Iteration 220: GMM criterion Q(b) =  .00001166  (not concave)
Iteration 221: GMM criterion Q(b) =  .00001166  (not concave)
Iteration 222: GMM criterion Q(b) =  .00001165  (not concave)
Iteration 223: GMM criterion Q(b) =  .00001165  (not concave)
Iteration 224: GMM criterion Q(b) =  .00001165  (not concave)
Iteration 225: GMM criterion Q(b) =  .00001165  (not concave)
Iteration 226: GMM criterion Q(b) =  .00001164  (not concave)
Iteration 227: GMM criterion Q(b) =  .00001164  (not concave)
Iteration 228: GMM criterion Q(b) =  .00001164  (not concave)
Iteration 229: GMM criterion Q(b) =  .00001164  (not concave)
Iteration 230: GMM criterion Q(b) =  .00001164  (not concave)
Iteration 231: GMM criterion Q(b) =  .00001163  (not concave)
Iteration 232: GMM criterion Q(b) =  .00001163  (not concave)
Iteration 233: GMM criterion Q(b) =  .00001163  (not concave)
Iteration 234: GMM criterion Q(b) =  .00001163  (not concave)
Iteration 235: GMM criterion Q(b) =  .00001162  (not concave)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. 
. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1998 _Iyear_1997

. 
. //Poisson Regression
. ivpoisson gmm n_disasters lgdp* lpopulation*  _Iyear* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =   .2360028  
Iteration 2:  GMM criterion Q(b) =  .02004983  
Iteration 3:  GMM criterion Q(b) =  .01343638  
Iteration 4:  GMM criterion Q(b) =  .01206991  
Iteration 5:  GMM criterion Q(b) =  .01140278  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00172684  
Iteration 7:  GMM criterion Q(b) =  .00156577  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00046609  
Iteration 9:  GMM criterion Q(b) =   .0001983  (not concave)
Iteration 10: GMM criterion Q(b) =  .00011594  (not concave)
Iteration 11: GMM criterion Q(b) =  .00009277  
Iteration 12: GMM criterion Q(b) =  4.181e-06  
Iteration 13: GMM criterion Q(b) =  1.319e-07  (not concave)
Iteration 14: GMM criterion Q(b) =  1.139e-07  (not concave)
Iteration 15: GMM criterion Q(b) =  8.456e-08  (not concave)
Iteration 16: GMM criterion Q(b) =  7.945e-08  (not concave)
Iteration 17: GMM criterion Q(b) =  7.809e-08  (not concave)
Iteration 18: GMM criterion Q(b) =  7.794e-08  (not concave)
Iteration 19: GMM criterion Q(b) =  7.789e-08  (not concave)
Iteration 20: GMM criterion Q(b) =  7.784e-08  (not concave)
Iteration 21: GMM criterion Q(b) =  7.748e-08  (not concave)
Iteration 22: GMM criterion Q(b) =  7.733e-08  

Step 2
Iteration 0:  GMM criterion Q(b) =  .03062549  
Iteration 1:  GMM criterion Q(b) =  9.953e-07  (not concave)
Iteration 2:  GMM criterion Q(b) =  3.377e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  3.034e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  2.978e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  2.959e-07  (not concave)
Iteration 6:  GMM criterion Q(b) =  2.944e-07  (not concave)
Iteration 7:  GMM criterion Q(b) =  2.931e-07  (not concave)
Iteration 8:  GMM criterion Q(b) =  2.921e-07  (not concave)
Iteration 9:  GMM criterion Q(b) =  2.910e-07  (not concave)
Iteration 10: GMM criterion Q(b) =  2.901e-07  (not concave)
Iteration 11: GMM criterion Q(b) =  2.892e-07  (not concave)
Iteration 12: GMM criterion Q(b) =  2.884e-07  (not concave)
Iteration 13: GMM criterion Q(b) =  2.876e-07  (not concave)
Iteration 14: GMM criterion Q(b) =  2.875e-07  (not concave)
Iteration 15: GMM criterion Q(b) =  2.770e-07  (not concave)
Iteration 16: GMM criterion Q(b) =    -1.#IND  (backed up)
Hessian is not positive semidefinite
r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters _Iyear* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0552212  
Iteration 1:  GMM criterion Q(b) =   .2347827  
Iteration 2:  GMM criterion Q(b) =  .01143261  
Iteration 3:  GMM criterion Q(b) =  .00077112  
Iteration 4:  GMM criterion Q(b) =  .00004648  
Iteration 5:  GMM criterion Q(b) =  2.252e-06  
Iteration 6:  GMM criterion Q(b) =  7.998e-08  (not concave)
Iteration 7:  GMM criterion Q(b) =  1.658e-08  (not concave)
Iteration 8:  GMM criterion Q(b) =  9.211e-09  (not concave)
Iteration 9:  GMM criterion Q(b) =  8.475e-09  (not concave)
Iteration 10: GMM criterion Q(b) =  8.405e-09  (not concave)
Iteration 11: GMM criterion Q(b) =  8.394e-09  (not concave)
Iteration 12: GMM criterion Q(b) =  8.393e-09  (not concave)
Iteration 13: GMM criterion Q(b) =  8.392e-09  (not concave)
Iteration 14: GMM criterion Q(b) =  8.392e-09  (not concave)
Iteration 15: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 16: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 17: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 18: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 19: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 20: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 21: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 22: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 23: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 24: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 25: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 26: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 27: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 28: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 29: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 30: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 31: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 32: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 33: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 34: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 35: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 36: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 37: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 38: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 39: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 40: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 41: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 42: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 43: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 44: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 45: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 46: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 47: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 48: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 49: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 50: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 51: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 52: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 53: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 54: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 55: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 56: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 57: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 58: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 59: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 60: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 61: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 62: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 63: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 64: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 65: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 66: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 67: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 68: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 69: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 70: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 71: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 72: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 73: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 74: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 75: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 76: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 77: GMM criterion Q(b) =  8.391e-09  (not concave)
Iteration 78: GMM criterion Q(b) =  8.391e-09  (not concave)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters lgdp* lpopulation* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  13.233513  
Iteration 1:  GMM criterion Q(b) =  .24689409  
Iteration 2:  GMM criterion Q(b) =  .03123555  
Iteration 3:  GMM criterion Q(b) =  .00053657  
Iteration 4:  GMM criterion Q(b) =  1.114e-06  
Iteration 5:  GMM criterion Q(b) =  5.138e-10  
Iteration 6:  GMM criterion Q(b) =  1.286e-13  

Step 2
Iteration 0:  GMM criterion Q(b) =  3.108e-13  
Iteration 1:  GMM criterion Q(b) =  4.877e-17  

note: model is exactly identified.

Exponential mean model with endogenous regressors

Number of parameters =  10                         Number of obs  =      1,499
Number of moments    =  10
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

----------------------------------------------------------------------------------
                 |               Robust
     n_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |   -5.37047   1.658824    -3.24   0.001    -8.621705   -2.119235
       lgdp2_lag |  -.1500819   .1549052    -0.97   0.333    -.4536905    .1535267
       lgdp3_lag |   .0936693   .2210213     0.42   0.672    -.3395245     .526863
       lgdp4_lag |     .14755    .254121     0.58   0.561     -.350518     .645618
       lgdp5_lag |  -.3384249   .1868201    -1.81   0.070    -.7045855    .0277358
lpopulation2_lag |  -7.117506   3.485447    -2.04   0.041    -13.94886    -.286155
lpopulation3_lag |   8.405627    5.73415     1.47   0.143      -2.8331    19.64435
lpopulation4_lag |  -5.375932    3.80344    -1.41   0.158    -12.83054    2.078672
lpopulation5_lag |   4.806646   1.961392     2.45   0.014     .9623882    8.650904
           _cons |  -5.012245   .5763286    -8.70   0.000    -6.141829   -3.882662
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag lpopulation3_lag
            lpopulation4_lag lpopulation5_lag z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters lgdp* lpopulation* _Iyear* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  .34266504  
Iteration 1:  GMM criterion Q(b) =  .06503925  
Iteration 2:  GMM criterion Q(b) =  .00057685  
Iteration 3:  GMM criterion Q(b) =  1.188e-06  
Iteration 4:  GMM criterion Q(b) =  8.167e-12  
Iteration 5:  GMM criterion Q(b) =  5.695e-16  

Step 2
Iteration 0:  GMM criterion Q(b) =  2.070e-15  
Iteration 1:  GMM criterion Q(b) =  6.548e-20  

note: model is exactly identified.
warning: variance matrix is nonsymmetric or highly singular.

Exponential mean model with endogenous regressors

Number of parameters =  34                         Number of obs  =      1,499
Number of moments    =  34
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

----------------------------------------------------------------------------------
                 |               Robust
     n_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |   7.107244          .        .       .            .           .
       lgdp2_lag |  -.4518567          .        .       .            .           .
       lgdp3_lag |   .2244499          .        .       .            .           .
       lgdp4_lag |   .1877142          .        .       .            .           .
       lgdp5_lag |  -.0955436          .        .       .            .           .
lpopulation2_lag |  -3.609592          .        .       .            .           .
lpopulation3_lag |   5.160185          .        .       .            .           .
lpopulation4_lag |  -2.242723          .        .       .            .           .
lpopulation5_lag |   1.330957          .        .       .            .           .
     _Iyear_1999 |   .2741617          .        .       .            .           .
     _Iyear_2000 |   .2653463          .        .       .            .           .
     _Iyear_2001 |   .2022225          .        .       .            .           .
     _Iyear_2002 |   .2490903          .        .       .            .           .
     _Iyear_2003 |   .0884818          .        .       .            .           .
     _Iyear_2004 |  -.2899256          .        .       .            .           .
     _Iyear_2005 |  -.0967149          .        .       .            .           .
     _Iyear_2006 |  -.1794358          .        .       .            .           .
     _Iyear_2007 |  -.0463269          .        .       .            .           .
     _Iyear_2008 |  -.2552638          .        .       .            .           .
     _Iyear_2009 |  -.3625361          .        .       .            .           .
     _Iyear_2010 |  -.3782216          .        .       .            .           .
     _Iyear_2011 |  -.6266618          .        .       .            .           .
     _Iyear_2012 |  -.9424487          .        .       .            .           .
     _Iyear_2013 |  -1.129563          .        .       .            .           .
     _Iyear_2014 |  -1.340864          .        .       .            .           .
     _Iyear_2015 |  -1.092123          .        .       .            .           .
     _Iyear_2016 |  -1.276759          .        .       .            .           .
     _Iyear_2017 |  -1.232441          .        .       .            .           .
     _Iyear_2018 |  -1.339664          .        .       .            .           .
     _Iyear_2019 |  -.6778855          .        .       .            .           .
     _Iyear_2020 |  -.7179111          .        .       .            .           .
     _Iyear_2021 |   -1.15142          .        .       .            .           .
     _Iyear_2022 |  -.9277785          .        .       .            .           .
           _cons |  -8.070568          .        .       .            .           .
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag lpopulation3_lag
            lpopulation4_lag lpopulation5_lag _Iyear_1999 _Iyear_2000 _Iyear_2001 _Iyear_2002
            _Iyear_2003 _Iyear_2004 _Iyear_2005 _Iyear_2006 _Iyear_2007 _Iyear_2008 _Iyear_2009
            _Iyear_2010 _Iyear_2011 _Iyear_2012 _Iyear_2013 _Iyear_2014 _Iyear_2015 _Iyear_2016
            _Iyear_2017 _Iyear_2018 _Iyear_2019 _Iyear_2020 _Iyear_2021 _Iyear_2022 z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm n_disasters lgdp* lpopulation* _Icountry* (womenrep_lag=z_lag)

Step 1
Iteration 0:  GMM criterion Q(b) =  .68633127  
Iteration 1:  GMM criterion Q(b) =  .03386227  
Iteration 2:  GMM criterion Q(b) =  .00161268  
Iteration 3:  GMM criterion Q(b) =   .0001146  
Iteration 4:  GMM criterion Q(b) =  9.310e-06  
Iteration 5:  GMM criterion Q(b) =  6.615e-07  
Iteration 6:  GMM criterion Q(b) =  4.627e-08  
Iteration 7:  GMM criterion Q(b) =  3.771e-09  

Step 2
Iteration 0:  GMM criterion Q(b) =  .15212587  (not concave)
Iteration 1:  GMM criterion Q(b) =  .03940058  (not concave)
Iteration 2:  GMM criterion Q(b) =    .017801  (not concave)
Iteration 3:  GMM criterion Q(b) =   .0144718  (not concave)
Iteration 4:  GMM criterion Q(b) =  .01006696  (not concave)
Iteration 5:  GMM criterion Q(b) =  .00930902  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00704412  (not concave)
Iteration 7:  GMM criterion Q(b) =  .00691583  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00683359  (not concave)
Iteration 9:  GMM criterion Q(b) =  .00679761  (not concave)
Iteration 10: GMM criterion Q(b) =   .0067675  (not concave)
Iteration 11: GMM criterion Q(b) =   .0065659  (not concave)
Iteration 12: GMM criterion Q(b) =  .00648551  (not concave)
Iteration 13: GMM criterion Q(b) =  .00646474  (not concave)
Iteration 14: GMM criterion Q(b) =  .00645089  (not concave)
Iteration 15: GMM criterion Q(b) =   .0064368  (not concave)
Iteration 16: GMM criterion Q(b) =  .00509066  (not concave)
Iteration 17: GMM criterion Q(b) =    -1.#IND  (backed up)
Hessian is not positive semidefinite
r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.

Exponential mean model with endogenous regressors

Number of parameters =  96                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. //drop _Icountryco_46 _Icountryco_27 _Iyear_1998 _Iyear_1997
. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*
note: _Icountryco_64 omitted because of collinearity.
note: _Iyear_1997 omitted because of collinearity.
note: _Iyear_2022 omitted because of collinearity.
note: instrument z_lag omitted because of collinearity.

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  (not concave)
Iteration 1:  GMM criterion Q(b) =  .35925946  
Iteration 2:  GMM criterion Q(b) =  .03699261  
Iteration 3:  GMM criterion Q(b) =  .00380627  
Iteration 4:  GMM criterion Q(b) =  .00014871  
Iteration 5:  GMM criterion Q(b) =  .00001005  
Iteration 6:  GMM criterion Q(b) =  7.370e-07  (not concave)
Iteration 7:  GMM criterion Q(b) =  1.298e-07  
Iteration 8:  GMM criterion Q(b) =  6.375e-09  
Iteration 9:  GMM criterion Q(b) =  5.136e-10  (not concave)
Iteration 10: GMM criterion Q(b) =  1.533e-10  

Step 2
Iteration 0:  GMM criterion Q(b) =  .15047982  (not concave)
Iteration 1:  GMM criterion Q(b) =  .02531575  (not concave)
Iteration 2:  GMM criterion Q(b) =   .0054348  (not concave)
Iteration 3:  GMM criterion Q(b) =  .00076727  
Iteration 4:  GMM criterion Q(b) =  .00004717  
Iteration 5:  GMM criterion Q(b) =  3.558e-06  (not concave)
Iteration 6:  GMM criterion Q(b) =  1.293e-06  
Iteration 7:  GMM criterion Q(b) =  7.713e-08  
Iteration 8:  GMM criterion Q(b) =  5.772e-09  

Exponential mean model with endogenous regressors

Number of parameters = 100                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

----------------------------------------------------------------------------------
                 |               Robust
     n_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -4.050337   6.676516    -0.61   0.544    -17.13607    9.035394
       lgdp2_lag |  -.1161427   .1842949    -0.63   0.529     -.477354    .2450687
       lgdp3_lag |   .1727779   .2241008     0.77   0.441    -.2664515    .6120074
       lgdp4_lag |   .2997787     .24779     1.21   0.226    -.1858809    .7854382
       lgdp5_lag |  -.3426339   .1801658    -1.90   0.057    -.6957524    .0104846
lpopulation2_lag |  -.1960642   6.074616    -0.03   0.974    -12.10209    11.70996
lpopulation3_lag |   .6577251   7.666138     0.09   0.932    -14.36763    15.68308
lpopulation4_lag |   1.171678   4.675392     0.25   0.802    -7.991921    10.33528
lpopulation5_lag |  -.6796685   3.013679    -0.23   0.822     -6.58637    5.227033
   _Icountryco_1 |   .1784267    .343483     0.52   0.603    -.4947875    .8516409
   _Icountryco_2 |   1.253979   .7924629     1.58   0.114    -.2992192    2.807178
   _Icountryco_3 |  -.8418526   .9447621    -0.89   0.373    -2.693552    1.009847
   _Icountryco_4 |  -.7013433   .6467711    -1.08   0.278    -1.968991    .5663049
   _Icountryco_5 |  -17.42536   1.074841   -16.21   0.000    -19.53201   -15.31871
   _Icountryco_6 |   .3882558   1.039367     0.37   0.709    -1.648865    2.425377
   _Icountryco_7 |   .6032261   .6883456     0.88   0.381    -.7459064    1.952359
   _Icountryco_8 |  -1.590668   .9393156    -1.69   0.090    -3.431692    .2503572
   _Icountryco_9 |  -.7489405   .5179875    -1.45   0.148    -1.764177    .2662963
  _Icountryco_10 |  -1.284481   .7861972    -1.63   0.102      -2.8254     .256437
  _Icountryco_11 |   .3073466   .4082718     0.75   0.452    -.4928514    1.107545
  _Icountryco_12 |   1.221317   1.168572     1.05   0.296    -1.069042    3.511676
  _Icountryco_13 |   1.699033   .5492075     3.09   0.002     .6226061     2.77546
  _Icountryco_14 |   1.170397   .6525961     1.79   0.073    -.1086674    2.449462
  _Icountryco_15 |  -.7978163   .9783616    -0.82   0.415     -2.71537    1.119737
  _Icountryco_16 |  -3.269943   1.221819    -2.68   0.007    -5.664665   -.8752211
  _Icountryco_17 |  -.0145885     .59384    -0.02   0.980    -1.178493    1.149316
  _Icountryco_18 |  -1.059387   .3942246    -2.69   0.007    -1.832052   -.2867206
  _Icountryco_19 |  -.2601456   .9444455    -0.28   0.783    -2.111225    1.590934
  _Icountryco_20 |  -1.194285   .8129593    -1.47   0.142    -2.787656    .3990859
  _Icountryco_21 |  -.4225186   .3498965    -1.21   0.227    -1.108303     .263266
  _Icountryco_22 |   .9638712   .7593459     1.27   0.204    -.5244194    2.452162
  _Icountryco_23 |   .4349337   .5577924     0.78   0.436    -.6583193    1.528187
  _Icountryco_24 |  -17.28552   .8070473   -21.42   0.000    -18.86731   -15.70374
  _Icountryco_25 |  -.9299333   1.521227    -0.61   0.541    -3.911484    2.051617
  _Icountryco_26 |  -20.32478   .4283373   -47.45   0.000     -21.1643   -19.48525
  _Icountryco_27 |  -19.01461   .8906832   -21.35   0.000    -20.76032   -17.26891
  _Icountryco_28 |  -19.35446   .9468966   -20.44   0.000    -21.21035   -17.49858
  _Icountryco_29 |  -.6006473   .6990998    -0.86   0.390    -1.970858    .7695631
  _Icountryco_30 |   -18.8239    1.77411   -10.61   0.000    -22.30109    -15.3467
  _Icountryco_31 |  -19.23219   1.513512   -12.71   0.000    -22.19862   -16.26576
  _Icountryco_32 |  -.5332191   .7925389    -0.67   0.501    -2.086567    1.020129
  _Icountryco_33 |  -2.021889   1.361533    -1.49   0.138    -4.690445    .6466665
  _Icountryco_34 |   .9166451   .3644382     2.52   0.012     .2023594    1.630931
  _Icountryco_35 |  -1.307728   1.077458    -1.21   0.225    -3.419506    .8040504
  _Icountryco_36 |   .0100142   .5584369     0.02   0.986    -1.084502     1.10453
  _Icountryco_37 |  -.4062504   .6864797    -0.59   0.554    -1.751726     .939225
  _Icountryco_38 |   .9503665   1.083277     0.88   0.380    -1.172817     3.07355
  _Icountryco_39 |   .9036027   .5302284     1.70   0.088    -.1356258    1.942831
  _Icountryco_40 |   .4935828    .995654     0.50   0.620    -1.457863    2.445029
  _Icountryco_41 |   .2355734   .3962721     0.59   0.552    -.5411056    1.012252
  _Icountryco_42 |   1.749804    .539291     3.24   0.001     .6928127    2.806794
  _Icountryco_43 |  -.2722419   .6085878    -0.45   0.655    -1.465052    .9205683
  _Icountryco_44 |  -2.304723   1.351528    -1.71   0.088    -4.953669    .3442223
  _Icountryco_45 |  -18.74922   1.410826   -13.29   0.000    -21.51439   -15.98406
  _Icountryco_46 |   -18.4812   1.901001    -9.72   0.000    -22.20709   -14.75531
  _Icountryco_47 |   1.395821    1.47774     0.94   0.345    -1.500496    4.292137
  _Icountryco_48 |  -.6817825   .3952344    -1.73   0.085    -1.456428    .0928627
  _Icountryco_49 |   .1960119    .503412     0.39   0.697    -.7906574    1.182681
  _Icountryco_50 |  -.3873845   .5741215    -0.67   0.500    -1.512642    .7378729
  _Icountryco_51 |   .4534598   .3232596     1.40   0.161    -.1801174    1.087037
  _Icountryco_52 |   .7829374   1.136785     0.69   0.491     -1.44512    3.010994
  _Icountryco_53 |   1.234914   .6825818     1.81   0.070    -.1029216     2.57275
  _Icountryco_54 |   3.050568   .9418453     3.24   0.001     1.204585    4.896551
  _Icountryco_55 |  -20.15884   .9071617   -22.22   0.000    -21.93684   -18.38083
  _Icountryco_56 |   -.471398   .7502658    -0.63   0.530    -1.941892     .999096
  _Icountryco_57 |  -.6507958    .634155    -1.03   0.305    -1.893717    .5921252
  _Icountryco_58 |  -.7412211   .5032325    -1.47   0.141    -1.727539    .2450966
  _Icountryco_59 |  -.2196712   .6311756    -0.35   0.728    -1.456753     1.01741
  _Icountryco_60 |   .1781323   .6522559     0.27   0.785    -1.100266     1.45653
  _Icountryco_61 |  -20.77719   1.419119   -14.64   0.000    -23.55861   -17.99577
  _Icountryco_62 |   .2603829   .7399066     0.35   0.725    -1.189807    1.710573
  _Icountryco_63 |  -.4501904   .5721416    -0.79   0.431    -1.571567    .6711864
  _Icountryco_64 |          0  (omitted)
     _Iyear_1997 |          0  (omitted)
     _Iyear_1998 |  -.6355234   .9470065    -0.67   0.502    -2.491622    1.220575
     _Iyear_1999 |  -.3930289   .9396374    -0.42   0.676    -2.234684    1.448627
     _Iyear_2000 |  -.3290393   .8968055    -0.37   0.714    -2.086746    1.428667
     _Iyear_2001 |  -.2571246   .8395359    -0.31   0.759    -1.902585    1.388336
     _Iyear_2002 |  -.1329446   .7745041    -0.17   0.864    -1.650945    1.385056
     _Iyear_2003 |  -.2381846   .7454327    -0.32   0.749    -1.699206    1.222837
     _Iyear_2004 |  -.5234886   .6673242    -0.78   0.433     -1.83142    .7844428
     _Iyear_2005 |    -.22722   .6345583    -0.36   0.720    -1.470931    1.016491
     _Iyear_2006 |  -.1613895   .5314529    -0.30   0.761    -1.203018     .880239
     _Iyear_2007 |   .0720449     .46939     0.15   0.878    -.8479427    .9920324
     _Iyear_2008 |  -.0902838   .4393978    -0.21   0.837    -.9514877    .7709201
     _Iyear_2009 |  -.1755858   .4273354    -0.41   0.681    -1.013148    .6619762
     _Iyear_2010 |  -.0773405    .380588    -0.20   0.839    -.8232794    .6685983
     _Iyear_2011 |  -.2189822   .3627409    -0.60   0.546    -.9299414    .4919769
     _Iyear_2012 |  -.4496308   .3259073    -1.38   0.168    -1.088397    .1891357
     _Iyear_2013 |  -.5761744   .2933093    -1.96   0.049     -1.15105   -.0012987
     _Iyear_2014 |  -.7290796   .2629745    -2.77   0.006      -1.2445    -.213659
     _Iyear_2015 |  -.3404387   .2212493    -1.54   0.124    -.7740793    .0932018
     _Iyear_2016 |  -.4648783   .2246021    -2.07   0.038    -.9050904   -.0246663
     _Iyear_2017 |  -.3451668   .1857752    -1.86   0.063    -.7092796     .018946
     _Iyear_2018 |  -.4593616   .1906909    -2.41   0.016    -.8331089   -.0856144
     _Iyear_2019 |   .1876147   .1608593     1.17   0.243    -.1276637     .502893
     _Iyear_2020 |   .1287807   .1608129     0.80   0.423    -.1864068    .4439682
     _Iyear_2021 |  -.2861605   .1556973    -1.84   0.066    -.5913216    .0190006
     _Iyear_2022 |          0  (omitted)
           _cons |  -14.70735          .        .       .            .           .
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag lpopulation3_lag
            lpopulation4_lag lpopulation5_lag _Icountryco_1 _Icountryco_2 _Icountryco_3 _Icountryco_4
            _Icountryco_5 _Icountryco_6 _Icountryco_7 _Icountryco_8 _Icountryco_9 _Icountryco_10
            _Icountryco_11 _Icountryco_12 _Icountryco_13 _Icountryco_14 _Icountryco_15 _Icountryco_16
            _Icountryco_17 _Icountryco_18 _Icountryco_19 _Icountryco_20 _Icountryco_21 _Icountryco_22
            _Icountryco_23 _Icountryco_24 _Icountryco_25 _Icountryco_26 _Icountryco_27 _Icountryco_28
            _Icountryco_29 _Icountryco_30 _Icountryco_31 _Icountryco_32 _Icountryco_33 _Icountryco_34
            _Icountryco_35 _Icountryco_36 _Icountryco_37 _Icountryco_38 _Icountryco_39 _Icountryco_40
            _Icountryco_41 _Icountryco_42 _Icountryco_43 _Icountryco_44 _Icountryco_45 _Icountryco_46
            _Icountryco_47 _Icountryco_48 _Icountryco_49 _Icountryco_50 _Icountryco_51 _Icountryco_52
            _Icountryco_53 _Icountryco_54 _Icountryco_55 _Icountryco_56 _Icountryco_57 _Icountryco_58
            _Icountryco_59 _Icountryco_60 _Icountryco_61 _Icountryco_62 _Icountryco_63 _Iyear_1998
            _Iyear_1999 _Iyear_2000 _Iyear_2001 _Iyear_2002 _Iyear_2003 _Iyear_2004 _Iyear_2005
            _Iyear_2006 _Iyear_2007 _Iyear_2008 _Iyear_2009 _Iyear_2010 _Iyear_2011 _Iyear_2012
            _Iyear_2013 _Iyear_2014 _Iyear_2015 _Iyear_2016 _Iyear_2017 _Iyear_2018 _Iyear_2019
            _Iyear_2020 _Iyear_2021 z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_64 _Iyear_1997 _Iyear_2022

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*
note: instrument z_lag omitted because of collinearity.

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  (not concave)
Iteration 1:  GMM criterion Q(b) =  .35925946  
Iteration 2:  GMM criterion Q(b) =  .03699261  
Iteration 3:  GMM criterion Q(b) =  .00380627  
Iteration 4:  GMM criterion Q(b) =  .00014871  
Iteration 5:  GMM criterion Q(b) =  .00001005  
Iteration 6:  GMM criterion Q(b) =  7.370e-07  (not concave)
Iteration 7:  GMM criterion Q(b) =  1.298e-07  
Iteration 8:  GMM criterion Q(b) =  6.375e-09  
Iteration 9:  GMM criterion Q(b) =  5.136e-10  (not concave)
Iteration 10: GMM criterion Q(b) =  1.533e-10  

Step 2
Iteration 0:  GMM criterion Q(b) =  .15047982  (not concave)
Iteration 1:  GMM criterion Q(b) =  .02531575  (not concave)
Iteration 2:  GMM criterion Q(b) =   .0054348  (not concave)
Iteration 3:  GMM criterion Q(b) =  .00076727  
Iteration 4:  GMM criterion Q(b) =  .00004717  
Iteration 5:  GMM criterion Q(b) =  3.558e-06  (not concave)
Iteration 6:  GMM criterion Q(b) =  1.293e-06  
Iteration 7:  GMM criterion Q(b) =  7.713e-08  
Iteration 8:  GMM criterion Q(b) =  5.772e-09  

Exponential mean model with endogenous regressors

Number of parameters =  97                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

----------------------------------------------------------------------------------
                 |               Robust
     n_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -4.050337   6.676516    -0.61   0.544    -17.13607    9.035394
       lgdp2_lag |  -.1161427   .1842949    -0.63   0.529     -.477354    .2450687
       lgdp3_lag |   .1727779   .2241008     0.77   0.441    -.2664515    .6120074
       lgdp4_lag |   .2997787     .24779     1.21   0.226    -.1858809    .7854382
       lgdp5_lag |  -.3426339   .1801658    -1.90   0.057    -.6957524    .0104846
lpopulation2_lag |  -.1960642   6.074616    -0.03   0.974    -12.10209    11.70996
lpopulation3_lag |   .6577251   7.666138     0.09   0.932    -14.36763    15.68308
lpopulation4_lag |   1.171678   4.675392     0.25   0.802    -7.991921    10.33528
lpopulation5_lag |  -.6796685   3.013679    -0.23   0.822     -6.58637    5.227033
   _Icountryco_1 |   .1784267    .343483     0.52   0.603    -.4947875    .8516409
   _Icountryco_2 |   1.253979   .7924629     1.58   0.114    -.2992192    2.807178
   _Icountryco_3 |  -.8418526   .9447621    -0.89   0.373    -2.693552    1.009847
   _Icountryco_4 |  -.7013433   .6467711    -1.08   0.278    -1.968991    .5663049
   _Icountryco_5 |  -17.42536   1.074841   -16.21   0.000    -19.53201   -15.31871
   _Icountryco_6 |   .3882558   1.039367     0.37   0.709    -1.648865    2.425377
   _Icountryco_7 |   .6032261   .6883456     0.88   0.381    -.7459064    1.952359
   _Icountryco_8 |  -1.590668   .9393156    -1.69   0.090    -3.431692    .2503572
   _Icountryco_9 |  -.7489405   .5179875    -1.45   0.148    -1.764177    .2662963
  _Icountryco_10 |  -1.284481   .7861972    -1.63   0.102      -2.8254     .256437
  _Icountryco_11 |   .3073466   .4082718     0.75   0.452    -.4928514    1.107545
  _Icountryco_12 |   1.221317   1.168572     1.05   0.296    -1.069042    3.511676
  _Icountryco_13 |   1.699033   .5492075     3.09   0.002     .6226061     2.77546
  _Icountryco_14 |   1.170397   .6525961     1.79   0.073    -.1086674    2.449462
  _Icountryco_15 |  -.7978163   .9783616    -0.82   0.415     -2.71537    1.119737
  _Icountryco_16 |  -3.269943   1.221819    -2.68   0.007    -5.664665   -.8752211
  _Icountryco_17 |  -.0145885     .59384    -0.02   0.980    -1.178493    1.149316
  _Icountryco_18 |  -1.059387   .3942246    -2.69   0.007    -1.832052   -.2867206
  _Icountryco_19 |  -.2601456   .9444455    -0.28   0.783    -2.111225    1.590934
  _Icountryco_20 |  -1.194285   .8129593    -1.47   0.142    -2.787656    .3990859
  _Icountryco_21 |  -.4225186   .3498965    -1.21   0.227    -1.108303     .263266
  _Icountryco_22 |   .9638712   .7593459     1.27   0.204    -.5244194    2.452162
  _Icountryco_23 |   .4349337   .5577924     0.78   0.436    -.6583193    1.528187
  _Icountryco_24 |  -17.28552   .8070473   -21.42   0.000    -18.86731   -15.70374
  _Icountryco_25 |  -.9299333   1.521227    -0.61   0.541    -3.911484    2.051617
  _Icountryco_26 |  -20.32478   .4283373   -47.45   0.000     -21.1643   -19.48525
  _Icountryco_27 |  -19.01461   .8906832   -21.35   0.000    -20.76032   -17.26891
  _Icountryco_28 |  -19.35446   .9468966   -20.44   0.000    -21.21035   -17.49858
  _Icountryco_29 |  -.6006473   .6990998    -0.86   0.390    -1.970858    .7695631
  _Icountryco_30 |   -18.8239    1.77411   -10.61   0.000    -22.30109    -15.3467
  _Icountryco_31 |  -19.23219   1.513512   -12.71   0.000    -22.19862   -16.26576
  _Icountryco_32 |  -.5332191   .7925389    -0.67   0.501    -2.086567    1.020129
  _Icountryco_33 |  -2.021889   1.361533    -1.49   0.138    -4.690445    .6466665
  _Icountryco_34 |   .9166451   .3644382     2.52   0.012     .2023594    1.630931
  _Icountryco_35 |  -1.307728   1.077458    -1.21   0.225    -3.419506    .8040504
  _Icountryco_36 |   .0100142   .5584369     0.02   0.986    -1.084502     1.10453
  _Icountryco_37 |  -.4062504   .6864797    -0.59   0.554    -1.751726     .939225
  _Icountryco_38 |   .9503665   1.083277     0.88   0.380    -1.172817     3.07355
  _Icountryco_39 |   .9036027   .5302284     1.70   0.088    -.1356258    1.942831
  _Icountryco_40 |   .4935828    .995654     0.50   0.620    -1.457863    2.445029
  _Icountryco_41 |   .2355734   .3962721     0.59   0.552    -.5411056    1.012252
  _Icountryco_42 |   1.749804    .539291     3.24   0.001     .6928127    2.806794
  _Icountryco_43 |  -.2722419   .6085878    -0.45   0.655    -1.465052    .9205683
  _Icountryco_44 |  -2.304723   1.351528    -1.71   0.088    -4.953669    .3442223
  _Icountryco_45 |  -18.74922   1.410826   -13.29   0.000    -21.51439   -15.98406
  _Icountryco_46 |   -18.4812   1.901001    -9.72   0.000    -22.20709   -14.75531
  _Icountryco_47 |   1.395821    1.47774     0.94   0.345    -1.500496    4.292137
  _Icountryco_48 |  -.6817825   .3952344    -1.73   0.085    -1.456428    .0928627
  _Icountryco_49 |   .1960119    .503412     0.39   0.697    -.7906574    1.182681
  _Icountryco_50 |  -.3873845   .5741215    -0.67   0.500    -1.512642    .7378729
  _Icountryco_51 |   .4534598   .3232596     1.40   0.161    -.1801174    1.087037
  _Icountryco_52 |   .7829374   1.136785     0.69   0.491     -1.44512    3.010994
  _Icountryco_53 |   1.234914   .6825818     1.81   0.070    -.1029216     2.57275
  _Icountryco_54 |   3.050568   .9418453     3.24   0.001     1.204585    4.896551
  _Icountryco_55 |  -20.15884   .9071617   -22.22   0.000    -21.93684   -18.38083
  _Icountryco_56 |   -.471398   .7502658    -0.63   0.530    -1.941892     .999096
  _Icountryco_57 |  -.6507958    .634155    -1.03   0.305    -1.893717    .5921252
  _Icountryco_58 |  -.7412211   .5032325    -1.47   0.141    -1.727539    .2450966
  _Icountryco_59 |  -.2196712   .6311756    -0.35   0.728    -1.456753     1.01741
  _Icountryco_60 |   .1781323   .6522559     0.27   0.785    -1.100266     1.45653
  _Icountryco_61 |  -20.77719   1.419119   -14.64   0.000    -23.55861   -17.99577
  _Icountryco_62 |   .2603829   .7399066     0.35   0.725    -1.189807    1.710573
  _Icountryco_63 |  -.4501904   .5721416    -0.79   0.431    -1.571567    .6711864
     _Iyear_1998 |  -.6355234   .9470065    -0.67   0.502    -2.491622    1.220575
     _Iyear_1999 |  -.3930289   .9396374    -0.42   0.676    -2.234684    1.448627
     _Iyear_2000 |  -.3290393   .8968055    -0.37   0.714    -2.086746    1.428667
     _Iyear_2001 |  -.2571246   .8395359    -0.31   0.759    -1.902585    1.388336
     _Iyear_2002 |  -.1329446   .7745041    -0.17   0.864    -1.650945    1.385056
     _Iyear_2003 |  -.2381846   .7454327    -0.32   0.749    -1.699206    1.222837
     _Iyear_2004 |  -.5234886   .6673242    -0.78   0.433     -1.83142    .7844428
     _Iyear_2005 |    -.22722   .6345583    -0.36   0.720    -1.470931    1.016491
     _Iyear_2006 |  -.1613895   .5314529    -0.30   0.761    -1.203018     .880239
     _Iyear_2007 |   .0720449     .46939     0.15   0.878    -.8479427    .9920324
     _Iyear_2008 |  -.0902838   .4393978    -0.21   0.837    -.9514877    .7709201
     _Iyear_2009 |  -.1755858   .4273354    -0.41   0.681    -1.013148    .6619762
     _Iyear_2010 |  -.0773405    .380588    -0.20   0.839    -.8232794    .6685983
     _Iyear_2011 |  -.2189822   .3627409    -0.60   0.546    -.9299414    .4919769
     _Iyear_2012 |  -.4496308   .3259073    -1.38   0.168    -1.088397    .1891357
     _Iyear_2013 |  -.5761744   .2933093    -1.96   0.049     -1.15105   -.0012987
     _Iyear_2014 |  -.7290796   .2629745    -2.77   0.006      -1.2445    -.213659
     _Iyear_2015 |  -.3404387   .2212493    -1.54   0.124    -.7740793    .0932018
     _Iyear_2016 |  -.4648783   .2246021    -2.07   0.038    -.9050904   -.0246663
     _Iyear_2017 |  -.3451668   .1857752    -1.86   0.063    -.7092796     .018946
     _Iyear_2018 |  -.4593616   .1906909    -2.41   0.016    -.8331089   -.0856144
     _Iyear_2019 |   .1876147   .1608593     1.17   0.243    -.1276637     .502893
     _Iyear_2020 |   .1287807   .1608129     0.80   0.423    -.1864068    .4439682
     _Iyear_2021 |  -.2861605   .1556973    -1.84   0.066    -.5913216    .0190006
           _cons |  -14.70735          .        .       .            .           .
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag lpopulation3_lag
            lpopulation4_lag lpopulation5_lag _Icountryco_1 _Icountryco_2 _Icountryco_3 _Icountryco_4
            _Icountryco_5 _Icountryco_6 _Icountryco_7 _Icountryco_8 _Icountryco_9 _Icountryco_10
            _Icountryco_11 _Icountryco_12 _Icountryco_13 _Icountryco_14 _Icountryco_15 _Icountryco_16
            _Icountryco_17 _Icountryco_18 _Icountryco_19 _Icountryco_20 _Icountryco_21 _Icountryco_22
            _Icountryco_23 _Icountryco_24 _Icountryco_25 _Icountryco_26 _Icountryco_27 _Icountryco_28
            _Icountryco_29 _Icountryco_30 _Icountryco_31 _Icountryco_32 _Icountryco_33 _Icountryco_34
            _Icountryco_35 _Icountryco_36 _Icountryco_37 _Icountryco_38 _Icountryco_39 _Icountryco_40
            _Icountryco_41 _Icountryco_42 _Icountryco_43 _Icountryco_44 _Icountryco_45 _Icountryco_46
            _Icountryco_47 _Icountryco_48 _Icountryco_49 _Icountryco_50 _Icountryco_51 _Icountryco_52
            _Icountryco_53 _Icountryco_54 _Icountryco_55 _Icountryco_56 _Icountryco_57 _Icountryco_58
            _Icountryco_59 _Icountryco_60 _Icountryco_61 _Icountryco_62 _Icountryco_63 _Iyear_1998
            _Iyear_1999 _Iyear_2000 _Iyear_2001 _Iyear_2002 _Iyear_2003 _Iyear_2004 _Iyear_2005
            _Iyear_2006 _Iyear_2007 _Iyear_2008 _Iyear_2009 _Iyear_2010 _Iyear_2011 _Iyear_2012
            _Iyear_2013 _Iyear_2014 _Iyear_2015 _Iyear_2016 _Iyear_2017 _Iyear_2018 _Iyear_2019
            _Iyear_2020 _Iyear_2021 z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_64 _Icountryco_27 _Iyear_1997 _Iyear_2022

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23868372  
Iteration 2:  GMM criterion Q(b) =  .05685224  
Iteration 3:  GMM criterion Q(b) =  .00119305  (not concave)
Iteration 4:  GMM criterion Q(b) =  .00023868  (not concave)
Iteration 5:  GMM criterion Q(b) =  .00017332  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00016021  (not concave)
Iteration 7:  GMM criterion Q(b) =  .00015712  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00015574  (not concave)
Iteration 9:  GMM criterion Q(b) =  .00015471  (not concave)
Iteration 10: GMM criterion Q(b) =  .00015446  (not concave)
Iteration 11: GMM criterion Q(b) =   .0001544  (not concave)
Iteration 12: GMM criterion Q(b) =  .00015436  (not concave)
Iteration 13: GMM criterion Q(b) =  .00015399  (not concave)
Iteration 14: GMM criterion Q(b) =   .0001539  (not concave)
Iteration 15: GMM criterion Q(b) =  .00015382  (not concave)
Iteration 16: GMM criterion Q(b) =  .00015377  (not concave)
Iteration 17: GMM criterion Q(b) =  .00015358  (not concave)
Iteration 18: GMM criterion Q(b) =  .00015354  (not concave)
Iteration 19: GMM criterion Q(b) =  .00015345  (not concave)
Iteration 20: GMM criterion Q(b) =  .00015342  (not concave)
Iteration 21: GMM criterion Q(b) =   .0001534  (not concave)
Iteration 22: GMM criterion Q(b) =  .00015339  (not concave)
Iteration 23: GMM criterion Q(b) =  .00015337  (not concave)
Iteration 24: GMM criterion Q(b) =  .00015336  (not concave)
Iteration 25: GMM criterion Q(b) =  .00015334  (not concave)
Iteration 26: GMM criterion Q(b) =  .00015333  (not concave)
Iteration 27: GMM criterion Q(b) =  .00015331  (not concave)
Iteration 28: GMM criterion Q(b) =   .0001533  (not concave)
Iteration 29: GMM criterion Q(b) =  .00015328  (not concave)
Iteration 30: GMM criterion Q(b) =  .00015327  (not concave)
Iteration 31: GMM criterion Q(b) =  .00015325  (not concave)
Iteration 32: GMM criterion Q(b) =  .00015324  (not concave)
Iteration 33: GMM criterion Q(b) =  .00015322  (not concave)
Iteration 34: GMM criterion Q(b) =  .00015321  (not concave)
Iteration 35: GMM criterion Q(b) =  .00015319  (not concave)
Iteration 36: GMM criterion Q(b) =  .00015318  (not concave)
Iteration 37: GMM criterion Q(b) =  .00015316  (not concave)
Iteration 38: GMM criterion Q(b) =  .00015315  (not concave)
Iteration 39: GMM criterion Q(b) =  .00015313  (not concave)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_64 _Icountryco_1 _Iyear_1997 _Iyear_2022

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 1:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 2:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 3:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 4:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 5:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 6:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 7:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 8:  GMM criterion Q(b) =  6.298e+30  (not concave)
Iteration 9:  GMM criterion Q(b) =  6.298e+30  (not concave)
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_64 _Icountryco_2 _Iyear_1997 _Iyear_2022

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  .36745306  
Iteration 1:  GMM criterion Q(b) =  .01449037  
Iteration 2:  GMM criterion Q(b) =  .00094829  
Iteration 3:  GMM criterion Q(b) =  .00006044  
Iteration 4:  GMM criterion Q(b) =  4.473e-06  (not concave)
Iteration 5:  GMM criterion Q(b) =  5.484e-07  
Iteration 6:  GMM criterion Q(b) =  3.296e-08  (not concave)
Iteration 7:  GMM criterion Q(b) =  7.323e-09  (not concave)
Iteration 8:  GMM criterion Q(b) =  1.962e-09  (not concave)
Iteration 9:  GMM criterion Q(b) =  1.038e-09  (not concave)
Iteration 10: GMM criterion Q(b) =  8.969e-10  (not concave)
Iteration 11: GMM criterion Q(b) =  8.374e-10  (not concave)
Iteration 12: GMM criterion Q(b) =  8.218e-10  (not concave)
Iteration 13: GMM criterion Q(b) =  7.658e-10  (not concave)
Iteration 14: GMM criterion Q(b) =  7.501e-10  (not concave)
Iteration 15: GMM criterion Q(b) =  7.472e-10  

Step 2
Iteration 0:  GMM criterion Q(b) =  .08529485  
Iteration 1:  GMM criterion Q(b) =  8.628e-08  
Iteration 2:  GMM criterion Q(b) =  3.146e-09  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.

Exponential mean model with endogenous regressors

Number of parameters =  96                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_64 _Icountryco_3 _Iyear_1997 _Iyear_2022

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  .48713715  
Iteration 1:  GMM criterion Q(b) =  .02326937  
Iteration 2:  GMM criterion Q(b) =  .00150227  
Iteration 3:  GMM criterion Q(b) =  .00011598  
Iteration 4:  GMM criterion Q(b) =  8.083e-06  
Iteration 5:  GMM criterion Q(b) =  6.016e-07  
Iteration 6:  GMM criterion Q(b) =  4.873e-08  
Iteration 7:  GMM criterion Q(b) =  3.062e-09  

Step 2
Iteration 0:  GMM criterion Q(b) =  .15444512  
Iteration 1:  GMM criterion Q(b) =  1.629e-07  
Iteration 2:  GMM criterion Q(b) =  7.472e-10  
Iteration 3:  GMM criterion Q(b) =  3.749e-11  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.

Exponential mean model with endogenous regressors

Number of parameters =  96                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. /*
> Author: Sam Lee
> 04.05.2024
> 
> This script estimates the effect that women in national legislature have on the frequency of natural 
> disasters within a country.
> 
> Theoretically, with this as a placebo, there should be a very weak/zero effect. I provide this as evi
> dence that my results are significant.
> */
. 
. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. /*
> Author: Sam Lee
> 04.05.2024
> 
> This script estimates the effect that women in national legislature have on the frequency of natural 
> disasters within a country.
> 
> Theoretically, with this as a placebo, there should be a very weak/zero effect. I provide this as evi
> dence that my results are significant.
> */
. 
. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. /*
> Author: Sam Lee
> 04.05.2024
> 
> This script estimates the effect that women in national legislature have on the frequency of natural 
> disasters within a country.
> 
> Theoretically, with this as a placebo, there should be a very weak/zero effect. I provide this as evi
> dence that my results are significant.
> */
. 
. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. /*
> Author: Sam Lee
> 03.31.2024
> 
> This script performs an econometric analysis to identify the causal effect that electing more women i
> n African and Arab countries has on CO2 emissions per capita
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //clean and load in the data for analysis
. do Scripts/DataWrangle.do

. /*
> Author: Sam Lee
> 03.30.2024
> 
> This script takes in all of our data sets and merges them into one cleaned data set for data analysis
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //Load in suffrage data for each country to create instrument
. import delimited "Data/suffrage.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(14 vars, 21,366 obs)

. sort  countryn year

. 
. //We need to figure out the first year that each country granted women suffrage
. //NOTE: This excludes countries that don't give women suffrage (as of 2019): UAE, Saudi Arabia
. // bysort countryn : egen suffrage = max(female_suffrage)
. // keep if suffrage == 0
. // keep countryn suffrage
. // duplicates drop
. 
. keep if female_suffrage == 1
(10,477 observations deleted)

. //Find the first year where female_suffrage == 1
. bysort countryn : egen suffrage = min(year)

. keep countryn countrycode suffrage

. 
. duplicates drop

Duplicates in terms of all variables

(10,686 observations deleted)

. keep if length(countrycode) >= 1
(7 observations deleted)

. 
. keep countrycode suffrage

. //There are some countries that split due to civil wars and other historic events: i.e. Vietnam into 
> South Vietnam and North Vietnam;
. //Hence, these observations are given the same country code. We will keep the suffrage years of when 
> the 'original' country first gave women suffrage.
. //NOTE: This is actually irrelevant to our study because within the countries identified in the Harva
> rd dataverse data set, each country actually is given a unique country code and hence, we are able to
>  map it uniquely to our final data set.
. collapse (min) suffrage, by(countrycode)

. 
. save Data/suffrage.dta, replace
file Data/suffrage.dta saved

. 
. //Data for CO2 emissions across African and Arab countries over time (EDGAR - Emissions Database for 
> Global Atmospheric Research)
. import delimited "Data/emissions.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-9)
(13 vars, 3,498 obs)

. 
. //Response variable is totalco2cap - Total CO2 emissions per capita
. 
. keep region country countrycode year totalco2

. keep if year >= 1985 //this is the smallest year for which we have covariate data
(990 observations deleted)

. 
. rename totalco2 co2

. sort countrycode year

. 
. save Data/emissions.dta, replace
file Data/emissions.dta saved

. 
. //Data for women participation in national government over time (IPU DATA)
. import delimited "Data/IPU.csv", varnames(1) clear
(encoding automatically selected: UTF-8)
(11 vars, 57,148 obs)

. 
. //Clean the numeric variables
. drop lowerpercwomen

. drop upperpercwomen

. 
. local varlist lowerseats lowerwomen upperseats upperwomen

. 
. foreach var of local varlist {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9.]+$") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(361 missing values generated)
(1,470 missing values generated)
(34,664 missing values generated)
(35,227 missing values generated)

. 
. //There was a data entry error here
. replace lowerwomen = 1 if country == "Saint Vincent & the Grenadines" & ipuupdate == "2002-02-04"
(1 real change made)

. 
. //Clean the date columns
. gen ipuupdate_date = date(ipuupdate, "YMD")

. format ipuupdate_date %td

. drop ipuupdate

. rename ipuupdate_date ipuupdate

. 
. gen upperhousesenate_date = date(upperhousesenate, "MY") if upperhousesenate != "---"
(39,109 missing values generated)

. format upperhousesenate_date %td

. drop upperhousesenate

. rename upperhousesenate_date upperhousesenate

. 
. gen lowerelection_date = date(lowerelection, "DMY")
(50,393 missing values generated)

. gen lowerelection_m_date = date(lowerelection, "MY")
(7,342 missing values generated)

. replace lowerelection_date = lowerelection_m_date if lowerelection_date == .
(49,806 real changes made)

. format lowerelection_date %td

. drop lowerelection_m_date lowerelection

. rename lowerelection_date lowerelection

. 
. //This is the year we will group by
. //We want to know what the what the composition of the legislature is like at a specific year
. gen year = year(ipuupdate)

. keep if countrycode != ""
(1,911 observations deleted)

. 
. /*
> In order to match up with our other data,
> which only keeps track of emission or population data by the year for each country, we need the year 
> and country to uniquely identify the observation. Hence, we will select the earliest time in each set
>  of country, year groups to yield us data for women empowerment--although some countries have electio
> ns throughout the year.
> */
. local election_vars lowerwomen upperwomen lowerseats upperseats

. foreach var of local election_vars {
  2.         bysort country year : egen mean`var' = mean(`var')
  3. }
(384 missing values generated)
(33,108 missing values generated)
(170 missing values generated)
(32,869 missing values generated)

. //Treatment variable: Since some countries have multiple elections throughout the year, we are going 
> to standardize it in the sense that we are going to take the 'average' proportion of women representa
> tion (total number of women in power divided by the total number of seats in national legislature) th
> roughout the year
. gen womenrep = (cond(meanlowerwomen == ., 0, meanlowerwomen) +cond(meanupperwomen == ., 0, meanupperw
> omen))/(cond(meanlowerwomen == ., 0, meanlowerseats)+cond(meanupperwomen == ., 0, meanupperseats))
(315 missing values generated)

. 
. foreach var of local election_vars {
  2.         drop mean`var'
  3. }

. 
. keep countrycode year womenrep

. duplicates drop

Duplicates in terms of all variables

(50,093 observations deleted)

. 
. //Some countries in the IPU data set were recorded 'twice' in the sense whereonce was there tradition
> al election composition (baseline), and the other observation during the same year was a special case
>  where the president or some other organization appointed a group of extra delegates (consisting of w
> omen) that increased the women representation for that year/time period.
. //To account for this and to make it so each observation can be uniquely identified by year and count
> ry (time-subject identification), we will just combine the baseline compositions with the composition
> s where these unique cases occured by taking the mean of the women representation proportion
. 
. collapse (mean) womenrep, by(countrycode year)

. 
. sort countrycode year

. 
. save Data/IPU.dta, replace
file Data/IPU.dta saved

. 
. //Load is disasters data for placebo test
. import excel using "Data/disasters.xlsx", sheet("EM-DAT Data") firstrow clear
(46 vars, 2,405 obs)

. 
. //This includes things like epidemics and viral diseases, which may be influenced by the number of wo
> men in legislature if women enact specific policies that influence vaccines, health outcomes, the lik
> elihood of infections, etc.
. drop if DisasterSubgroup == "Biological"
(732 observations deleted)

. 
. rename StartYear year

. rename ISO countrycode

. 
. keep countrycode year

. 
. gen n_disasters = 1

. //The number of natural disasters that happened in each country during each year
. collapse (sum) n_disasters, by (countrycode year)

. 
. save Data/disasters.dta, replace
file Data/disasters.dta saved

. 
. //Covariate Data from the World Bank
. import delimited "Data/worldbank.csv", varnames(1) rowrange(1:652) clear
(encoding automatically selected: ISO-8859-1)
(42 vars, 651 obs)

. 
. drop seriesname

. 
. //Format the years as rows
. reshape long yr, i(countryname seriescode) j(year)
(j = 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 200
> 4 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              651   ->   24,738      
Number of variables                  41   ->   5           
j variable (38 values)                    ->   year
xij variables:
               yr1985 yr1986 ... yr2022   ->   yr
-----------------------------------------------------------------------------

. 
. //Put the metrics as columns
. rename yr value

. replace seriescode = "gdp" if seriescode == "NY.GDP.MKTP.CD"
(8,246 real changes made)

. replace seriescode = "gdppercapita" if seriescode == "NY.GDP.PCAP.CD"
(8,246 real changes made)

. replace seriescode = "population" if seriescode == "SP.POP.TOTL"
(8,246 real changes made)

. reshape wide value, i(countryname year) j(seriescode) string
(j = gdp gdppercapita population)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations           24,738   ->   8,246       
Number of variables                   5   ->   6           
j variable (3 values)        seriescode   ->   (dropped)
xij variables:
                                  value   ->   valuegdp valuegdppercapita valuepopulation
-----------------------------------------------------------------------------

. 
. rename valuegdp gdp

. rename valuegdppercapita gdppercapita

. rename valuepopulation population

. 
. //Clean numeric data
. local metrics gdp gdppercapita population

. foreach var of local metrics {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9]") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(815 missing values generated)
(811 missing values generated)
(5 missing values generated)

. 
. save Data/worldbank.dta, replace
file Data/worldbank.dta saved

. 
. //Merge the data sets
. 
. //Merge covariates with emissions data
. sort countrycode year

. merge 1:1 countrycode year using Data/emissions.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,738
        from master                     5,738  (_merge==1)
        from using                          0  (_merge==2)

    Matched                             2,508  (_merge==3)
    -----------------------------------------

. //All the country codes in the emissions data set match (which is what we want. The worldbank data al
> so includes data from countries outside of the regions of interest)
. keep if _merge == 3
(5,738 observations deleted)

. drop _merge

. 
. drop country //country name from emissions data set

. rename countryname country

. 
. merge 1:1 year countrycode using Data/IPU.dta
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,267
        from master                       848  (_merge==1)
        from using                      3,419  (_merge==2)

    Matched                             1,660  (_merge==3)
    -----------------------------------------

. 
. keep if _merge == 3 | _merge == 1
(3,419 observations deleted)

. drop _merge

. 
. sort countrycode year

. 
. //Join suffrage data and create instrument
. merge m:1 countrycode using Data/suffrage.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           202
        from master                        76  (_merge==1)
        from using                        126  (_merge==2)

    Matched                             2,432  (_merge==3)
    -----------------------------------------

. //These are countries that are not African or Arab
. drop if _merge == 2
(126 observations deleted)

. drop _merge

. 
. //Instrument: years from when country granted suffrage
. gen z = year - suffrage
(76 missing values generated)

. 
. drop if z == .
(76 observations deleted)

. //This drops Saudi Arabia and UAE:
. //Saudia Arabia only holds local elections (which women were enfranchised in 2015)
. //UAE doesn't grant universal suffrage for women (or anyone), and only recently held national electio
> ns in 2006, allowing a small number of voters to participate.
. 
. //NOTE: The womenrep data for years 1985-1996 will be missing for every country since that data wasn'
> t provided by the IPU. We keep these rows in here anyhow because we might want previous years to veri
> fy the parallel trends assumption and to use lags from other variables.
. save Data/womenrep.dta, replace
file Data/womenrep.dta saved

. export delimited using "Data/womenrep.csv", replace
file Data/womenrep.csv saved

. 
end of do-file

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create lags
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. 
. forvalues i = 1985/1997 {
  2.         drop _Iyear_`i'
  3. }

. 
. //Drop Qatar and Iraq, and 1998 year dummies due to colinearity
. drop _Icountryco_46 _Icountryco_27 _Iyear_1998

. 
. //First stage to show relevance
. reg womenrep_lag z_lag lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,499
-------------+----------------------------------   F(95, 1403)     =     77.93
       Model |   14.591666        95  .153596484   Prob > F        =    0.0000
    Residual |  2.76526426     1,403  .001970965   R-squared       =    0.8407
-------------+----------------------------------   Adj R-squared   =    0.8299
       Total |  17.3569303     1,498  .011586736   Root MSE        =     .0444

----------------------------------------------------------------------------------
    womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
           z_lag |   .0044971   .0005612     8.01   0.000     .0033962    .0055979
       lgdp2_lag |   .0225212   .0081681     2.76   0.006     .0064982    .0385443
       lgdp3_lag |    -.00714   .0110674    -0.65   0.519    -.0288505    .0145705
       lgdp4_lag |   .0017338   .0108426     0.16   0.873    -.0195356    .0230033
       lgdp5_lag |    .007004   .0075865     0.92   0.356    -.0078781    .0218861
lpopulation2_lag |  -.3420979   .1276795    -2.68   0.007    -.5925611   -.0916346
lpopulation3_lag |   .3886089    .236357     1.64   0.100    -.0750424    .8522602
lpopulation4_lag |    -.08213   .2268873    -0.36   0.717    -.5272049    .3629448
lpopulation5_lag |  -.0227102   .1119356    -0.20   0.839    -.2422894     .196869
     _Iyear_1999 |  -.0044325   .0087634    -0.51   0.613    -.0216234    .0127583
     _Iyear_2000 |  -.0061486   .0086209    -0.71   0.476    -.0230597    .0107626
     _Iyear_2001 |  -.0047335   .0087814    -0.54   0.590    -.0219596    .0124926
     _Iyear_2002 |  -.0045484   .0086826    -0.52   0.600    -.0215806    .0124838
     _Iyear_2003 |  -.0037837   .0087251    -0.43   0.665    -.0208993     .013332
     _Iyear_2004 |   .0070119   .0088143     0.80   0.426    -.0102787    .0243026
     _Iyear_2005 |   .0134832   .0088413     1.53   0.127    -.0038604    .0308268
     _Iyear_2006 |    .020505    .008868     2.31   0.021     .0031091    .0379009
     _Iyear_2007 |   .0244293   .0090694     2.69   0.007     .0066383    .0422203
     _Iyear_2008 |   .0236607    .009349     2.53   0.011     .0053211    .0420002
     _Iyear_2009 |   .0198664   .0096385     2.06   0.039      .000959    .0387738
     _Iyear_2010 |   .0182186   .0100258     1.82   0.069    -.0014485    .0378857
     _Iyear_2011 |   .0194166   .0102457     1.90   0.058    -.0006819     .039515
     _Iyear_2012 |   .0197717   .0106038     1.86   0.062    -.0010293    .0405727
     _Iyear_2013 |   .0210791   .0107273     1.97   0.050     .0000359    .0421223
     _Iyear_2014 |   .0263286   .0109867     2.40   0.017     .0047765    .0478807
     _Iyear_2015 |   .0308472   .0112609     2.74   0.006     .0087571    .0529372
     _Iyear_2016 |   .0282295   .0114637     2.46   0.014     .0057416    .0507175
     _Iyear_2017 |   .0283058   .0115723     2.45   0.015      .005605    .0510067
     _Iyear_2018 |   .0248747   .0117108     2.12   0.034     .0019021    .0478473
     _Iyear_2019 |   .0226746    .011763     1.93   0.054    -.0004004    .0457497
     _Iyear_2020 |   .0214274    .011837     1.81   0.070    -.0017928    .0446475
     _Iyear_2021 |    .025102   .0121034     2.07   0.038     .0013592    .0488447
     _Iyear_2022 |     .02694   .0123502     2.18   0.029     .0027132    .0511668
   _Icountryco_1 |    .298487   .0387323     7.71   0.000     .2225075    .3744665
   _Icountryco_2 |   .2906172   .0294302     9.87   0.000     .2328852    .3483491
   _Icountryco_3 |   .0404121   .0238199     1.70   0.090    -.0063144    .0871386
   _Icountryco_4 |   .1184351   .0314542     3.77   0.000     .0567329    .1801373
   _Icountryco_5 |   .1286735   .0174485     7.37   0.000     .0944455    .1629016
   _Icountryco_6 |   .0031364   .0180392     0.17   0.862    -.0322503    .0385231
   _Icountryco_7 |   .0474096   .0229428     2.07   0.039     .0024037    .0924156
   _Icountryco_8 |   .0683566   .0316517     2.16   0.031     .0062669    .1304463
   _Icountryco_9 |   .1388349   .0313203     4.43   0.000     .0773952    .2002745
  _Icountryco_10 |   .1871797   .0558952     3.35   0.001     .0775326    .2968269
  _Icountryco_11 |   .0993875   .0172491     5.76   0.000     .0655506    .1332243
  _Icountryco_12 |  -.0388156   .0314448    -1.23   0.217    -.1004996    .0228683
  _Icountryco_13 |   .0802125   .0336188     2.39   0.017     .0142639     .146161
  _Icountryco_14 |    .062435    .026293     2.37   0.018     .0108573    .1140128
  _Icountryco_15 |   .1070168   .0387723     2.76   0.006     .0309588    .1830748
  _Icountryco_16 |   .0709914   .0511657     1.39   0.166    -.0293781     .171361
  _Icountryco_17 |   .3149789   .0270237    11.66   0.000     .2619677    .3679902
  _Icountryco_18 |   .2516826   .0553013     4.55   0.000     .1432005    .3601647
  _Icountryco_19 |  -.0038877   .0225958    -0.17   0.863    -.0482129    .0404374
  _Icountryco_20 |   .0845907    .034682     2.44   0.015     .0165566    .1526247
  _Icountryco_21 |   .1343936   .0256929     5.23   0.000      .083993    .1847943
  _Icountryco_22 |   .0181145    .023475     0.77   0.440    -.0279353    .0641644
  _Icountryco_23 |   .0957815   .0242448     3.95   0.000     .0482215    .1433415
  _Icountryco_24 |   .0115513   .0264771     0.44   0.663    -.0403877    .0634903
  _Icountryco_25 |   .1234323   .0582033     2.12   0.034     .0092574    .2376072
  _Icountryco_26 |   .1717301   .0357175     4.81   0.000     .1016646    .2417955
  _Icountryco_28 |   .0766713   .0210357     3.64   0.000     .0354066    .1179361
  _Icountryco_29 |   .1450687   .0440049     3.30   0.001     .0587462    .2313913
  _Icountryco_30 |   .0686399   .0192074     3.57   0.000     .0309616    .1063182
  _Icountryco_31 |  -.1097278   .0144422    -7.60   0.000    -.1380583   -.0813972
  _Icountryco_32 |  -.0141132   .0244273    -0.58   0.564    -.0620311    .0338048
  _Icountryco_33 |   -.002084   .0152465    -0.14   0.891    -.0319924    .0278244
  _Icountryco_34 |   .1343034   .0216633     6.20   0.000     .0918074    .1767993
  _Icountryco_35 |   .0719676   .0377675     1.91   0.057    -.0021192    .1460544
  _Icountryco_36 |   .1305824   .0357097     3.66   0.000     .0605322    .2006326
  _Icountryco_37 |   .1050178    .030655     3.43   0.001     .0448832    .1651524
  _Icountryco_38 |   .4266577   .0425219    10.03   0.000     .3432443     .510071
  _Icountryco_39 |   .0582756   .0188639     3.09   0.002      .021271    .0952802
  _Icountryco_40 |   .0062849   .0232949     0.27   0.787    -.0394117    .0519814
  _Icountryco_41 |   .1608733   .0321076     5.01   0.000     .0978891    .2238574
  _Icountryco_42 |    .279304   .0170142    16.42   0.000     .2459281      .31268
  _Icountryco_43 |   .1046309   .0327073     3.20   0.001     .0404704    .1687914
  _Icountryco_44 |   .1690322   .0705851     2.39   0.017     .0305685    .3074959
  _Icountryco_45 |   .1158403   .0208698     5.55   0.000      .074901    .1567797
  _Icountryco_47 |   .4288188   .0276513    15.51   0.000     .3745764    .4830611
  _Icountryco_48 |   .1974277   .0406975     4.85   0.000     .1175933    .2772622
  _Icountryco_49 |   .2567815   .0258736     9.92   0.000     .2060263    .3075366
  _Icountryco_50 |    .091375   .0244429     3.74   0.000     .0434264    .1393236
  _Icountryco_51 |   .1998968   .0357928     5.58   0.000     .1296836      .27011
  _Icountryco_52 |    .007565   .0507616     0.15   0.882    -.0920119    .1071419
  _Icountryco_53 |   .0404207   .0254119     1.59   0.112    -.0094288    .0902702
  _Icountryco_54 |   .0941673    .061642     1.53   0.127    -.0267532    .2150878
  _Icountryco_55 |   .0382915   .0258237     1.48   0.138    -.0123658    .0889488
  _Icountryco_56 |   .0714911   .0276738     2.58   0.010     .0172046    .1257777
  _Icountryco_57 |   .0660962   .0225486     2.93   0.003     .0218636    .1103289
  _Icountryco_58 |   .1355992   .0209387     6.48   0.000     .0945246    .1766738
  _Icountryco_59 |    .330883    .046664     7.09   0.000     .2393443    .4224218
  _Icountryco_60 |    .314606   .0416022     7.56   0.000     .2329968    .3962152
  _Icountryco_61 |   .1406717   .0482674     2.91   0.004     .0459876    .2353558
  _Icountryco_62 |   .4876893   .0590006     8.27   0.000     .3719505    .6034281
  _Icountryco_63 |    .124422   .0288393     4.31   0.000     .0678491    .1809949
  _Icountryco_64 |   .2802425   .0351075     7.98   0.000     .2113736    .3491114
           _cons |   .1926943    .231064     0.83   0.404    -.2605738    .6459625
----------------------------------------------------------------------------------

. 
. //Two-stage diff-in-diff regression (Main regression to derive delta)
. ivregress 2sls co2 lgdp* lpopulation* _Iyear* _Icountry* (womenrep_lag=z_lag), cluster(countryid)

Instrumental variables 2SLS regression            Number of obs   =      1,499
                                                  Wald chi2(95)   =    1533.69
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.4448
                                                  Root MSE        =     4.6336

                                 (Std. err. adjusted for 64 clusters in countryid)
----------------------------------------------------------------------------------
                 |               Robust
             co2 | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -107.8425   28.78255    -3.75   0.000    -164.2553   -51.42973
       lgdp2_lag |   2.924972   1.336674     2.19   0.029     .3051384    5.544805
       lgdp3_lag |   -.653158   .8368936    -0.78   0.435    -2.293439    .9871233
       lgdp4_lag |   .3282025   .6306981     0.52   0.603     -.907943    1.564348
       lgdp5_lag |   .7702276   .8580516     0.90   0.369    -.9115227    2.451978
lpopulation2_lag |  -32.77009       20.3    -1.61   0.106    -72.55736    7.017186
lpopulation3_lag |    29.6272   18.96608     1.56   0.118    -7.545635    66.80004
lpopulation4_lag |  -.8691831   12.04223    -0.07   0.942    -24.47152    22.73316
lpopulation5_lag |  -6.992016   9.222721    -0.76   0.448    -25.06822    11.08419
     _Iyear_1999 |   .0999534   .4391663     0.23   0.820    -.7607968    .9607036
     _Iyear_2000 |    .591267   .5398685     1.10   0.273    -.4668558     1.64939
     _Iyear_2001 |   1.390906   .5517341     2.52   0.012     .3095268    2.472285
     _Iyear_2002 |   1.945612   .5002733     3.89   0.000     .9650945     2.92613
     _Iyear_2003 |   2.647328    .503008     5.26   0.000     1.661451    3.633206
     _Iyear_2004 |   4.515761   .7208625     6.26   0.000     3.102897    5.928626
     _Iyear_2005 |    5.74162   .8877487     6.47   0.000     4.001665    7.481576
     _Iyear_2006 |   7.046495   1.138746     6.19   0.000     4.814594    9.278396
     _Iyear_2007 |   7.944794    1.42161     5.59   0.000     5.158491     10.7311
     _Iyear_2008 |   8.307429   1.509235     5.50   0.000     5.349382    11.26548
     _Iyear_2009 |   8.301465   1.530404     5.42   0.000     5.301929      11.301
     _Iyear_2010 |   8.608877   1.593102     5.40   0.000     5.486454     11.7313
     _Iyear_2011 |   9.251817   1.710177     5.41   0.000     5.899932     12.6037
     _Iyear_2012 |   9.881987   1.823811     5.42   0.000     6.307383    13.45659
     _Iyear_2013 |   10.56471   2.032451     5.20   0.000     6.581179    14.54824
     _Iyear_2014 |   11.69655   2.207783     5.30   0.000     7.369371    16.02372
     _Iyear_2015 |    12.6858   2.377474     5.34   0.000     8.026038    17.34556
     _Iyear_2016 |    12.9549   2.369591     5.47   0.000     8.310583    17.59921
     _Iyear_2017 |   13.57758   2.360596     5.75   0.000     8.950899    18.20427
     _Iyear_2018 |   13.77462    2.18224     6.31   0.000     9.497513    18.05174
     _Iyear_2019 |   14.11199   2.170377     6.50   0.000     9.858129    18.36585
     _Iyear_2020 |   14.35193   2.128762     6.74   0.000     10.17964    18.52423
     _Iyear_2021 |   15.44305   2.240625     6.89   0.000      11.0515    19.83459
     _Iyear_2022 |   16.25513   2.411684     6.74   0.000     11.52832    20.98194
   _Icountryco_1 |   20.68753   4.066881     5.09   0.000     12.71659    28.65847
   _Icountryco_2 |    23.2247   7.054507     3.29   0.001     9.398123    37.05128
   _Icountryco_3 |  -3.230026   5.519487    -0.59   0.558    -14.04802     7.58797
   _Icountryco_4 |   7.358422   6.342783     1.16   0.246    -5.073204    19.79005
   _Icountryco_5 |  -1.834291   5.541591    -0.33   0.741    -12.69561    9.027027
   _Icountryco_6 |  -15.27108   3.735097    -4.09   0.000    -22.59173   -7.950421
   _Icountryco_7 |  -5.015889   5.383555    -0.93   0.351    -15.56746    5.535684
   _Icountryco_8 |     2.5109   6.952358     0.36   0.718    -11.11547    16.13727
   _Icountryco_9 |   9.963422   5.427772     1.84   0.066    -.6748158    20.60166
  _Icountryco_10 |   17.27989   11.26538     1.53   0.125    -4.799854    39.35963
  _Icountryco_11 |   .1071763   4.368616     0.02   0.980    -8.455154    8.669506
  _Icountryco_12 |  -29.92642   6.799071    -4.40   0.000    -43.25235   -16.60048
  _Icountryco_13 |  -17.42718   10.59661    -1.64   0.100    -38.19615    3.341788
  _Icountryco_14 |  -18.05801   7.574373    -2.38   0.017    -32.90351    -3.21251
  _Icountryco_15 |   10.34022   7.698073     1.34   0.179    -4.747729    25.42816
  _Icountryco_16 |   12.17656     12.384     0.98   0.325    -12.09563    36.44876
  _Icountryco_17 |   6.183297   7.351875     0.84   0.400    -8.226114    20.59271
  _Icountryco_18 |   31.29453   9.638708     3.25   0.001     12.40301    50.18605
  _Icountryco_19 |  -12.96086   5.075702    -2.55   0.011    -22.90906   -3.012669
  _Icountryco_20 |   6.945596   7.606157     0.91   0.361    -7.962199    21.85339
  _Icountryco_21 |    8.34019   4.844307     1.72   0.085    -1.154478    17.83486
  _Icountryco_22 |   -14.3656   5.659788    -2.54   0.011    -25.45858   -3.272615
  _Icountryco_23 |  -10.85569   7.012749    -1.55   0.122    -24.60043    2.889044
  _Icountryco_24 |  -15.00533   6.639021    -2.26   0.024    -28.01758    -1.99309
  _Icountryco_25 |   10.48566   12.59308     0.83   0.405    -14.19632    35.16765
  _Icountryco_26 |   19.18863   5.463672     3.51   0.000     8.480025    29.89723
  _Icountryco_28 |  -5.751752   3.683225    -1.56   0.118    -12.97074    1.467237
  _Icountryco_29 |   12.23304   8.718146     1.40   0.161    -4.854212    29.32029
  _Icountryco_30 |  -3.697054   1.078547    -3.43   0.001    -5.810966   -1.583141
  _Icountryco_31 |  -15.18332   3.381379    -4.49   0.000     -21.8107   -8.555936
  _Icountryco_32 |  -5.935613   5.341864    -1.11   0.267    -16.40547    4.534248
  _Icountryco_33 |  -4.083067   2.129031    -1.92   0.055    -8.255891    .0897576
  _Icountryco_34 |   -1.81149   7.114872    -0.25   0.799    -15.75638     12.1334
  _Icountryco_35 |    4.59114   8.372208     0.55   0.583    -11.81809    21.00037
  _Icountryco_36 |   9.936326   7.192663     1.38   0.167    -4.161034    24.03369
  _Icountryco_37 |   5.674104   6.350031     0.89   0.372    -6.771728    18.11994
  _Icountryco_38 |   34.89957   5.400576     6.46   0.000     24.31464    45.48451
  _Icountryco_39 |   -5.33409   4.547655    -1.17   0.241    -14.24733    3.579151
  _Icountryco_40 |  -17.71482   5.644732    -3.14   0.002    -28.77829   -6.651351
  _Icountryco_41 |   9.908768   5.823345     1.70   0.089    -1.504778    21.32231
  _Icountryco_42 |    2.03958   7.915309     0.26   0.797    -13.47414     17.5533
  _Icountryco_43 |   6.042146   7.070069     0.85   0.393    -7.814934    19.89923
  _Icountryco_44 |   13.28036   15.13383     0.88   0.380     -16.3814    42.94212
  _Icountryco_45 |  -5.609082   1.130859    -4.96   0.000    -7.825526   -3.392639
  _Icountryco_47 |   38.14465   8.627031     4.42   0.000     21.23598    55.05332
  _Icountryco_48 |   16.38715   6.386615     2.57   0.010     3.869611    28.90468
  _Icountryco_49 |   21.15142   4.455111     4.75   0.000     12.41957    29.88328
  _Icountryco_50 |   .5766269   5.524376     0.10   0.917    -10.25095     11.4042
  _Icountryco_51 |     13.408   5.622836     2.38   0.017      2.38744    24.42855
  _Icountryco_52 |  -29.49976    13.3712    -2.21   0.027    -55.70683   -3.292681
  _Icountryco_53 |  -15.76647   7.022358    -2.25   0.025    -29.53004   -2.002906
  _Icountryco_54 |   -15.8791   19.57312    -0.81   0.417    -54.24171    22.48351
  _Icountryco_55 |   3.791151   5.603456     0.68   0.499     -7.19142    14.77372
  _Icountryco_56 |   .8575546   6.250021     0.14   0.891    -11.39226    13.10737
  _Icountryco_57 |  -1.779473   5.046564    -0.35   0.724    -11.67056    8.111611
  _Icountryco_58 |    9.34439    2.54427     3.67   0.000     4.357713    14.33107
  _Icountryco_59 |   32.83622   5.774994     5.69   0.000     21.51744      44.155
  _Icountryco_60 |   30.24874   5.457033     5.54   0.000     19.55316    40.94433
  _Icountryco_61 |  -2.847616   9.650954    -0.30   0.768    -21.76314    16.06791
  _Icountryco_62 |   41.91729   2.905688    14.43   0.000     36.22224    47.61233
  _Icountryco_63 |   5.080623   5.335624     0.95   0.341    -5.377008    15.53825
  _Icountryco_64 |   15.36792   4.276583     3.59   0.000      6.98597    23.74987
           _cons |   103.5709   57.82667     1.79   0.073    -9.767322     216.909
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag
            lpopulation3_lag lpopulation4_lag lpopulation5_lag _Iyear_1999
            _Iyear_2000 _Iyear_2001 _Iyear_2002 _Iyear_2003 _Iyear_2004
            _Iyear_2005 _Iyear_2006 _Iyear_2007 _Iyear_2008 _Iyear_2009
            _Iyear_2010 _Iyear_2011 _Iyear_2012 _Iyear_2013 _Iyear_2014
            _Iyear_2015 _Iyear_2016 _Iyear_2017 _Iyear_2018 _Iyear_2019
            _Iyear_2020 _Iyear_2021 _Iyear_2022 _Icountryco_1 _Icountryco_2
            _Icountryco_3 _Icountryco_4 _Icountryco_5 _Icountryco_6
            _Icountryco_7 _Icountryco_8 _Icountryco_9 _Icountryco_10
            _Icountryco_11 _Icountryco_12 _Icountryco_13 _Icountryco_14
            _Icountryco_15 _Icountryco_16 _Icountryco_17 _Icountryco_18
            _Icountryco_19 _Icountryco_20 _Icountryco_21 _Icountryco_22
            _Icountryco_23 _Icountryco_24 _Icountryco_25 _Icountryco_26
            _Icountryco_28 _Icountryco_29 _Icountryco_30 _Icountryco_31
            _Icountryco_32 _Icountryco_33 _Icountryco_34 _Icountryco_35
            _Icountryco_36 _Icountryco_37 _Icountryco_38 _Icountryco_39
            _Icountryco_40 _Icountryco_41 _Icountryco_42 _Icountryco_43
            _Icountryco_44 _Icountryco_45 _Icountryco_47 _Icountryco_48
            _Icountryco_49 _Icountryco_50 _Icountryco_51 _Icountryco_52
            _Icountryco_53 _Icountryco_54 _Icountryco_55 _Icountryco_56
            _Icountryco_57 _Icountryco_58 _Icountryco_59 _Icountryco_60
            _Icountryco_61 _Icountryco_62 _Icountryco_63 _Icountryco_64 z_lag

. 
. //Save results to a latex table
. ssc install estout
checking estout consistency and verifying not already installed...
all files already exist and are up to date.

. esttab using "regression_results_raw.tex", replace ci
(output written to regression_results_raw.tex)

. 
. /*one way CV1 and CV3 */
. adopath + "C:\Users\slee039\Box\ECON 398\Final Project\Resources\MNW-guide-replic-do-files"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\slee039\ado\personal/"
  [5]  (PLUS)      "C:\Users\slee039\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "Resources\MNW-guide-replic-do-files"
  [8]              "C:\Users\slee039\Box\ECON 398\Final Project\Resources\MNW-guide-replic-do-files"

. 
. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0.5) jack 


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for womenrep_lag when clustered by countryid.
There are 1499 observations within 64 countryid clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -5.539950   2.105267  -2.6315   0.0107   -9.746990   -1.332909
   CV3 |  -5.539950   6.886255  -0.8045   0.4241   -1.93e+01    8.221133
  CV3J |  -5.539950   6.815349  -0.8129   0.4194   -1.92e+01    8.079439
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      5.0      1.067822       0.000102  -6.188928    
        q1 |     23.5      1.442487       0.007746  -5.640850    
    median |     25.0      1.458248       0.011587  -5.551987    
      mean |     23.4      1.500000       0.015625  -5.415768    
        q3 |     25.0      1.514160       0.018182  -5.452013    
       max |     25.0      2.627734       0.077512  -0.756779    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.128874       0.870524   0.159800    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  36.6558
G*(.5) is 28.97432 
G*(1)  is 2 

. 
. //Run placebo test
. do Scripts/placebo.do

. /*
> Author: Sam Lee
> 04.05.2024
> 
> This script estimates the effect that women in national legislature have on the frequency of natural 
> disasters within a country.
> 
> Theoretically, with this as a placebo, there should be a very weak/zero effect. I provide this as evi
> dence that my results are significant.
> */
. 
. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.

Exponential mean model with endogenous regressors

Number of parameters =  96                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

r(430);

end of do-file
r(430);

end of do-file

r(430);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivregress 2sls (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*, cluster(countryid)
=exp not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivregress 2sls (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*, cluster(country)
=exp not allowed
r(101);

end of do-file

r(101);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivregress 2sls n_disasters lgdp* lpopulation* _I* (womenrep_lag=z_lag), cluster(country)

Instrumental variables 2SLS regression            Number of obs   =      1,499
                                                  Wald chi2(95)   =     100.36
                                                  Prob > chi2     =     0.3337
                                                  R-squared       =     0.5091
                                                  Root MSE        =     1.0016

                                   (Std. err. adjusted for 64 clusters in country)
----------------------------------------------------------------------------------
                 |               Robust
     n_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -2.823683   2.784827    -1.01   0.311    -8.281844    2.634477
       lgdp2_lag |  -.2054945   .1605026    -1.28   0.200    -.5200737    .1090847
       lgdp3_lag |   .1485078   .2946917     0.50   0.614    -.4290772    .7260929
       lgdp4_lag |   .3139803   .2500866     1.26   0.209    -.1761803     .804141
       lgdp5_lag |  -.2796987   .1509636    -1.85   0.064    -.5755819    .0161844
lpopulation2_lag |   .8560598     2.2813     0.38   0.707    -3.615205    5.327325
lpopulation3_lag |   -.678759   2.833132    -0.24   0.811    -6.231595    4.874077
lpopulation4_lag |   1.688611   1.938594     0.87   0.384    -2.110963    5.488185
lpopulation5_lag |  -1.415314   1.081293    -1.31   0.191     -3.53461    .7039818
   _Icountryco_1 |   1.651151   .3981182     4.15   0.000     .8708533    2.431448
   _Icountryco_2 |   2.016154   .5698457     3.54   0.000     .8992773    3.133031
   _Icountryco_3 |   .1353138   .5681906     0.24   0.812    -.9783192    1.248947
   _Icountryco_4 |   .3917524   .6486854     0.60   0.546    -.8796476    1.663152
   _Icountryco_5 |   .6119799    .477183     1.28   0.200    -.3232816    1.547241
   _Icountryco_6 |   .7527817   .2677735     2.81   0.005     .2279554    1.277608
   _Icountryco_7 |   1.048198   .4799218     2.18   0.029     .1075684    1.988828
   _Icountryco_8 |  -.1645392    .714917    -0.23   0.818    -1.565751    1.236672
   _Icountryco_9 |   .4207373   .5587826     0.75   0.451    -.6744565    1.515931
  _Icountryco_10 |   1.020905   1.144411     0.89   0.372      -1.2221    3.263909
  _Icountryco_11 |   .7438305   .3314719     2.24   0.025     .0941576    1.393503
  _Icountryco_12 |    .991874   .4897779     2.03   0.043     .0319269    1.951821
  _Icountryco_13 |    1.40692   .8586885     1.64   0.101    -.2760789    3.089918
  _Icountryco_14 |   1.053034   .5631898     1.87   0.062    -.0507979    2.156866
  _Icountryco_15 |   1.167488   .7657741     1.52   0.127    -.3334022    2.668377
  _Icountryco_16 |  -.9522658   1.214777    -0.78   0.433    -3.333184    1.428653
  _Icountryco_17 |   .6601077    .560707     1.18   0.239    -.4388578    1.759073
  _Icountryco_18 |    1.36191   .9731423     1.40   0.162     -.545414    3.269234
  _Icountryco_19 |   .6505453   .3965815     1.64   0.101    -.1267402    1.427831
  _Icountryco_20 |    .185173   .7803391     0.24   0.812    -1.344264     1.71461
  _Icountryco_21 |   .4238106   .4607104     0.92   0.358    -.4791652    1.326786
  _Icountryco_22 |   .9787606     .42583     2.30   0.022     .1441491    1.813372
  _Icountryco_23 |   .7219458   .5109904     1.41   0.158     -.279577    1.723469
  _Icountryco_24 |   .6393245   .5203987     1.23   0.219    -.3806382    1.659287
  _Icountryco_25 |   3.539315    1.22029     2.90   0.004     1.147592    5.931039
  _Icountryco_26 |  -.6416308    .540589    -1.19   0.235    -1.701166    .4179043
  _Icountryco_28 |  -.3045116    .380595    -0.80   0.424    -1.050464    .4414408
  _Icountryco_29 |   1.662493   .8842233     1.88   0.060    -.0705534    3.395538
  _Icountryco_30 |  -.0467068   .1241473    -0.38   0.707    -.2900311    .1966174
  _Icountryco_31 |  -.2885171   .3652499    -0.79   0.430    -1.004394    .4273596
  _Icountryco_32 |   .2512439   .4579206     0.55   0.583     -.646264    1.148752
  _Icountryco_33 |  -.0372664   .2154345    -0.17   0.863    -.4595103    .3849774
  _Icountryco_34 |   1.056621   .5306218     1.99   0.046     .0166213    2.096621
  _Icountryco_35 |   .3064681   .8393386     0.37   0.715    -1.338605    1.951542
  _Icountryco_36 |   1.812977   .7423989     2.44   0.015     .3579023    3.268052
  _Icountryco_37 |   .6986414   .6519425     1.07   0.284    -.5791424    1.976425
  _Icountryco_38 |   2.664072   .4683558     5.69   0.000     1.746112    3.582033
  _Icountryco_39 |   1.152167   .3463205     3.33   0.001     .4733911    1.830942
  _Icountryco_40 |   .8903325    .440249     2.02   0.043     .0274603    1.753205
  _Icountryco_41 |   1.507893   .5849164     2.58   0.010     .3614784    2.654309
  _Icountryco_42 |    1.63704   .6584221     2.49   0.013     .3465565    2.927524
  _Icountryco_43 |   .9005862   .7274611     1.24   0.216    -.5252113    2.326384
  _Icountryco_44 |   .7160551   1.467774     0.49   0.626    -2.160729    3.592839
  _Icountryco_45 |   -.014497   .1039555    -0.14   0.889    -.2182461    .1892521
  _Icountryco_47 |   1.992245   .7086002     2.81   0.005     .6034137    3.381075
  _Icountryco_48 |   .8900617   .6519821     1.37   0.172    -.3877998    2.167923
  _Icountryco_49 |   .9860051   .3707742     2.66   0.008     .2593011    1.712709
  _Icountryco_50 |   .3365259   .5048768     0.67   0.505    -.6530144    1.326066
  _Icountryco_51 |   1.706419   .5217023     3.27   0.001     .6839011    2.728936
  _Icountryco_52 |   1.400019   1.077767     1.30   0.194    -.7123663    3.512404
  _Icountryco_53 |   1.168707   .5402403     2.16   0.031     .1098552    2.227558
  _Icountryco_54 |   2.345806   1.736104     1.35   0.177    -1.056895    5.748507
  _Icountryco_55 |  -.6232659   .5786546    -1.08   0.281    -1.757408    .5108763
  _Icountryco_56 |   .4546911   .6402694     0.71   0.478    -.8002139    1.709596
  _Icountryco_57 |   .2057841   .4767462     0.43   0.666    -.7286213    1.140189
  _Icountryco_58 |     .35994   .2412555     1.49   0.136    -.1129121     .832792
  _Icountryco_59 |   1.574935   .5711545     2.76   0.006     .4554932    2.694378
  _Icountryco_60 |   1.860699   .5283358     3.52   0.000     .8251801    2.896218
  _Icountryco_61 |  -1.047641   .9918478    -1.06   0.291    -2.991627    .8963447
  _Icountryco_62 |   2.815741   .2817444     9.99   0.000     2.263532     3.36795
  _Icountryco_63 |   .5237795    .545552     0.96   0.337    -.5454827    1.593042
  _Icountryco_64 |   .9219298   .3966057     2.32   0.020      .144597    1.699263
     _Iyear_1999 |   .2293608   .1845421     1.24   0.214    -.1323351    .5910566
     _Iyear_2000 |   .2870487   .2170191     1.32   0.186    -.1383009    .7123984
     _Iyear_2001 |   .3556909   .1769458     2.01   0.044     .0088835    .7024983
     _Iyear_2002 |   .4844129   .1741826     2.78   0.005     .1430212    .8258045
     _Iyear_2003 |    .344844   .1929479     1.79   0.074     -.033327     .723015
     _Iyear_2004 |   .0980143   .1919256     0.51   0.610    -.2781529    .4741815
     _Iyear_2005 |   .4127093   .2081591     1.98   0.047      .004725    .8206936
     _Iyear_2006 |   .4914551   .2196535     2.24   0.025     .0609422     .921968
     _Iyear_2007 |   .7593087     .23181     3.28   0.001     .3049694    1.213648
     _Iyear_2008 |   .5594886   .2470252     2.26   0.024     .0753281    1.043649
     _Iyear_2009 |   .4734881    .194597     2.43   0.015      .092085    .8548912
     _Iyear_2010 |   .5777019   .2067893     2.79   0.005     .1724024    .9830014
     _Iyear_2011 |   .4078001   .1995763     2.04   0.041     .0166377    .7989624
     _Iyear_2012 |   .2035104   .2120698     0.96   0.337    -.2121389    .6191596
     _Iyear_2013 |   .1478155    .214529     0.69   0.491    -.2726537    .5682846
     _Iyear_2014 |   .0297993   .2360955     0.13   0.900    -.4329393    .4925379
     _Iyear_2015 |   .3223171   .2801277     1.15   0.250    -.2267231    .8713573
     _Iyear_2016 |   .2113124   .2225775     0.95   0.342    -.2249316    .6475564
     _Iyear_2017 |   .2870632   .2384415     1.20   0.229    -.1802735    .7543999
     _Iyear_2018 |   .1997188   .2397337     0.83   0.405    -.2701507    .6695882
     _Iyear_2019 |    .922826   .2519375     3.66   0.000     .4290377    1.416614
     _Iyear_2020 |   .8841429   .2774178     3.19   0.001     .3404139    1.427872
     _Iyear_2021 |   .4109326   .2487527     1.65   0.099    -.0766137    .8984789
     _Iyear_2022 |   .7377452   .2929844     2.52   0.012     .1635062    1.311984
           _cons |  -6.452182   4.804388    -1.34   0.179    -15.86861    2.964245
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag
            lpopulation3_lag lpopulation4_lag lpopulation5_lag _Icountryco_1
            _Icountryco_2 _Icountryco_3 _Icountryco_4 _Icountryco_5
            _Icountryco_6 _Icountryco_7 _Icountryco_8 _Icountryco_9
            _Icountryco_10 _Icountryco_11 _Icountryco_12 _Icountryco_13
            _Icountryco_14 _Icountryco_15 _Icountryco_16 _Icountryco_17
            _Icountryco_18 _Icountryco_19 _Icountryco_20 _Icountryco_21
            _Icountryco_22 _Icountryco_23 _Icountryco_24 _Icountryco_25
            _Icountryco_26 _Icountryco_28 _Icountryco_29 _Icountryco_30
            _Icountryco_31 _Icountryco_32 _Icountryco_33 _Icountryco_34
            _Icountryco_35 _Icountryco_36 _Icountryco_37 _Icountryco_38
            _Icountryco_39 _Icountryco_40 _Icountryco_41 _Icountryco_42
            _Icountryco_43 _Icountryco_44 _Icountryco_45 _Icountryco_47
            _Icountryco_48 _Icountryco_49 _Icountryco_50 _Icountryco_51
            _Icountryco_52 _Icountryco_53 _Icountryco_54 _Icountryco_55
            _Icountryco_56 _Icountryco_57 _Icountryco_58 _Icountryco_59
            _Icountryco_60 _Icountryco_61 _Icountryco_62 _Icountryco_63
            _Icountryco_64 _Iyear_1999 _Iyear_2000 _Iyear_2001 _Iyear_2002
            _Iyear_2003 _Iyear_2004 _Iyear_2005 _Iyear_2006 _Iyear_2007
            _Iyear_2008 _Iyear_2009 _Iyear_2010 _Iyear_2011 _Iyear_2012
            _Iyear_2013 _Iyear_2014 _Iyear_2015 _Iyear_2016 _Iyear_2017
            _Iyear_2018 _Iyear_2019 _Iyear_2020 _Iyear_2021 _Iyear_2022 z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivregress 2sls log(n_disasters) lgdp* lpopulation* _I* (womenrep_lag=z_lag), cluster(country)
variable log not found
r(111);

end of do-file

r(111);

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. gen ln_disasters = log(n_disasters)
(840 missing values generated)

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. gen ln_disasters = ln(n_disasters)
variable ln_disasters already defined
r(110);

end of do-file

r(110);

. drop ln_disasters

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. gen ln_disasters = ln(0.5+n_disasters)

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. ivregress 2sls ln_disasters lgdp* lpopulation* _I* (womenrep_lag=z_lag), cluster(country)

Instrumental variables 2SLS regression            Number of obs   =      1,499
                                                  Wald chi2(95)   =     121.21
                                                  Prob > chi2     =     0.0361
                                                  R-squared       =     0.5382
                                                  Root MSE        =     .55233

                                   (Std. err. adjusted for 64 clusters in country)
----------------------------------------------------------------------------------
                 |               Robust
    ln_disasters | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -.2484385   1.180427    -0.21   0.833    -2.562033    2.065156
       lgdp2_lag |   -.099052   .0739018    -1.34   0.180    -.2438969     .045793
       lgdp3_lag |   .1750225   .1428468     1.23   0.220    -.1049522    .4549971
       lgdp4_lag |   .0723357   .1512751     0.48   0.633     -.224158    .3688294
       lgdp5_lag |   -.140564   .0893996    -1.57   0.116     -.315784    .0346559
lpopulation2_lag |  -.7290244   1.303227    -0.56   0.576    -3.283302    1.825253
lpopulation3_lag |   1.636879   1.969757     0.83   0.406    -2.223774    5.497533
lpopulation4_lag |  -.6864939   1.448941    -0.47   0.636    -3.526367    2.153379
lpopulation5_lag |  -.1637815   .6354832    -0.26   0.797    -1.409306    1.081743
   _Icountryco_1 |   1.359198   .1767222     7.69   0.000     1.012829    1.705568
   _Icountryco_2 |   1.381102   .2950745     4.68   0.000     .8027671    1.959438
   _Icountryco_3 |   .5760734   .2347778     2.45   0.014     .1159174    1.036229
   _Icountryco_4 |    .873053   .2693916     3.24   0.001     .3450553    1.401051
   _Icountryco_5 |   .1023331   .2120119     0.48   0.629    -.3132027    .5178688
   _Icountryco_6 |    .517502   .1404457     3.68   0.000     .2422334    .7927706
   _Icountryco_7 |   1.089437   .2262539     4.82   0.000     .6459879    1.532887
   _Icountryco_8 |     .53535   .2871056     1.86   0.062    -.0273666    1.098067
   _Icountryco_9 |   .8095457   .2297296     3.52   0.000     .3592841    1.259807
  _Icountryco_10 |   1.354351   .4624178     2.93   0.003     .4480291    2.260674
  _Icountryco_11 |   .6098174   .1738647     3.51   0.000     .2690488     .950586
  _Icountryco_12 |   .5429805   .2573179     2.11   0.035     .0386467    1.047314
  _Icountryco_13 |   .5524525    .400685     1.38   0.168    -.2328758    1.337781
  _Icountryco_14 |   .5933977    .285021     2.08   0.037     .0347668    1.152029
  _Icountryco_15 |   1.261899   .3097995     4.07   0.000     .6547037    1.869095
  _Icountryco_16 |   .2417735   .4951977     0.49   0.625    -.7287962    1.212343
  _Icountryco_17 |   .3820841   .2897055     1.32   0.187    -.1857282    .9498965
  _Icountryco_18 |   1.425096   .3976352     3.58   0.000     .6457456    2.204447
  _Icountryco_19 |   .2590193   .1918997     1.35   0.177    -.1170972    .6351357
  _Icountryco_20 |   .8436879   .3140312     2.69   0.007     .2281981    1.459178
  _Icountryco_21 |   .7453737   .2068328     3.60   0.000     .3399888    1.150759
  _Icountryco_22 |   .8695513   .2250971     3.86   0.000     .4283691    1.310734
  _Icountryco_23 |    .477617   .2707258     1.76   0.078    -.0529959     1.00823
  _Icountryco_24 |   .1204123   .2476391     0.49   0.627    -.3649514     .605776
  _Icountryco_25 |    2.07014    .500893     4.13   0.000     1.088408    3.051872
  _Icountryco_26 |  -.0896981   .2198523    -0.41   0.683    -.5206008    .3412045
  _Icountryco_28 |   .0016827   .1573602     0.01   0.991    -.3067377    .3101031
  _Icountryco_29 |   1.538454   .3562696     4.32   0.000      .840178    2.236729
  _Icountryco_30 |   .0264109   .0528297     0.50   0.617    -.0771335    .1299553
  _Icountryco_31 |   .0038176   .1459246     0.03   0.979    -.2821893    .2898246
  _Icountryco_32 |    .372091   .2232895     1.67   0.096    -.0655484    .8097303
  _Icountryco_33 |   .1204092   .0908823     1.32   0.185    -.0577169    .2985354
  _Icountryco_34 |   .6213696   .2726002     2.28   0.023      .087083    1.155656
  _Icountryco_35 |    .938535   .3385232     2.77   0.006     .2750418    1.602028
  _Icountryco_36 |   1.600328   .3042411     5.26   0.000     1.004026    2.196629
  _Icountryco_37 |   1.084922   .2693202     4.03   0.000     .5570636     1.61278
  _Icountryco_38 |   1.748059   .2370374     7.37   0.000     1.283475    2.212644
  _Icountryco_39 |   .9476015   .1817738     5.21   0.000     .5913313    1.303872
  _Icountryco_40 |   .4095694   .2107677     1.94   0.052    -.0035276    .8226665
  _Icountryco_41 |   1.429061   .2492499     5.73   0.000     .9405403    1.917582
  _Icountryco_42 |     1.0253   .3062196     3.35   0.001     .4251207    1.625479
  _Icountryco_43 |   1.311072    .300661     4.36   0.000      .721787    1.900357
  _Icountryco_44 |   1.416779   .6021398     2.35   0.019     .2366062    2.596951
  _Icountryco_45 |    .012534   .0490545     0.26   0.798     -.083611    .1086791
  _Icountryco_47 |    1.21579    .353931     3.44   0.001     .5220982    1.909482
  _Icountryco_48 |   1.238039    .264793     4.68   0.000      .719054    1.757024
  _Icountryco_49 |   .9904396   .1907249     5.19   0.000     .6166257    1.364254
  _Icountryco_50 |   .5817383   .2340437     2.49   0.013     .1230211    1.040455
  _Icountryco_51 |   1.545738   .2342029     6.60   0.000     1.086709    2.004767
  _Icountryco_52 |   .3016426   .5062857     0.60   0.551    -.6906592    1.293944
  _Icountryco_53 |    .649747   .2637771     2.46   0.014     .1327533    1.166741
  _Icountryco_54 |   .5089469   .7548344     0.67   0.500    -.9705012    1.988395
  _Icountryco_55 |  -.0455794   .2314432    -0.20   0.844    -.4991997     .408041
  _Icountryco_56 |   .8026536   .2658291     3.02   0.003     .2816382    1.323669
  _Icountryco_57 |   .4879072   .2141356     2.28   0.023      .068209    .9076053
  _Icountryco_58 |   .4435702   .1091232     4.06   0.000     .2296926    .6574478
  _Icountryco_59 |    1.39366   .2476838     5.63   0.000     .9082088    1.879112
  _Icountryco_60 |    1.45637   .2378325     6.12   0.000     .9902272    1.922513
  _Icountryco_61 |  -.0708838    .398385    -0.18   0.859    -.8517041    .7099364
  _Icountryco_62 |   1.764672   .1251726    14.10   0.000     1.519339    2.010006
  _Icountryco_63 |   .8771517   .2270636     3.86   0.000     .4321153    1.322188
  _Icountryco_64 |   .9172298   .1829596     5.01   0.000     .5586355    1.275824
     _Iyear_1999 |   .0992734   .1155367     0.86   0.390    -.1271744    .3257212
     _Iyear_2000 |   .0504165   .1076391     0.47   0.640    -.1605524    .2613853
     _Iyear_2001 |   .2228913   .1129904     1.97   0.049     .0014342    .4443483
     _Iyear_2002 |   .2489045   .1124015     2.21   0.027     .0286016    .4692074
     _Iyear_2003 |   .1830612   .1065492     1.72   0.086    -.0257714    .3918939
     _Iyear_2004 |   .0014506   .1296916     0.01   0.991    -.2527403    .2556415
     _Iyear_2005 |   .1408131   .1236865     1.14   0.255     -.101608    .3832342
     _Iyear_2006 |   .1783633   .1191458     1.50   0.134    -.0551581    .4118847
     _Iyear_2007 |   .3954566   .1158975     3.41   0.001     .1683018    .6226114
     _Iyear_2008 |   .2753064   .1284492     2.14   0.032     .0235505    .5270623
     _Iyear_2009 |   .2789793   .1265514     2.20   0.027     .0309432    .5270154
     _Iyear_2010 |   .3219757   .1219861     2.64   0.008     .0828874     .561064
     _Iyear_2011 |   .1355865   .1132183     1.20   0.231    -.0863174    .3574904
     _Iyear_2012 |   .0664731   .1367113     0.49   0.627    -.2014761    .3344224
     _Iyear_2013 |   .0425573   .1260166     0.34   0.736    -.2044307    .2895453
     _Iyear_2014 |  -.0629822   .1502222    -0.42   0.675    -.3574122    .2314478
     _Iyear_2015 |   .0954101   .1493183     0.64   0.523    -.1972483    .3880686
     _Iyear_2016 |   .0172155   .1310013     0.13   0.895    -.2395423    .2739733
     _Iyear_2017 |   .1293886   .1387758     0.93   0.351    -.1426071    .4013842
     _Iyear_2018 |   .0552327   .1432431     0.39   0.700    -.2255186     .335984
     _Iyear_2019 |   .4213688   .1384027     3.04   0.002     .1501044    .6926331
     _Iyear_2020 |   .3679125   .1307583     2.81   0.005     .1116309    .6241941
     _Iyear_2021 |    .169253   .1324578     1.28   0.201    -.0903595    .4288655
     _Iyear_2022 |   .2913398   .1403481     2.08   0.038     .0162625     .566417
           _cons |  -1.944641   2.212597    -0.88   0.379    -6.281251    2.391968
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag
            lpopulation3_lag lpopulation4_lag lpopulation5_lag _Icountryco_1
            _Icountryco_2 _Icountryco_3 _Icountryco_4 _Icountryco_5
            _Icountryco_6 _Icountryco_7 _Icountryco_8 _Icountryco_9
            _Icountryco_10 _Icountryco_11 _Icountryco_12 _Icountryco_13
            _Icountryco_14 _Icountryco_15 _Icountryco_16 _Icountryco_17
            _Icountryco_18 _Icountryco_19 _Icountryco_20 _Icountryco_21
            _Icountryco_22 _Icountryco_23 _Icountryco_24 _Icountryco_25
            _Icountryco_26 _Icountryco_28 _Icountryco_29 _Icountryco_30
            _Icountryco_31 _Icountryco_32 _Icountryco_33 _Icountryco_34
            _Icountryco_35 _Icountryco_36 _Icountryco_37 _Icountryco_38
            _Icountryco_39 _Icountryco_40 _Icountryco_41 _Icountryco_42
            _Icountryco_43 _Icountryco_44 _Icountryco_45 _Icountryco_47
            _Icountryco_48 _Icountryco_49 _Icountryco_50 _Icountryco_51
            _Icountryco_52 _Icountryco_53 _Icountryco_54 _Icountryco_55
            _Icountryco_56 _Icountryco_57 _Icountryco_58 _Icountryco_59
            _Icountryco_60 _Icountryco_61 _Icountryco_62 _Icountryco_63
            _Icountryco_64 _Iyear_1999 _Iyear_2000 _Iyear_2001 _Iyear_2002
            _Iyear_2003 _Iyear_2004 _Iyear_2005 _Iyear_2006 _Iyear_2007
            _Iyear_2008 _Iyear_2009 _Iyear_2010 _Iyear_2011 _Iyear_2012
            _Iyear_2013 _Iyear_2014 _Iyear_2015 _Iyear_2016 _Iyear_2017
            _Iyear_2018 _Iyear_2019 _Iyear_2020 _Iyear_2021 _Iyear_2022 z_lag

. 
end of do-file

. do "C:\Users\slee039\AppData\Local\Temp\STD57c0_000000.tmp"

. /*
> Author: Sam Lee
> 03.31.2024
> 
> This script performs an econometric analysis to identify the causal effect that electing more women i
> n African and Arab countries has on CO2 emissions per capita
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //clean and load in the data for analysis
. do Scripts/DataWrangle.do

. /*
> Author: Sam Lee
> 03.30.2024
> 
> This script takes in all of our data sets and merges them into one cleaned data set for data analysis
> */
. 
. cd "C:\Users\slee039\Box\ECON 398\Final Project"
C:\Users\slee039\Box\ECON 398\Final Project

. 
. //Load in suffrage data for each country to create instrument
. import delimited "Data/suffrage.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(14 vars, 21,366 obs)

. sort  countryn year

. 
. //We need to figure out the first year that each country granted women suffrage
. //NOTE: This excludes countries that don't give women suffrage (as of 2019): UAE, Saudi Arabia
. // bysort countryn : egen suffrage = max(female_suffrage)
. // keep if suffrage == 0
. // keep countryn suffrage
. // duplicates drop
. 
. keep if female_suffrage == 1
(10,477 observations deleted)

. //Find the first year where female_suffrage == 1
. bysort countryn : egen suffrage = min(year)

. keep countryn countrycode suffrage

. 
. duplicates drop

Duplicates in terms of all variables

(10,686 observations deleted)

. keep if length(countrycode) >= 1
(7 observations deleted)

. 
. keep countrycode suffrage

. //There are some countries that split due to civil wars and other historic events: i.e. Vietnam into 
> South Vietnam and North Vietnam;
. //Hence, these observations are given the same country code. We will keep the suffrage years of when 
> the 'original' country first gave women suffrage.
. //NOTE: This is actually irrelevant to our study because within the countries identified in the Harva
> rd dataverse data set, each country actually is given a unique country code and hence, we are able to
>  map it uniquely to our final data set.
. collapse (min) suffrage, by(countrycode)

. 
. save Data/suffrage.dta, replace
file Data/suffrage.dta saved

. 
. //Data for CO2 emissions across African and Arab countries over time (EDGAR - Emissions Database for 
> Global Atmospheric Research)
. import delimited "Data/emissions.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-9)
(13 vars, 3,498 obs)

. 
. //Response variable is totalco2cap - Total CO2 emissions per capita
. 
. keep region country countrycode year totalco2

. keep if year >= 1985 //this is the smallest year for which we have covariate data
(990 observations deleted)

. 
. rename totalco2 co2

. sort countrycode year

. 
. save Data/emissions.dta, replace
file Data/emissions.dta saved

. 
. //Data for women participation in national government over time (IPU DATA)
. import delimited "Data/IPU.csv", varnames(1) clear
(encoding automatically selected: UTF-8)
(11 vars, 57,148 obs)

. 
. //Clean the numeric variables
. drop lowerpercwomen

. drop upperpercwomen

. 
. local varlist lowerseats lowerwomen upperseats upperwomen

. 
. foreach var of local varlist {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9.]+$") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(361 missing values generated)
(1,470 missing values generated)
(34,664 missing values generated)
(35,227 missing values generated)

. 
. //There was a data entry error here
. replace lowerwomen = 1 if country == "Saint Vincent & the Grenadines" & ipuupdate == "2002-02-04"
(1 real change made)

. 
. //Clean the date columns
. gen ipuupdate_date = date(ipuupdate, "YMD")

. format ipuupdate_date %td

. drop ipuupdate

. rename ipuupdate_date ipuupdate

. 
. gen upperhousesenate_date = date(upperhousesenate, "MY") if upperhousesenate != "---"
(39,109 missing values generated)

. format upperhousesenate_date %td

. drop upperhousesenate

. rename upperhousesenate_date upperhousesenate

. 
. gen lowerelection_date = date(lowerelection, "DMY")
(50,393 missing values generated)

. gen lowerelection_m_date = date(lowerelection, "MY")
(7,342 missing values generated)

. replace lowerelection_date = lowerelection_m_date if lowerelection_date == .
(49,806 real changes made)

. format lowerelection_date %td

. drop lowerelection_m_date lowerelection

. rename lowerelection_date lowerelection

. 
. //This is the year we will group by
. //We want to know what the what the composition of the legislature is like at a specific year
. gen year = year(ipuupdate)

. keep if countrycode != ""
(1,911 observations deleted)

. 
. /*
> In order to match up with our other data,
> which only keeps track of emission or population data by the year for each country, we need the year 
> and country to uniquely identify the observation. Hence, we will select the earliest time in each set
>  of country, year groups to yield us data for women empowerment--although some countries have electio
> ns throughout the year.
> */
. local election_vars lowerwomen upperwomen lowerseats upperseats

. foreach var of local election_vars {
  2.         bysort country year : egen mean`var' = mean(`var')
  3. }
(384 missing values generated)
(33,108 missing values generated)
(170 missing values generated)
(32,869 missing values generated)

. //Treatment variable: Since some countries have multiple elections throughout the year, we are going 
> to standardize it in the sense that we are going to take the 'average' proportion of women representa
> tion (total number of women in power divided by the total number of seats in national legislature) th
> roughout the year
. gen womenrep = (cond(meanlowerwomen == ., 0, meanlowerwomen) +cond(meanupperwomen == ., 0, meanupperw
> omen))/(cond(meanlowerwomen == ., 0, meanlowerseats)+cond(meanupperwomen == ., 0, meanupperseats))
(315 missing values generated)

. 
. foreach var of local election_vars {
  2.         drop mean`var'
  3. }

. 
. keep countrycode year womenrep

. duplicates drop

Duplicates in terms of all variables

(50,093 observations deleted)

. 
. //Some countries in the IPU data set were recorded 'twice' in the sense whereonce was there tradition
> al election composition (baseline), and the other observation during the same year was a special case
>  where the president or some other organization appointed a group of extra delegates (consisting of w
> omen) that increased the women representation for that year/time period.
. //To account for this and to make it so each observation can be uniquely identified by year and count
> ry (time-subject identification), we will just combine the baseline compositions with the composition
> s where these unique cases occured by taking the mean of the women representation proportion
. 
. collapse (mean) womenrep, by(countrycode year)

. 
. sort countrycode year

. 
. save Data/IPU.dta, replace
file Data/IPU.dta saved

. 
. //Load is disasters data for placebo test
. import excel using "Data/disasters.xlsx", sheet("EM-DAT Data") firstrow clear
(46 vars, 2,405 obs)

. 
. //This includes things like epidemics and viral diseases, which may be influenced by the number of wo
> men in legislature if women enact specific policies that influence vaccines, health outcomes, the lik
> elihood of infections, etc.
. drop if DisasterSubgroup == "Biological"
(732 observations deleted)

. 
. rename StartYear year

. rename ISO countrycode

. 
. keep countrycode year

. 
. gen n_disasters = 1

. //The number of natural disasters that happened in each country during each year
. collapse (sum) n_disasters, by (countrycode year)

. 
. save Data/disasters.dta, replace
file Data/disasters.dta saved

. 
. //Covariate Data from the World Bank
. import delimited "Data/worldbank.csv", varnames(1) rowrange(1:652) clear
(encoding automatically selected: ISO-8859-1)
(42 vars, 651 obs)

. 
. drop seriesname

. 
. //Format the years as rows
. reshape long yr, i(countryname seriescode) j(year)
(j = 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 200
> 4 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations              651   ->   24,738      
Number of variables                  41   ->   5           
j variable (38 values)                    ->   year
xij variables:
               yr1985 yr1986 ... yr2022   ->   yr
-----------------------------------------------------------------------------

. 
. //Put the metrics as columns
. rename yr value

. replace seriescode = "gdp" if seriescode == "NY.GDP.MKTP.CD"
(8,246 real changes made)

. replace seriescode = "gdppercapita" if seriescode == "NY.GDP.PCAP.CD"
(8,246 real changes made)

. replace seriescode = "population" if seriescode == "SP.POP.TOTL"
(8,246 real changes made)

. reshape wide value, i(countryname year) j(seriescode) string
(j = gdp gdppercapita population)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations           24,738   ->   8,246       
Number of variables                   5   ->   6           
j variable (3 values)        seriescode   ->   (dropped)
xij variables:
                                  value   ->   valuegdp valuegdppercapita valuepopulation
-----------------------------------------------------------------------------

. 
. rename valuegdp gdp

. rename valuegdppercapita gdppercapita

. rename valuepopulation population

. 
. //Clean numeric data
. local metrics gdp gdppercapita population

. foreach var of local metrics {
  2.     gen `var'_numeric = real(`var') if regexm(`var', "^[0-9]") | missing(`var')
  3.     drop `var'
  4.     rename `var'_numeric `var'
  5. }
(815 missing values generated)
(811 missing values generated)
(5 missing values generated)

. 
. save Data/worldbank.dta, replace
file Data/worldbank.dta saved

. 
. //Merge the data sets
. 
. //Merge covariates with emissions data
. sort countrycode year

. merge 1:1 countrycode year using Data/emissions.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,738
        from master                     5,738  (_merge==1)
        from using                          0  (_merge==2)

    Matched                             2,508  (_merge==3)
    -----------------------------------------

. //All the country codes in the emissions data set match (which is what we want. The worldbank data al
> so includes data from countries outside of the regions of interest)
. keep if _merge == 3
(5,738 observations deleted)

. drop _merge

. 
. drop country //country name from emissions data set

. rename countryname country

. 
. merge 1:1 year countrycode using Data/IPU.dta
(variable year was int, now float to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         4,267
        from master                       848  (_merge==1)
        from using                      3,419  (_merge==2)

    Matched                             1,660  (_merge==3)
    -----------------------------------------

. 
. keep if _merge == 3 | _merge == 1
(3,419 observations deleted)

. drop _merge

. 
. sort countrycode year

. 
. //Join suffrage data and create instrument
. merge m:1 countrycode using Data/suffrage.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           202
        from master                        76  (_merge==1)
        from using                        126  (_merge==2)

    Matched                             2,432  (_merge==3)
    -----------------------------------------

. //These are countries that are not African or Arab
. drop if _merge == 2
(126 observations deleted)

. drop _merge

. 
. //Instrument: years from when country granted suffrage
. gen z = year - suffrage
(76 missing values generated)

. 
. drop if z == .
(76 observations deleted)

. //This drops Saudi Arabia and UAE:
. //Saudia Arabia only holds local elections (which women were enfranchised in 2015)
. //UAE doesn't grant universal suffrage for women (or anyone), and only recently held national electio
> ns in 2006, allowing a small number of voters to participate.
. 
. //NOTE: The womenrep data for years 1985-1996 will be missing for every country since that data wasn'
> t provided by the IPU. We keep these rows in here anyhow because we might want previous years to veri
> fy the parallel trends assumption and to use lags from other variables.
. save Data/womenrep.dta, replace
file Data/womenrep.dta saved

. export delimited using "Data/womenrep.csv", replace
file Data/womenrep.csv saved

. 
end of do-file

. 
. gen lgdp = ln(gdp)
(114 missing values generated)

. gen lpopulation = ln(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create lags
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. 
. forvalues i = 1985/1997 {
  2.         drop _Iyear_`i'
  3. }

. 
. //Drop Qatar and Iraq, and 1998 year dummies due to colinearity
. drop _Icountryco_46 _Icountryco_27 _Iyear_1998

. 
. //First stage to show relevance
. reg womenrep_lag z_lag lgdp* lpopulation* _Iyear* _Icountry*

      Source |       SS           df       MS      Number of obs   =     1,499
-------------+----------------------------------   F(95, 1403)     =     77.93
       Model |   14.591666        95  .153596484   Prob > F        =    0.0000
    Residual |  2.76526426     1,403  .001970965   R-squared       =    0.8407
-------------+----------------------------------   Adj R-squared   =    0.8299
       Total |  17.3569303     1,498  .011586736   Root MSE        =     .0444

----------------------------------------------------------------------------------
    womenrep_lag | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-----------------+----------------------------------------------------------------
           z_lag |   .0044971   .0005612     8.01   0.000     .0033962    .0055979
       lgdp2_lag |   .0225212   .0081681     2.76   0.006     .0064982    .0385443
       lgdp3_lag |    -.00714   .0110674    -0.65   0.519    -.0288505    .0145705
       lgdp4_lag |   .0017338   .0108426     0.16   0.873    -.0195356    .0230033
       lgdp5_lag |    .007004   .0075865     0.92   0.356    -.0078781    .0218861
lpopulation2_lag |  -.3420979   .1276795    -2.68   0.007    -.5925611   -.0916346
lpopulation3_lag |   .3886089    .236357     1.64   0.100    -.0750424    .8522602
lpopulation4_lag |    -.08213   .2268873    -0.36   0.717    -.5272049    .3629448
lpopulation5_lag |  -.0227102   .1119356    -0.20   0.839    -.2422894     .196869
     _Iyear_1999 |  -.0044325   .0087634    -0.51   0.613    -.0216234    .0127583
     _Iyear_2000 |  -.0061486   .0086209    -0.71   0.476    -.0230597    .0107626
     _Iyear_2001 |  -.0047335   .0087814    -0.54   0.590    -.0219596    .0124926
     _Iyear_2002 |  -.0045484   .0086826    -0.52   0.600    -.0215806    .0124838
     _Iyear_2003 |  -.0037837   .0087251    -0.43   0.665    -.0208993     .013332
     _Iyear_2004 |   .0070119   .0088143     0.80   0.426    -.0102787    .0243026
     _Iyear_2005 |   .0134832   .0088413     1.53   0.127    -.0038604    .0308268
     _Iyear_2006 |    .020505    .008868     2.31   0.021     .0031091    .0379009
     _Iyear_2007 |   .0244293   .0090694     2.69   0.007     .0066383    .0422203
     _Iyear_2008 |   .0236607    .009349     2.53   0.011     .0053211    .0420002
     _Iyear_2009 |   .0198664   .0096385     2.06   0.039      .000959    .0387738
     _Iyear_2010 |   .0182186   .0100258     1.82   0.069    -.0014485    .0378857
     _Iyear_2011 |   .0194166   .0102457     1.90   0.058    -.0006819     .039515
     _Iyear_2012 |   .0197717   .0106038     1.86   0.062    -.0010293    .0405727
     _Iyear_2013 |   .0210791   .0107273     1.97   0.050     .0000359    .0421223
     _Iyear_2014 |   .0263286   .0109867     2.40   0.017     .0047765    .0478807
     _Iyear_2015 |   .0308472   .0112609     2.74   0.006     .0087571    .0529372
     _Iyear_2016 |   .0282295   .0114637     2.46   0.014     .0057416    .0507175
     _Iyear_2017 |   .0283058   .0115723     2.45   0.015      .005605    .0510067
     _Iyear_2018 |   .0248747   .0117108     2.12   0.034     .0019021    .0478473
     _Iyear_2019 |   .0226746    .011763     1.93   0.054    -.0004004    .0457497
     _Iyear_2020 |   .0214274    .011837     1.81   0.070    -.0017928    .0446475
     _Iyear_2021 |    .025102   .0121034     2.07   0.038     .0013592    .0488447
     _Iyear_2022 |     .02694   .0123502     2.18   0.029     .0027132    .0511668
   _Icountryco_1 |    .298487   .0387323     7.71   0.000     .2225075    .3744665
   _Icountryco_2 |   .2906172   .0294302     9.87   0.000     .2328852    .3483491
   _Icountryco_3 |   .0404121   .0238199     1.70   0.090    -.0063144    .0871386
   _Icountryco_4 |   .1184351   .0314542     3.77   0.000     .0567329    .1801373
   _Icountryco_5 |   .1286735   .0174485     7.37   0.000     .0944455    .1629016
   _Icountryco_6 |   .0031364   .0180392     0.17   0.862    -.0322503    .0385231
   _Icountryco_7 |   .0474096   .0229428     2.07   0.039     .0024037    .0924156
   _Icountryco_8 |   .0683566   .0316517     2.16   0.031     .0062669    .1304463
   _Icountryco_9 |   .1388349   .0313203     4.43   0.000     .0773952    .2002745
  _Icountryco_10 |   .1871797   .0558952     3.35   0.001     .0775326    .2968269
  _Icountryco_11 |   .0993875   .0172491     5.76   0.000     .0655506    .1332243
  _Icountryco_12 |  -.0388156   .0314448    -1.23   0.217    -.1004996    .0228683
  _Icountryco_13 |   .0802125   .0336188     2.39   0.017     .0142639     .146161
  _Icountryco_14 |    .062435    .026293     2.37   0.018     .0108573    .1140128
  _Icountryco_15 |   .1070168   .0387723     2.76   0.006     .0309588    .1830748
  _Icountryco_16 |   .0709914   .0511657     1.39   0.166    -.0293781     .171361
  _Icountryco_17 |   .3149789   .0270237    11.66   0.000     .2619677    .3679902
  _Icountryco_18 |   .2516826   .0553013     4.55   0.000     .1432005    .3601647
  _Icountryco_19 |  -.0038877   .0225958    -0.17   0.863    -.0482129    .0404374
  _Icountryco_20 |   .0845907    .034682     2.44   0.015     .0165566    .1526247
  _Icountryco_21 |   .1343936   .0256929     5.23   0.000      .083993    .1847943
  _Icountryco_22 |   .0181145    .023475     0.77   0.440    -.0279353    .0641644
  _Icountryco_23 |   .0957815   .0242448     3.95   0.000     .0482215    .1433415
  _Icountryco_24 |   .0115513   .0264771     0.44   0.663    -.0403877    .0634903
  _Icountryco_25 |   .1234323   .0582033     2.12   0.034     .0092574    .2376072
  _Icountryco_26 |   .1717301   .0357175     4.81   0.000     .1016646    .2417955
  _Icountryco_28 |   .0766713   .0210357     3.64   0.000     .0354066    .1179361
  _Icountryco_29 |   .1450687   .0440049     3.30   0.001     .0587462    .2313913
  _Icountryco_30 |   .0686399   .0192074     3.57   0.000     .0309616    .1063182
  _Icountryco_31 |  -.1097278   .0144422    -7.60   0.000    -.1380583   -.0813972
  _Icountryco_32 |  -.0141132   .0244273    -0.58   0.564    -.0620311    .0338048
  _Icountryco_33 |   -.002084   .0152465    -0.14   0.891    -.0319924    .0278244
  _Icountryco_34 |   .1343034   .0216633     6.20   0.000     .0918074    .1767993
  _Icountryco_35 |   .0719676   .0377675     1.91   0.057    -.0021192    .1460544
  _Icountryco_36 |   .1305824   .0357097     3.66   0.000     .0605322    .2006326
  _Icountryco_37 |   .1050178    .030655     3.43   0.001     .0448832    .1651524
  _Icountryco_38 |   .4266577   .0425219    10.03   0.000     .3432443     .510071
  _Icountryco_39 |   .0582756   .0188639     3.09   0.002      .021271    .0952802
  _Icountryco_40 |   .0062849   .0232949     0.27   0.787    -.0394117    .0519814
  _Icountryco_41 |   .1608733   .0321076     5.01   0.000     .0978891    .2238574
  _Icountryco_42 |    .279304   .0170142    16.42   0.000     .2459281      .31268
  _Icountryco_43 |   .1046309   .0327073     3.20   0.001     .0404704    .1687914
  _Icountryco_44 |   .1690322   .0705851     2.39   0.017     .0305685    .3074959
  _Icountryco_45 |   .1158403   .0208698     5.55   0.000      .074901    .1567797
  _Icountryco_47 |   .4288188   .0276513    15.51   0.000     .3745764    .4830611
  _Icountryco_48 |   .1974277   .0406975     4.85   0.000     .1175933    .2772622
  _Icountryco_49 |   .2567815   .0258736     9.92   0.000     .2060263    .3075366
  _Icountryco_50 |    .091375   .0244429     3.74   0.000     .0434264    .1393236
  _Icountryco_51 |   .1998968   .0357928     5.58   0.000     .1296836      .27011
  _Icountryco_52 |    .007565   .0507616     0.15   0.882    -.0920119    .1071419
  _Icountryco_53 |   .0404207   .0254119     1.59   0.112    -.0094288    .0902702
  _Icountryco_54 |   .0941673    .061642     1.53   0.127    -.0267532    .2150878
  _Icountryco_55 |   .0382915   .0258237     1.48   0.138    -.0123658    .0889488
  _Icountryco_56 |   .0714911   .0276738     2.58   0.010     .0172046    .1257777
  _Icountryco_57 |   .0660962   .0225486     2.93   0.003     .0218636    .1103289
  _Icountryco_58 |   .1355992   .0209387     6.48   0.000     .0945246    .1766738
  _Icountryco_59 |    .330883    .046664     7.09   0.000     .2393443    .4224218
  _Icountryco_60 |    .314606   .0416022     7.56   0.000     .2329968    .3962152
  _Icountryco_61 |   .1406717   .0482674     2.91   0.004     .0459876    .2353558
  _Icountryco_62 |   .4876893   .0590006     8.27   0.000     .3719505    .6034281
  _Icountryco_63 |    .124422   .0288393     4.31   0.000     .0678491    .1809949
  _Icountryco_64 |   .2802425   .0351075     7.98   0.000     .2113736    .3491114
           _cons |   .1926943    .231064     0.83   0.404    -.2605738    .6459625
----------------------------------------------------------------------------------

. 
. //Two-stage diff-in-diff regression (Main regression to derive delta)
. ivregress 2sls co2 lgdp* lpopulation* _Iyear* _Icountry* (womenrep_lag=z_lag), cluster(countryid)

Instrumental variables 2SLS regression            Number of obs   =      1,499
                                                  Wald chi2(95)   =    1533.69
                                                  Prob > chi2     =     0.0000
                                                  R-squared       =     0.4448
                                                  Root MSE        =     4.6336

                                 (Std. err. adjusted for 64 clusters in countryid)
----------------------------------------------------------------------------------
                 |               Robust
             co2 | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
-----------------+----------------------------------------------------------------
    womenrep_lag |  -107.8425   28.78255    -3.75   0.000    -164.2553   -51.42973
       lgdp2_lag |   2.924972   1.336674     2.19   0.029     .3051384    5.544805
       lgdp3_lag |   -.653158   .8368936    -0.78   0.435    -2.293439    .9871233
       lgdp4_lag |   .3282025   .6306981     0.52   0.603     -.907943    1.564348
       lgdp5_lag |   .7702276   .8580516     0.90   0.369    -.9115227    2.451978
lpopulation2_lag |  -32.77009       20.3    -1.61   0.106    -72.55736    7.017186
lpopulation3_lag |    29.6272   18.96608     1.56   0.118    -7.545635    66.80004
lpopulation4_lag |  -.8691831   12.04223    -0.07   0.942    -24.47152    22.73316
lpopulation5_lag |  -6.992016   9.222721    -0.76   0.448    -25.06822    11.08419
     _Iyear_1999 |   .0999534   .4391663     0.23   0.820    -.7607968    .9607036
     _Iyear_2000 |    .591267   .5398685     1.10   0.273    -.4668558     1.64939
     _Iyear_2001 |   1.390906   .5517341     2.52   0.012     .3095268    2.472285
     _Iyear_2002 |   1.945612   .5002733     3.89   0.000     .9650945     2.92613
     _Iyear_2003 |   2.647328    .503008     5.26   0.000     1.661451    3.633206
     _Iyear_2004 |   4.515761   .7208625     6.26   0.000     3.102897    5.928626
     _Iyear_2005 |    5.74162   .8877487     6.47   0.000     4.001665    7.481576
     _Iyear_2006 |   7.046495   1.138746     6.19   0.000     4.814594    9.278396
     _Iyear_2007 |   7.944794    1.42161     5.59   0.000     5.158491     10.7311
     _Iyear_2008 |   8.307429   1.509235     5.50   0.000     5.349382    11.26548
     _Iyear_2009 |   8.301465   1.530404     5.42   0.000     5.301929      11.301
     _Iyear_2010 |   8.608877   1.593102     5.40   0.000     5.486454     11.7313
     _Iyear_2011 |   9.251817   1.710177     5.41   0.000     5.899932     12.6037
     _Iyear_2012 |   9.881987   1.823811     5.42   0.000     6.307383    13.45659
     _Iyear_2013 |   10.56471   2.032451     5.20   0.000     6.581179    14.54824
     _Iyear_2014 |   11.69655   2.207783     5.30   0.000     7.369371    16.02372
     _Iyear_2015 |    12.6858   2.377474     5.34   0.000     8.026038    17.34556
     _Iyear_2016 |    12.9549   2.369591     5.47   0.000     8.310583    17.59921
     _Iyear_2017 |   13.57758   2.360596     5.75   0.000     8.950899    18.20427
     _Iyear_2018 |   13.77462    2.18224     6.31   0.000     9.497513    18.05174
     _Iyear_2019 |   14.11199   2.170377     6.50   0.000     9.858129    18.36585
     _Iyear_2020 |   14.35193   2.128762     6.74   0.000     10.17964    18.52423
     _Iyear_2021 |   15.44305   2.240625     6.89   0.000      11.0515    19.83459
     _Iyear_2022 |   16.25513   2.411684     6.74   0.000     11.52832    20.98194
   _Icountryco_1 |   20.68753   4.066881     5.09   0.000     12.71659    28.65847
   _Icountryco_2 |    23.2247   7.054507     3.29   0.001     9.398123    37.05128
   _Icountryco_3 |  -3.230026   5.519487    -0.59   0.558    -14.04802     7.58797
   _Icountryco_4 |   7.358422   6.342783     1.16   0.246    -5.073204    19.79005
   _Icountryco_5 |  -1.834291   5.541591    -0.33   0.741    -12.69561    9.027027
   _Icountryco_6 |  -15.27108   3.735097    -4.09   0.000    -22.59173   -7.950421
   _Icountryco_7 |  -5.015889   5.383555    -0.93   0.351    -15.56746    5.535684
   _Icountryco_8 |     2.5109   6.952358     0.36   0.718    -11.11547    16.13727
   _Icountryco_9 |   9.963422   5.427772     1.84   0.066    -.6748158    20.60166
  _Icountryco_10 |   17.27989   11.26538     1.53   0.125    -4.799854    39.35963
  _Icountryco_11 |   .1071763   4.368616     0.02   0.980    -8.455154    8.669506
  _Icountryco_12 |  -29.92642   6.799071    -4.40   0.000    -43.25235   -16.60048
  _Icountryco_13 |  -17.42718   10.59661    -1.64   0.100    -38.19615    3.341788
  _Icountryco_14 |  -18.05801   7.574373    -2.38   0.017    -32.90351    -3.21251
  _Icountryco_15 |   10.34022   7.698073     1.34   0.179    -4.747729    25.42816
  _Icountryco_16 |   12.17656     12.384     0.98   0.325    -12.09563    36.44876
  _Icountryco_17 |   6.183297   7.351875     0.84   0.400    -8.226114    20.59271
  _Icountryco_18 |   31.29453   9.638708     3.25   0.001     12.40301    50.18605
  _Icountryco_19 |  -12.96086   5.075702    -2.55   0.011    -22.90906   -3.012669
  _Icountryco_20 |   6.945596   7.606157     0.91   0.361    -7.962199    21.85339
  _Icountryco_21 |    8.34019   4.844307     1.72   0.085    -1.154478    17.83486
  _Icountryco_22 |   -14.3656   5.659788    -2.54   0.011    -25.45858   -3.272615
  _Icountryco_23 |  -10.85569   7.012749    -1.55   0.122    -24.60043    2.889044
  _Icountryco_24 |  -15.00533   6.639021    -2.26   0.024    -28.01758    -1.99309
  _Icountryco_25 |   10.48566   12.59308     0.83   0.405    -14.19632    35.16765
  _Icountryco_26 |   19.18863   5.463672     3.51   0.000     8.480025    29.89723
  _Icountryco_28 |  -5.751752   3.683225    -1.56   0.118    -12.97074    1.467237
  _Icountryco_29 |   12.23304   8.718146     1.40   0.161    -4.854212    29.32029
  _Icountryco_30 |  -3.697054   1.078547    -3.43   0.001    -5.810966   -1.583141
  _Icountryco_31 |  -15.18332   3.381379    -4.49   0.000     -21.8107   -8.555936
  _Icountryco_32 |  -5.935613   5.341864    -1.11   0.267    -16.40547    4.534248
  _Icountryco_33 |  -4.083067   2.129031    -1.92   0.055    -8.255891    .0897576
  _Icountryco_34 |   -1.81149   7.114872    -0.25   0.799    -15.75638     12.1334
  _Icountryco_35 |    4.59114   8.372208     0.55   0.583    -11.81809    21.00037
  _Icountryco_36 |   9.936326   7.192663     1.38   0.167    -4.161034    24.03369
  _Icountryco_37 |   5.674104   6.350031     0.89   0.372    -6.771728    18.11994
  _Icountryco_38 |   34.89957   5.400576     6.46   0.000     24.31464    45.48451
  _Icountryco_39 |   -5.33409   4.547655    -1.17   0.241    -14.24733    3.579151
  _Icountryco_40 |  -17.71482   5.644732    -3.14   0.002    -28.77829   -6.651351
  _Icountryco_41 |   9.908768   5.823345     1.70   0.089    -1.504778    21.32231
  _Icountryco_42 |    2.03958   7.915309     0.26   0.797    -13.47414     17.5533
  _Icountryco_43 |   6.042146   7.070069     0.85   0.393    -7.814934    19.89923
  _Icountryco_44 |   13.28036   15.13383     0.88   0.380     -16.3814    42.94212
  _Icountryco_45 |  -5.609082   1.130859    -4.96   0.000    -7.825526   -3.392639
  _Icountryco_47 |   38.14465   8.627031     4.42   0.000     21.23598    55.05332
  _Icountryco_48 |   16.38715   6.386615     2.57   0.010     3.869611    28.90468
  _Icountryco_49 |   21.15142   4.455111     4.75   0.000     12.41957    29.88328
  _Icountryco_50 |   .5766269   5.524376     0.10   0.917    -10.25095     11.4042
  _Icountryco_51 |     13.408   5.622836     2.38   0.017      2.38744    24.42855
  _Icountryco_52 |  -29.49976    13.3712    -2.21   0.027    -55.70683   -3.292681
  _Icountryco_53 |  -15.76647   7.022358    -2.25   0.025    -29.53004   -2.002906
  _Icountryco_54 |   -15.8791   19.57312    -0.81   0.417    -54.24171    22.48351
  _Icountryco_55 |   3.791151   5.603456     0.68   0.499     -7.19142    14.77372
  _Icountryco_56 |   .8575546   6.250021     0.14   0.891    -11.39226    13.10737
  _Icountryco_57 |  -1.779473   5.046564    -0.35   0.724    -11.67056    8.111611
  _Icountryco_58 |    9.34439    2.54427     3.67   0.000     4.357713    14.33107
  _Icountryco_59 |   32.83622   5.774994     5.69   0.000     21.51744      44.155
  _Icountryco_60 |   30.24874   5.457033     5.54   0.000     19.55316    40.94433
  _Icountryco_61 |  -2.847616   9.650954    -0.30   0.768    -21.76314    16.06791
  _Icountryco_62 |   41.91729   2.905688    14.43   0.000     36.22224    47.61233
  _Icountryco_63 |   5.080623   5.335624     0.95   0.341    -5.377008    15.53825
  _Icountryco_64 |   15.36792   4.276583     3.59   0.000      6.98597    23.74987
           _cons |   103.5709   57.82667     1.79   0.073    -9.767322     216.909
----------------------------------------------------------------------------------
Endogenous: womenrep_lag
Exogenous:  lgdp2_lag lgdp3_lag lgdp4_lag lgdp5_lag lpopulation2_lag
            lpopulation3_lag lpopulation4_lag lpopulation5_lag _Iyear_1999
            _Iyear_2000 _Iyear_2001 _Iyear_2002 _Iyear_2003 _Iyear_2004
            _Iyear_2005 _Iyear_2006 _Iyear_2007 _Iyear_2008 _Iyear_2009
            _Iyear_2010 _Iyear_2011 _Iyear_2012 _Iyear_2013 _Iyear_2014
            _Iyear_2015 _Iyear_2016 _Iyear_2017 _Iyear_2018 _Iyear_2019
            _Iyear_2020 _Iyear_2021 _Iyear_2022 _Icountryco_1 _Icountryco_2
            _Icountryco_3 _Icountryco_4 _Icountryco_5 _Icountryco_6
            _Icountryco_7 _Icountryco_8 _Icountryco_9 _Icountryco_10
            _Icountryco_11 _Icountryco_12 _Icountryco_13 _Icountryco_14
            _Icountryco_15 _Icountryco_16 _Icountryco_17 _Icountryco_18
            _Icountryco_19 _Icountryco_20 _Icountryco_21 _Icountryco_22
            _Icountryco_23 _Icountryco_24 _Icountryco_25 _Icountryco_26
            _Icountryco_28 _Icountryco_29 _Icountryco_30 _Icountryco_31
            _Icountryco_32 _Icountryco_33 _Icountryco_34 _Icountryco_35
            _Icountryco_36 _Icountryco_37 _Icountryco_38 _Icountryco_39
            _Icountryco_40 _Icountryco_41 _Icountryco_42 _Icountryco_43
            _Icountryco_44 _Icountryco_45 _Icountryco_47 _Icountryco_48
            _Icountryco_49 _Icountryco_50 _Icountryco_51 _Icountryco_52
            _Icountryco_53 _Icountryco_54 _Icountryco_55 _Icountryco_56
            _Icountryco_57 _Icountryco_58 _Icountryco_59 _Icountryco_60
            _Icountryco_61 _Icountryco_62 _Icountryco_63 _Icountryco_64 z_lag

. 
. //Save results to a latex table
. ssc install estout
checking estout consistency and verifying not already installed...
all files already exist and are up to date.

. esttab using "regression_results_raw.tex", replace ci
(output written to regression_results_raw.tex)

. 
. /*one way CV1 and CV3 */
. adopath + "C:\Users\slee039\Box\ECON 398\Final Project\Resources\MNW-guide-replic-do-files"
  [1]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\slee039\ado\personal/"
  [5]  (PLUS)      "C:\Users\slee039\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "Resources\MNW-guide-replic-do-files"
  [8]              "C:\Users\slee039\Box\ECON 398\Final Project\Resources\MNW-guide-replic-do-files"

. 
. summclust womenrep_lag, yvar(co2) xvar(lgdp* lpopulation*) fevar(_Iyear* _Icountry*) ///
>  cluster(countryid) rho(0.5) jack 


SUMMCLUST - MacKinnon, Nielsen, and Webb
 
Cluster summary statistics for womenrep_lag when clustered by countryid.
There are 1499 observations within 64 countryid clusters.

Regression Output

  s.e. |      Coeff   Sd. Err.   t-stat  P value    CI-lower    CI-upper
-------+----------------------------------------------------------------
   CV1 |  -5.539950   2.105267  -2.6315   0.0107   -9.746990   -1.332909
   CV3 |  -5.539950   6.886255  -0.8045   0.4241   -1.93e+01    8.221133
  CV3J |  -5.539950   6.815349  -0.8129   0.4194   -1.92e+01    8.079439
------------------------------------------------------------------------

Cluster Variability

 Statistic |       Ng      Leverage     Partial L.  beta no g    
-----------+-----------------------------------------------------
       min |      5.0      1.067822       0.000102  -6.188928    
        q1 |     23.5      1.442487       0.007746  -5.640850    
    median |     25.0      1.458248       0.011587  -5.551987    
      mean |     23.4      1.500000       0.015625  -5.415768    
        q3 |     25.0      1.514160       0.018182  -5.452013    
       max |     25.0      2.627734       0.077512  -0.756779    
-----------+-----------------------------------------------------
   coefvar |      0.1      0.128874       0.870524   0.159800    
 
Effective Number of Clusters
-----------------------------
G*(0)  is  36.6558
G*(.5) is 28.97432 
G*(1)  is 2 

. 
. //Run placebo test
. do Scripts/placebo.do

. /*
> Author: Sam Lee
> 04.05.2024
> 
> This script estimates the effect that women in national legislature have on the frequency of natural 
> disasters within a country.
> 
> Theoretically, with this as a placebo, there should be a very weak/zero effect. I provide this as evi
> dence that my results are significant.
> */
. 
. use Data/womenrep.dta, clear

. 
. gen lgdp = log(gdp)
(114 missing values generated)

. gen lpopulation = log(population)

. 
. //Format it into panel data
. sort countrycode year

. egen countryid = group(countrycode)

. xtset countryid year

Panel variable: countryid (strongly balanced)
 Time variable: year, 1985 to 2022
         Delta: 1 unit

. 
. //Create covariate X matrix
. local lag_effect = 5

. foreach var of varlist lgdp lpopulation {
  2.     forvalues p = 2/`lag_effect' {
  3.         gen `var'`p'_lag = L`p'.`var'
  4.     }
  5.         drop `var'
  6. }
(236 missing values generated)
(298 missing values generated)
(360 missing values generated)
(423 missing values generated)
(128 missing values generated)
(192 missing values generated)
(256 missing values generated)
(320 missing values generated)

. 
. local lag_vars womenrep z

. foreach var of local lag_vars {
  2.         gen `var'_lag = L.`var'
  3. }
(897 missing values generated)
(64 missing values generated)

. 
. keep if year >= 1997
(768 observations deleted)

. 
. merge m:1 countrycode year using Data/disasters.dta

    Result                      Number of obs
    -----------------------------------------
    Not matched                           864
        from master                       840  (_merge==1)
        from using                         24  (_merge==2)

    Matched                               824  (_merge==3)
    -----------------------------------------

. 
. //These are the countries in that aren't in our sample (Saudi Arabia, UAE)
. drop if _merge == 2
(24 observations deleted)

. drop _merge

. 
. //If no events were recorded for that country during that year, then (an estimated) 0 natural disaste
> rs happened during that year for that country
. replace n_disasters = cond(n_disasters == ., 0, n_disasters)
(840 real changes made)

. 
. //Create dummies for countries and year
. xi i.countrycode i.year, noomit

. drop _Icountryco_46 _Icountryco_27 _Iyear_1997 _Iyear_1998

. 
. //Poisson Regression
. ivpoisson gmm (womenrep_lag=z_lag) n_disasters lgdp* lpopulation* _I*

Step 1
Iteration 0:  GMM criterion Q(b) =  1.0581733  
Iteration 1:  GMM criterion Q(b) =  .23600239  
Iteration 2:  GMM criterion Q(b) =  .02008849  
Iteration 3:  GMM criterion Q(b) =  .00843808  
Iteration 4:  GMM criterion Q(b) =  .00806923  
Iteration 5:  GMM criterion Q(b) =  .00727917  (not concave)
Iteration 6:  GMM criterion Q(b) =  .00142933  
Iteration 7:  GMM criterion Q(b) =  .00108123  (not concave)
Iteration 8:  GMM criterion Q(b) =  .00029076  
Iteration 9:  GMM criterion Q(b) =  .00016779  (not concave)
Iteration 10: GMM criterion Q(b) =  .00007322  
Iteration 11: GMM criterion Q(b) =  3.796e-06  (not concave)
Iteration 12: GMM criterion Q(b) =  2.437e-06  (not concave)
Iteration 13: GMM criterion Q(b) =  2.063e-06  (not concave)
Iteration 14: GMM criterion Q(b) =  2.033e-06  

Step 2
Iteration 0:  GMM criterion Q(b) =  .07848274  
Iteration 1:  GMM criterion Q(b) =  5.997e-06  
Iteration 2:  GMM criterion Q(b) =  4.889e-07  (not concave)
Iteration 3:  GMM criterion Q(b) =  1.741e-07  (not concave)
Iteration 4:  GMM criterion Q(b) =  1.121e-07  (not concave)
Iteration 5:  GMM criterion Q(b) =  9.499e-08  (not concave)
Iteration 6:  GMM criterion Q(b) =  9.325e-08  
    The Gauss-Newton stopping criterion has been met but missing standard errors indicate some of the
    parameters are not identified.

Exponential mean model with endogenous regressors

Number of parameters =  96                         Number of obs  =      1,499
Number of moments    =  96
Initial weight matrix: Unadjusted
GMM weight matrix:     Robust

r(430);

end of do-file
r(430);

end of do-file

r(430);

